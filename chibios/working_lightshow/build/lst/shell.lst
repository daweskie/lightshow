   1              		.syntax unified
   2              		.cpu cortex-m4
   3              		.eabi_attribute 27, 3
   4              		.fpu fpv4-sp-d16
   5              		.eabi_attribute 20, 1
   6              		.eabi_attribute 21, 1
   7              		.eabi_attribute 23, 3
   8              		.eabi_attribute 24, 1
   9              		.eabi_attribute 25, 1
  10              		.eabi_attribute 26, 1
  11              		.eabi_attribute 30, 6
  12              		.eabi_attribute 34, 1
  13              		.eabi_attribute 18, 4
  14              		.thumb
  15              		.file	"shell.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.global	shell_terminated
  20              		.section	.bss.shell_terminated,"aw",%nobits
  21              		.align	2
  24              	shell_terminated:
  25 0000 00000000 		.space	4
  26              		.section	.text._strtok,"ax",%progbits
  27              		.align	2
  28              		.p2align 4,,15
  29              		.thumb
  30              		.thumb_func
  32              	_strtok:
  33              	.LFB118:
  34              		.file 1 "/usr/src/chibiostest/os/various/shell.c"
   1:/usr/src/chibiostest/os/various/shell.c **** /*
   2:/usr/src/chibiostest/os/various/shell.c ****     ChibiOS/RT - Copyright (C) 2006,2007,2008,2009,2010,
   3:/usr/src/chibiostest/os/various/shell.c ****                  2011,2012 Giovanni Di Sirio.
   4:/usr/src/chibiostest/os/various/shell.c **** 
   5:/usr/src/chibiostest/os/various/shell.c ****     This file is part of ChibiOS/RT.
   6:/usr/src/chibiostest/os/various/shell.c **** 
   7:/usr/src/chibiostest/os/various/shell.c ****     ChibiOS/RT is free software; you can redistribute it and/or modify
   8:/usr/src/chibiostest/os/various/shell.c ****     it under the terms of the GNU General Public License as published by
   9:/usr/src/chibiostest/os/various/shell.c ****     the Free Software Foundation; either version 3 of the License, or
  10:/usr/src/chibiostest/os/various/shell.c ****     (at your option) any later version.
  11:/usr/src/chibiostest/os/various/shell.c **** 
  12:/usr/src/chibiostest/os/various/shell.c ****     ChibiOS/RT is distributed in the hope that it will be useful,
  13:/usr/src/chibiostest/os/various/shell.c ****     but WITHOUT ANY WARRANTY; without even the implied warranty of
  14:/usr/src/chibiostest/os/various/shell.c ****     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  15:/usr/src/chibiostest/os/various/shell.c ****     GNU General Public License for more details.
  16:/usr/src/chibiostest/os/various/shell.c **** 
  17:/usr/src/chibiostest/os/various/shell.c ****     You should have received a copy of the GNU General Public License
  18:/usr/src/chibiostest/os/various/shell.c ****     along with this program.  If not, see <http://www.gnu.org/licenses/>.
  19:/usr/src/chibiostest/os/various/shell.c **** */
  20:/usr/src/chibiostest/os/various/shell.c **** 
  21:/usr/src/chibiostest/os/various/shell.c **** /**
  22:/usr/src/chibiostest/os/various/shell.c ****  * @file    shell.c
  23:/usr/src/chibiostest/os/various/shell.c ****  * @brief   Simple CLI shell code.
  24:/usr/src/chibiostest/os/various/shell.c ****  *
  25:/usr/src/chibiostest/os/various/shell.c ****  * @addtogroup SHELL
  26:/usr/src/chibiostest/os/various/shell.c ****  * @{
  27:/usr/src/chibiostest/os/various/shell.c ****  */
  28:/usr/src/chibiostest/os/various/shell.c **** 
  29:/usr/src/chibiostest/os/various/shell.c **** #include <string.h>
  30:/usr/src/chibiostest/os/various/shell.c **** 
  31:/usr/src/chibiostest/os/various/shell.c **** #include "ch.h"
  32:/usr/src/chibiostest/os/various/shell.c **** #include "hal.h"
  33:/usr/src/chibiostest/os/various/shell.c **** #include "shell.h"
  34:/usr/src/chibiostest/os/various/shell.c **** #include "chprintf.h"
  35:/usr/src/chibiostest/os/various/shell.c **** 
  36:/usr/src/chibiostest/os/various/shell.c **** /**
  37:/usr/src/chibiostest/os/various/shell.c ****  * @brief   Shell termination event source.
  38:/usr/src/chibiostest/os/various/shell.c ****  */
  39:/usr/src/chibiostest/os/various/shell.c **** EventSource shell_terminated;
  40:/usr/src/chibiostest/os/various/shell.c **** 
  41:/usr/src/chibiostest/os/various/shell.c **** static char *_strtok(char *str, const char *delim, char **saveptr) {
  35              		.loc 1 41 0
  36              		.cfi_startproc
  37              		@ args = 0, pretend = 0, frame = 24
  38              		@ frame_needed = 0, uses_anonymous_args = 0
  39 0000 00B5     		push	{lr}
  40              		.cfi_def_cfa_offset 4
  41              		.cfi_offset 14, -4
  42 0002 87B0     		sub	sp, sp, #28
  43              		.cfi_def_cfa_offset 32
  44 0004 0390     		str	r0, [sp, #12]
  45 0006 0291     		str	r1, [sp, #8]
  46 0008 0192     		str	r2, [sp, #4]
  42:/usr/src/chibiostest/os/various/shell.c ****   char *token;
  43:/usr/src/chibiostest/os/various/shell.c ****   if (str)
  47              		.loc 1 43 0
  48 000a 039B     		ldr	r3, [sp, #12]
  49 000c 002B     		cmp	r3, #0
  50 000e 02D0     		beq	.L2
  44:/usr/src/chibiostest/os/various/shell.c ****     *saveptr = str;
  51              		.loc 1 44 0
  52 0010 019B     		ldr	r3, [sp, #4]
  53 0012 039A     		ldr	r2, [sp, #12]
  54 0014 1A60     		str	r2, [r3]
  55              	.L2:
  45:/usr/src/chibiostest/os/various/shell.c ****   token = *saveptr;
  56              		.loc 1 45 0
  57 0016 019B     		ldr	r3, [sp, #4]
  58 0018 1B68     		ldr	r3, [r3]
  59 001a 0593     		str	r3, [sp, #20]
  46:/usr/src/chibiostest/os/various/shell.c **** 
  47:/usr/src/chibiostest/os/various/shell.c ****   if (!token)
  60              		.loc 1 47 0
  61 001c 059B     		ldr	r3, [sp, #20]
  62 001e 002B     		cmp	r3, #0
  63 0020 01D1     		bne	.L3
  48:/usr/src/chibiostest/os/various/shell.c ****     return NULL;
  64              		.loc 1 48 0
  65 0022 0023     		movs	r3, #0
  66 0024 20E0     		b	.L4
  67              	.L3:
  49:/usr/src/chibiostest/os/various/shell.c **** 
  50:/usr/src/chibiostest/os/various/shell.c ****   token += strspn(token, delim);
  68              		.loc 1 50 0
  69 0026 0598     		ldr	r0, [sp, #20]
  70 0028 0299     		ldr	r1, [sp, #8]
  71 002a FFF7FEFF 		bl	strspn
  72 002e 0346     		mov	r3, r0
  73 0030 059A     		ldr	r2, [sp, #20]
  74 0032 1344     		add	r3, r3, r2
  75 0034 0593     		str	r3, [sp, #20]
  51:/usr/src/chibiostest/os/various/shell.c ****   *saveptr = strpbrk(token, delim);
  76              		.loc 1 51 0
  77 0036 0598     		ldr	r0, [sp, #20]
  78 0038 0299     		ldr	r1, [sp, #8]
  79 003a FFF7FEFF 		bl	strpbrk
  80 003e 0246     		mov	r2, r0
  81 0040 019B     		ldr	r3, [sp, #4]
  82 0042 1A60     		str	r2, [r3]
  52:/usr/src/chibiostest/os/various/shell.c ****   if (*saveptr)
  83              		.loc 1 52 0
  84 0044 019B     		ldr	r3, [sp, #4]
  85 0046 1B68     		ldr	r3, [r3]
  86 0048 002B     		cmp	r3, #0
  87 004a 06D0     		beq	.L5
  53:/usr/src/chibiostest/os/various/shell.c ****     *(*saveptr)++ = '\0';
  88              		.loc 1 53 0
  89 004c 019B     		ldr	r3, [sp, #4]
  90 004e 1B68     		ldr	r3, [r3]
  91 0050 591C     		adds	r1, r3, #1
  92 0052 019A     		ldr	r2, [sp, #4]
  93 0054 1160     		str	r1, [r2]
  94 0056 0022     		movs	r2, #0
  95 0058 1A70     		strb	r2, [r3]
  96              	.L5:
  54:/usr/src/chibiostest/os/various/shell.c **** 
  55:/usr/src/chibiostest/os/various/shell.c ****   return *token ? token : NULL;
  97              		.loc 1 55 0
  98 005a 059B     		ldr	r3, [sp, #20]
  99 005c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 100 005e 002B     		cmp	r3, #0
 101 0060 01D0     		beq	.L6
 102              		.loc 1 55 0 is_stmt 0 discriminator 1
 103 0062 059B     		ldr	r3, [sp, #20]
 104 0064 00E0     		b	.L7
 105              	.L6:
 106              		.loc 1 55 0 discriminator 2
 107 0066 0023     		movs	r3, #0
 108              	.L7:
 109              	.L4:
  56:/usr/src/chibiostest/os/various/shell.c **** }
 110              		.loc 1 56 0 is_stmt 1
 111 0068 1846     		mov	r0, r3
 112 006a 07B0     		add	sp, sp, #28
 113              		@ sp needed
 114 006c 5DF804FB 		ldr	pc, [sp], #4
 115              		.cfi_endproc
 116              	.LFE118:
 118              		.section	.rodata
 119              		.align	2
 120              	.LC0:
 121 0000 55736167 		.ascii	"Usage: %s\015\012\000"
 121      653A2025 
 121      730D0A00 
 122              		.section	.text.usage,"ax",%progbits
 123              		.align	2
 124              		.p2align 4,,15
 125              		.thumb
 126              		.thumb_func
 128              	usage:
 129              	.LFB119:
  57:/usr/src/chibiostest/os/various/shell.c **** 
  58:/usr/src/chibiostest/os/various/shell.c **** static void usage(BaseSequentialStream *chp, char *p) {
 130              		.loc 1 58 0
 131              		.cfi_startproc
 132              		@ args = 0, pretend = 0, frame = 8
 133              		@ frame_needed = 0, uses_anonymous_args = 0
 134 0000 00B5     		push	{lr}
 135              		.cfi_def_cfa_offset 4
 136              		.cfi_offset 14, -4
 137 0002 83B0     		sub	sp, sp, #12
 138              		.cfi_def_cfa_offset 16
 139 0004 0190     		str	r0, [sp, #4]
 140 0006 0091     		str	r1, [sp]
  59:/usr/src/chibiostest/os/various/shell.c **** 
  60:/usr/src/chibiostest/os/various/shell.c ****   chprintf(chp, "Usage: %s\r\n", p);
 141              		.loc 1 60 0
 142 0008 0198     		ldr	r0, [sp, #4]
 143 000a 0349     		ldr	r1, .L9
 144 000c 009A     		ldr	r2, [sp]
 145 000e FFF7FEFF 		bl	chprintf
  61:/usr/src/chibiostest/os/various/shell.c **** }
 146              		.loc 1 61 0
 147 0012 03B0     		add	sp, sp, #12
 148              		@ sp needed
 149 0014 5DF804FB 		ldr	pc, [sp], #4
 150              	.L10:
 151              		.align	2
 152              	.L9:
 153 0018 00000000 		.word	.LC0
 154              		.cfi_endproc
 155              	.LFE119:
 157 001c AFF30080 		.section	.rodata
 158              		.align	2
 159              	.LC1:
 160 000c 25732000 		.ascii	"%s \000"
 161              		.section	.text.list_commands,"ax",%progbits
 162              		.align	2
 163              		.p2align 4,,15
 164              		.thumb
 165              		.thumb_func
 167              	list_commands:
 168              	.LFB120:
  62:/usr/src/chibiostest/os/various/shell.c **** 
  63:/usr/src/chibiostest/os/various/shell.c **** static void list_commands(BaseSequentialStream *chp, const ShellCommand *scp) {
 169              		.loc 1 63 0
 170              		.cfi_startproc
 171              		@ args = 0, pretend = 0, frame = 8
 172              		@ frame_needed = 0, uses_anonymous_args = 0
 173 0000 00B5     		push	{lr}
 174              		.cfi_def_cfa_offset 4
 175              		.cfi_offset 14, -4
 176 0002 83B0     		sub	sp, sp, #12
 177              		.cfi_def_cfa_offset 16
 178 0004 0190     		str	r0, [sp, #4]
 179 0006 0091     		str	r1, [sp]
  64:/usr/src/chibiostest/os/various/shell.c **** 
  65:/usr/src/chibiostest/os/various/shell.c ****   while (scp->sc_name != NULL) {
 180              		.loc 1 65 0
 181 0008 09E0     		b	.L12
 182              	.L13:
  66:/usr/src/chibiostest/os/various/shell.c ****     chprintf(chp, "%s ", scp->sc_name);
 183              		.loc 1 66 0
 184 000a 009B     		ldr	r3, [sp]
 185 000c 1B68     		ldr	r3, [r3]
 186 000e 0198     		ldr	r0, [sp, #4]
 187 0010 0649     		ldr	r1, .L14
 188 0012 1A46     		mov	r2, r3
 189 0014 FFF7FEFF 		bl	chprintf
  67:/usr/src/chibiostest/os/various/shell.c ****     scp++;
 190              		.loc 1 67 0
 191 0018 009B     		ldr	r3, [sp]
 192 001a 0833     		adds	r3, r3, #8
 193 001c 0093     		str	r3, [sp]
 194              	.L12:
  65:/usr/src/chibiostest/os/various/shell.c ****     chprintf(chp, "%s ", scp->sc_name);
 195              		.loc 1 65 0 discriminator 1
 196 001e 009B     		ldr	r3, [sp]
 197 0020 1B68     		ldr	r3, [r3]
 198 0022 002B     		cmp	r3, #0
 199 0024 F1D1     		bne	.L13
  68:/usr/src/chibiostest/os/various/shell.c ****   }
  69:/usr/src/chibiostest/os/various/shell.c **** }
 200              		.loc 1 69 0
 201 0026 03B0     		add	sp, sp, #12
 202              		@ sp needed
 203 0028 5DF804FB 		ldr	pc, [sp], #4
 204              	.L15:
 205              		.align	2
 206              	.L14:
 207 002c 0C000000 		.word	.LC1
 208              		.cfi_endproc
 209              	.LFE120:
 211              		.section	.rodata
 212              		.align	2
 213              	.LC2:
 214 0010 696E666F 		.ascii	"info\000"
 214      00
 215 0015 000000   		.align	2
 216              	.LC3:
 217 0018 4B65726E 		.ascii	"Kernel:       %s\015\012\000"
 217      656C3A20 
 217      20202020 
 217      20202573 
 217      0D0A00
 218 002b 00       		.align	2
 219              	.LC4:
 220 002c 322E352E 		.ascii	"2.5.1unstable\000"
 220      31756E73 
 220      7461626C 
 220      6500
 221 003a 0000     		.align	2
 222              	.LC5:
 223 003c 436F6D70 		.ascii	"Compiler:     %s\015\012\000"
 223      696C6572 
 223      3A202020 
 223      20202573 
 223      0D0A00
 224 004f 00       		.align	2
 225              	.LC6:
 226 0050 47434320 		.ascii	"GCC 4.8.3 20140820 (release)\000"
 226      342E382E 
 226      33203230 
 226      31343038 
 226      32302028 
 227 006d 000000   		.align	2
 228              	.LC7:
 229 0070 41726368 		.ascii	"Architecture: %s\015\012\000"
 229      69746563 
 229      74757265 
 229      3A202573 
 229      0D0A00
 230 0083 00       		.align	2
 231              	.LC8:
 232 0084 41524D76 		.ascii	"ARMv7-ME\000"
 232      372D4D45 
 232      00
 233 008d 000000   		.align	2
 234              	.LC9:
 235 0090 436F7265 		.ascii	"Core Variant: %s\015\012\000"
 235      20566172 
 235      69616E74 
 235      3A202573 
 235      0D0A00
 236 00a3 00       		.align	2
 237              	.LC10:
 238 00a4 436F7274 		.ascii	"Cortex-M4F\000"
 238      65782D4D 
 238      344600
 239 00af 00       		.align	2
 240              	.LC11:
 241 00b0 506F7274 		.ascii	"Port Info:    %s\015\012\000"
 241      20496E66 
 241      6F3A2020 
 241      20202573 
 241      0D0A00
 242 00c3 00       		.align	2
 243              	.LC12:
 244 00c4 41647661 		.ascii	"Advanced kernel mode\000"
 244      6E636564 
 244      206B6572 
 244      6E656C20 
 244      6D6F6465 
 245 00d9 000000   		.align	2
 246              	.LC13:
 247 00dc 506C6174 		.ascii	"Platform:     %s\015\012\000"
 247      666F726D 
 247      3A202020 
 247      20202573 
 247      0D0A00
 248 00ef 00       		.align	2
 249              	.LC14:
 250 00f0 53544D33 		.ascii	"STM32F4xx High Performance\000"
 250      32463478 
 250      78204869 
 250      67682050 
 250      6572666F 
 251 010b 00       		.align	2
 252              	.LC15:
 253 010c 426F6172 		.ascii	"Board:        %s\015\012\000"
 253      643A2020 
 253      20202020 
 253      20202573 
 253      0D0A00
 254 011f 00       		.align	2
 255              	.LC16:
 256 0120 53544D69 		.ascii	"STMicroelectronics STM32F4-Discovery\000"
 256      63726F65 
 256      6C656374 
 256      726F6E69 
 256      63732053 
 257 0145 000000   		.align	2
 258              	.LC17:
 259 0148 4275696C 		.ascii	"Build time:   %s%s%s\015\012\000"
 259      64207469 
 259      6D653A20 
 259      20202573 
 259      25732573 
 260 015f 00       		.align	2
 261              	.LC18:
 262 0160 4A616E20 		.ascii	"Jan 13 2015\000"
 262      31332032 
 262      30313500 
 263              		.align	2
 264              	.LC19:
 265 016c 202D2000 		.ascii	" - \000"
 266              		.align	2
 267              	.LC20:
 268 0170 32333A32 		.ascii	"23:22:52\000"
 268      323A3532 
 268      00
 269              		.section	.text.cmd_info,"ax",%progbits
 270              		.align	2
 271              		.p2align 4,,15
 272              		.thumb
 273              		.thumb_func
 275              	cmd_info:
 276              	.LFB121:
  70:/usr/src/chibiostest/os/various/shell.c **** 
  71:/usr/src/chibiostest/os/various/shell.c **** static void cmd_info(BaseSequentialStream *chp, int argc, char *argv[]) {
 277              		.loc 1 71 0
 278              		.cfi_startproc
 279              		@ args = 0, pretend = 0, frame = 16
 280              		@ frame_needed = 0, uses_anonymous_args = 0
 281 0000 00B5     		push	{lr}
 282              		.cfi_def_cfa_offset 4
 283              		.cfi_offset 14, -4
 284 0002 87B0     		sub	sp, sp, #28
 285              		.cfi_def_cfa_offset 32
 286 0004 0590     		str	r0, [sp, #20]
 287 0006 0491     		str	r1, [sp, #16]
 288 0008 0392     		str	r2, [sp, #12]
  72:/usr/src/chibiostest/os/various/shell.c **** 
  73:/usr/src/chibiostest/os/various/shell.c ****   (void)argv;
  74:/usr/src/chibiostest/os/various/shell.c ****   if (argc > 0) {
 289              		.loc 1 74 0
 290 000a 049B     		ldr	r3, [sp, #16]
 291 000c 002B     		cmp	r3, #0
 292 000e 04DD     		ble	.L17
  75:/usr/src/chibiostest/os/various/shell.c ****     usage(chp, "info");
 293              		.loc 1 75 0
 294 0010 0598     		ldr	r0, [sp, #20]
 295 0012 1949     		ldr	r1, .L19
 296 0014 FFF7FEFF 		bl	usage
  76:/usr/src/chibiostest/os/various/shell.c ****     return;
 297              		.loc 1 76 0
 298 0018 2AE0     		b	.L16
 299              	.L17:
  77:/usr/src/chibiostest/os/various/shell.c ****   }
  78:/usr/src/chibiostest/os/various/shell.c **** 
  79:/usr/src/chibiostest/os/various/shell.c ****   chprintf(chp, "Kernel:       %s\r\n", CH_KERNEL_VERSION);
 300              		.loc 1 79 0
 301 001a 0598     		ldr	r0, [sp, #20]
 302 001c 1749     		ldr	r1, .L19+4
 303 001e 184A     		ldr	r2, .L19+8
 304 0020 FFF7FEFF 		bl	chprintf
  80:/usr/src/chibiostest/os/various/shell.c **** #ifdef CH_COMPILER_NAME
  81:/usr/src/chibiostest/os/various/shell.c ****   chprintf(chp, "Compiler:     %s\r\n", CH_COMPILER_NAME);
 305              		.loc 1 81 0
 306 0024 0598     		ldr	r0, [sp, #20]
 307 0026 1749     		ldr	r1, .L19+12
 308 0028 174A     		ldr	r2, .L19+16
 309 002a FFF7FEFF 		bl	chprintf
  82:/usr/src/chibiostest/os/various/shell.c **** #endif
  83:/usr/src/chibiostest/os/various/shell.c ****   chprintf(chp, "Architecture: %s\r\n", CH_ARCHITECTURE_NAME);
 310              		.loc 1 83 0
 311 002e 0598     		ldr	r0, [sp, #20]
 312 0030 1649     		ldr	r1, .L19+20
 313 0032 174A     		ldr	r2, .L19+24
 314 0034 FFF7FEFF 		bl	chprintf
  84:/usr/src/chibiostest/os/various/shell.c **** #ifdef CH_CORE_VARIANT_NAME
  85:/usr/src/chibiostest/os/various/shell.c ****   chprintf(chp, "Core Variant: %s\r\n", CH_CORE_VARIANT_NAME);
 315              		.loc 1 85 0
 316 0038 0598     		ldr	r0, [sp, #20]
 317 003a 1649     		ldr	r1, .L19+28
 318 003c 164A     		ldr	r2, .L19+32
 319 003e FFF7FEFF 		bl	chprintf
  86:/usr/src/chibiostest/os/various/shell.c **** #endif
  87:/usr/src/chibiostest/os/various/shell.c **** #ifdef CH_PORT_INFO
  88:/usr/src/chibiostest/os/various/shell.c ****   chprintf(chp, "Port Info:    %s\r\n", CH_PORT_INFO);
 320              		.loc 1 88 0
 321 0042 0598     		ldr	r0, [sp, #20]
 322 0044 1549     		ldr	r1, .L19+36
 323 0046 164A     		ldr	r2, .L19+40
 324 0048 FFF7FEFF 		bl	chprintf
  89:/usr/src/chibiostest/os/various/shell.c **** #endif
  90:/usr/src/chibiostest/os/various/shell.c **** #ifdef PLATFORM_NAME
  91:/usr/src/chibiostest/os/various/shell.c ****   chprintf(chp, "Platform:     %s\r\n", PLATFORM_NAME);
 325              		.loc 1 91 0
 326 004c 0598     		ldr	r0, [sp, #20]
 327 004e 1549     		ldr	r1, .L19+44
 328 0050 154A     		ldr	r2, .L19+48
 329 0052 FFF7FEFF 		bl	chprintf
  92:/usr/src/chibiostest/os/various/shell.c **** #endif
  93:/usr/src/chibiostest/os/various/shell.c **** #ifdef BOARD_NAME
  94:/usr/src/chibiostest/os/various/shell.c ****   chprintf(chp, "Board:        %s\r\n", BOARD_NAME);
 330              		.loc 1 94 0
 331 0056 0598     		ldr	r0, [sp, #20]
 332 0058 1449     		ldr	r1, .L19+52
 333 005a 154A     		ldr	r2, .L19+56
 334 005c FFF7FEFF 		bl	chprintf
  95:/usr/src/chibiostest/os/various/shell.c **** #endif
  96:/usr/src/chibiostest/os/various/shell.c **** #ifdef __DATE__
  97:/usr/src/chibiostest/os/various/shell.c **** #ifdef __TIME__
  98:/usr/src/chibiostest/os/various/shell.c ****   chprintf(chp, "Build time:   %s%s%s\r\n", __DATE__, " - ", __TIME__);
 335              		.loc 1 98 0
 336 0060 144B     		ldr	r3, .L19+60
 337 0062 0093     		str	r3, [sp]
 338 0064 0598     		ldr	r0, [sp, #20]
 339 0066 1449     		ldr	r1, .L19+64
 340 0068 144A     		ldr	r2, .L19+68
 341 006a 154B     		ldr	r3, .L19+72
 342 006c FFF7FEFF 		bl	chprintf
 343              	.L16:
  99:/usr/src/chibiostest/os/various/shell.c **** #endif
 100:/usr/src/chibiostest/os/various/shell.c **** #endif
 101:/usr/src/chibiostest/os/various/shell.c **** }
 344              		.loc 1 101 0
 345 0070 07B0     		add	sp, sp, #28
 346              		@ sp needed
 347 0072 5DF804FB 		ldr	pc, [sp], #4
 348              	.L20:
 349 0076 00BF     		.align	2
 350              	.L19:
 351 0078 10000000 		.word	.LC2
 352 007c 18000000 		.word	.LC3
 353 0080 2C000000 		.word	.LC4
 354 0084 3C000000 		.word	.LC5
 355 0088 50000000 		.word	.LC6
 356 008c 70000000 		.word	.LC7
 357 0090 84000000 		.word	.LC8
 358 0094 90000000 		.word	.LC9
 359 0098 A4000000 		.word	.LC10
 360 009c B0000000 		.word	.LC11
 361 00a0 C4000000 		.word	.LC12
 362 00a4 DC000000 		.word	.LC13
 363 00a8 F0000000 		.word	.LC14
 364 00ac 0C010000 		.word	.LC15
 365 00b0 20010000 		.word	.LC16
 366 00b4 70010000 		.word	.LC20
 367 00b8 48010000 		.word	.LC17
 368 00bc 60010000 		.word	.LC18
 369 00c0 6C010000 		.word	.LC19
 370              		.cfi_endproc
 371              	.LFE121:
 373 00c4 AFF30080 		.section	.rodata
 373      AFF30080 
 373      AFF30080 
 374 0179 000000   		.align	2
 375              	.LC21:
 376 017c 73797374 		.ascii	"systime\000"
 376      696D6500 
 377              		.align	2
 378              	.LC22:
 379 0184 256C750D 		.ascii	"%lu\015\012\000"
 379      0A00
 380              		.section	.text.cmd_systime,"ax",%progbits
 381              		.align	2
 382              		.p2align 4,,15
 383              		.thumb
 384              		.thumb_func
 386              	cmd_systime:
 387              	.LFB122:
 102:/usr/src/chibiostest/os/various/shell.c **** 
 103:/usr/src/chibiostest/os/various/shell.c **** static void cmd_systime(BaseSequentialStream *chp, int argc, char *argv[]) {
 388              		.loc 1 103 0
 389              		.cfi_startproc
 390              		@ args = 0, pretend = 0, frame = 16
 391              		@ frame_needed = 0, uses_anonymous_args = 0
 392 0000 00B5     		push	{lr}
 393              		.cfi_def_cfa_offset 4
 394              		.cfi_offset 14, -4
 395 0002 85B0     		sub	sp, sp, #20
 396              		.cfi_def_cfa_offset 24
 397 0004 0390     		str	r0, [sp, #12]
 398 0006 0291     		str	r1, [sp, #8]
 399 0008 0192     		str	r2, [sp, #4]
 104:/usr/src/chibiostest/os/various/shell.c **** 
 105:/usr/src/chibiostest/os/various/shell.c ****   (void)argv;
 106:/usr/src/chibiostest/os/various/shell.c ****   if (argc > 0) {
 400              		.loc 1 106 0
 401 000a 029B     		ldr	r3, [sp, #8]
 402 000c 002B     		cmp	r3, #0
 403 000e 04DD     		ble	.L22
 107:/usr/src/chibiostest/os/various/shell.c ****     usage(chp, "systime");
 404              		.loc 1 107 0
 405 0010 0398     		ldr	r0, [sp, #12]
 406 0012 0749     		ldr	r1, .L24
 407 0014 FFF7FEFF 		bl	usage
 108:/usr/src/chibiostest/os/various/shell.c ****     return;
 408              		.loc 1 108 0
 409 0018 06E0     		b	.L21
 410              	.L22:
 109:/usr/src/chibiostest/os/various/shell.c ****   }
 110:/usr/src/chibiostest/os/various/shell.c ****   chprintf(chp, "%lu\r\n", (unsigned long)chTimeNow());
 411              		.loc 1 110 0
 412 001a 064B     		ldr	r3, .L24+4
 413 001c DB68     		ldr	r3, [r3, #12]
 414 001e 0398     		ldr	r0, [sp, #12]
 415 0020 0549     		ldr	r1, .L24+8
 416 0022 1A46     		mov	r2, r3
 417 0024 FFF7FEFF 		bl	chprintf
 418              	.L21:
 111:/usr/src/chibiostest/os/various/shell.c **** }
 419              		.loc 1 111 0
 420 0028 05B0     		add	sp, sp, #20
 421              		@ sp needed
 422 002a 5DF804FB 		ldr	pc, [sp], #4
 423              	.L25:
 424 002e 00BF     		.align	2
 425              	.L24:
 426 0030 7C010000 		.word	.LC21
 427 0034 00000000 		.word	vtlist
 428 0038 84010000 		.word	.LC22
 429              		.cfi_endproc
 430              	.LFE122:
 432 003c AFF30080 		.section	.data.local_commands,"aw",%progbits
 433              		.align	2
 436              	local_commands:
 437 0000 10000000 		.word	.LC2
 438 0004 00000000 		.word	cmd_info
 439 0008 7C010000 		.word	.LC21
 440 000c 00000000 		.word	cmd_systime
 441 0010 00000000 		.word	0
 442 0014 00000000 		.word	0
 443              		.section	.text.cmdexec,"ax",%progbits
 444              		.align	2
 445              		.p2align 4,,15
 446              		.thumb
 447              		.thumb_func
 449              	cmdexec:
 450              	.LFB123:
 112:/usr/src/chibiostest/os/various/shell.c **** 
 113:/usr/src/chibiostest/os/various/shell.c **** /**
 114:/usr/src/chibiostest/os/various/shell.c ****  * @brief   Array of the default commands.
 115:/usr/src/chibiostest/os/various/shell.c ****  */
 116:/usr/src/chibiostest/os/various/shell.c **** static ShellCommand local_commands[] = {
 117:/usr/src/chibiostest/os/various/shell.c ****   {"info", cmd_info},
 118:/usr/src/chibiostest/os/various/shell.c ****   {"systime", cmd_systime},
 119:/usr/src/chibiostest/os/various/shell.c ****   {NULL, NULL}
 120:/usr/src/chibiostest/os/various/shell.c **** };
 121:/usr/src/chibiostest/os/various/shell.c **** 
 122:/usr/src/chibiostest/os/various/shell.c **** static bool_t cmdexec(const ShellCommand *scp, BaseSequentialStream *chp,
 123:/usr/src/chibiostest/os/various/shell.c ****                       char *name, int argc, char *argv[]) {
 451              		.loc 1 123 0
 452              		.cfi_startproc
 453              		@ args = 4, pretend = 0, frame = 16
 454              		@ frame_needed = 0, uses_anonymous_args = 0
 455 0000 00B5     		push	{lr}
 456              		.cfi_def_cfa_offset 4
 457              		.cfi_offset 14, -4
 458 0002 85B0     		sub	sp, sp, #20
 459              		.cfi_def_cfa_offset 24
 460 0004 0390     		str	r0, [sp, #12]
 461 0006 0291     		str	r1, [sp, #8]
 462 0008 0192     		str	r2, [sp, #4]
 463 000a 0093     		str	r3, [sp]
 124:/usr/src/chibiostest/os/various/shell.c **** 
 125:/usr/src/chibiostest/os/various/shell.c ****   while (scp->sc_name != NULL) {
 464              		.loc 1 125 0
 465 000c 13E0     		b	.L27
 466              	.L30:
 126:/usr/src/chibiostest/os/various/shell.c ****     if (strcasecmp(scp->sc_name, name) == 0) {
 467              		.loc 1 126 0
 468 000e 039B     		ldr	r3, [sp, #12]
 469 0010 1B68     		ldr	r3, [r3]
 470 0012 1846     		mov	r0, r3
 471 0014 0199     		ldr	r1, [sp, #4]
 472 0016 FFF7FEFF 		bl	strcasecmp
 473 001a 0346     		mov	r3, r0
 474 001c 002B     		cmp	r3, #0
 475 001e 07D1     		bne	.L28
 127:/usr/src/chibiostest/os/various/shell.c ****       scp->sc_function(chp, argc, argv);
 476              		.loc 1 127 0
 477 0020 039B     		ldr	r3, [sp, #12]
 478 0022 5B68     		ldr	r3, [r3, #4]
 479 0024 0298     		ldr	r0, [sp, #8]
 480 0026 0099     		ldr	r1, [sp]
 481 0028 069A     		ldr	r2, [sp, #24]
 482 002a 9847     		blx	r3
 128:/usr/src/chibiostest/os/various/shell.c ****       return FALSE;
 483              		.loc 1 128 0
 484 002c 0023     		movs	r3, #0
 485 002e 07E0     		b	.L29
 486              	.L28:
 129:/usr/src/chibiostest/os/various/shell.c ****     }
 130:/usr/src/chibiostest/os/various/shell.c ****     scp++;
 487              		.loc 1 130 0
 488 0030 039B     		ldr	r3, [sp, #12]
 489 0032 0833     		adds	r3, r3, #8
 490 0034 0393     		str	r3, [sp, #12]
 491              	.L27:
 125:/usr/src/chibiostest/os/various/shell.c ****     if (strcasecmp(scp->sc_name, name) == 0) {
 492              		.loc 1 125 0 discriminator 1
 493 0036 039B     		ldr	r3, [sp, #12]
 494 0038 1B68     		ldr	r3, [r3]
 495 003a 002B     		cmp	r3, #0
 496 003c E7D1     		bne	.L30
 131:/usr/src/chibiostest/os/various/shell.c ****   }
 132:/usr/src/chibiostest/os/various/shell.c ****   return TRUE;
 497              		.loc 1 132 0
 498 003e 0123     		movs	r3, #1
 499              	.L29:
 133:/usr/src/chibiostest/os/various/shell.c **** }
 500              		.loc 1 133 0
 501 0040 1846     		mov	r0, r3
 502 0042 05B0     		add	sp, sp, #20
 503              		@ sp needed
 504 0044 5DF804FB 		ldr	pc, [sp], #4
 505              		.cfi_endproc
 506              	.LFE123:
 508 0048 AFF30080 		.section	.rodata
 508      AFF30080 
 509 018a 0000     		.align	2
 510              	.LC23:
 511 018c 7368656C 		.ascii	"shell\000"
 511      6C00
 512 0192 0000     		.align	2
 513              	.LC24:
 514 0194 0D0A4368 		.ascii	"\015\012ChibiOS/RT Shell\015\012\000"
 514      6962694F 
 514      532F5254 
 514      20536865 
 514      6C6C0D0A 
 515 01a9 000000   		.align	2
 516              	.LC25:
 517 01ac 63683E20 		.ascii	"ch> \000"
 517      00
 518 01b1 000000   		.align	2
 519              	.LC26:
 520 01b4 0D0A6C6F 		.ascii	"\015\012logout\000"
 520      676F7574 
 520      00
 521 01bd 000000   		.align	2
 522              	.LC27:
 523 01c0 20003900 		.ascii	" \0009\000"
 524              		.align	2
 525              	.LC28:
 526 01c4 746F6F20 		.ascii	"too many arguments\015\012\000"
 526      6D616E79 
 526      20617267 
 526      756D656E 
 526      74730D0A 
 527 01d9 000000   		.align	2
 528              	.LC29:
 529 01dc 65786974 		.ascii	"exit\000"
 529      00
 530 01e1 000000   		.align	2
 531              	.LC30:
 532 01e4 68656C70 		.ascii	"help\000"
 532      00
 533 01e9 000000   		.align	2
 534              	.LC31:
 535 01ec 436F6D6D 		.ascii	"Commands: help exit \000"
 535      616E6473 
 535      3A206865 
 535      6C702065 
 535      78697420 
 536 0201 000000   		.align	2
 537              	.LC32:
 538 0204 0D0A00   		.ascii	"\015\012\000"
 539 0207 00       		.align	2
 540              	.LC33:
 541 0208 257300   		.ascii	"%s\000"
 542 020b 00       		.align	2
 543              	.LC34:
 544 020c 203F0D0A 		.ascii	" ?\015\012\000"
 544      00
 545              		.section	.text.shell_thread,"ax",%progbits
 546              		.align	2
 547              		.p2align 4,,15
 548              		.thumb
 549              		.thumb_func
 551              	shell_thread:
 552              	.LFB124:
 134:/usr/src/chibiostest/os/various/shell.c **** 
 135:/usr/src/chibiostest/os/various/shell.c **** /**
 136:/usr/src/chibiostest/os/various/shell.c ****  * @brief   Shell thread function.
 137:/usr/src/chibiostest/os/various/shell.c ****  *
 138:/usr/src/chibiostest/os/various/shell.c ****  * @param[in] p         pointer to a @p BaseSequentialStream object
 139:/usr/src/chibiostest/os/various/shell.c ****  * @return              Termination reason.
 140:/usr/src/chibiostest/os/various/shell.c ****  * @retval RDY_OK       terminated by command.
 141:/usr/src/chibiostest/os/various/shell.c ****  * @retval RDY_RESET    terminated by reset condition on the I/O channel.
 142:/usr/src/chibiostest/os/various/shell.c ****  */
 143:/usr/src/chibiostest/os/various/shell.c **** static msg_t shell_thread(void *p) {
 553              		.loc 1 143 0
 554              		.cfi_startproc
 555              		@ args = 0, pretend = 0, frame = 120
 556              		@ frame_needed = 0, uses_anonymous_args = 0
 557 0000 00B5     		push	{lr}
 558              		.cfi_def_cfa_offset 4
 559              		.cfi_offset 14, -4
 560 0002 A1B0     		sub	sp, sp, #132
 561              		.cfi_def_cfa_offset 136
 562 0004 0390     		str	r0, [sp, #12]
 144:/usr/src/chibiostest/os/various/shell.c ****   int n;
 145:/usr/src/chibiostest/os/various/shell.c ****   msg_t msg = RDY_OK;
 563              		.loc 1 145 0
 564 0006 0023     		movs	r3, #0
 565 0008 1D93     		str	r3, [sp, #116]
 146:/usr/src/chibiostest/os/various/shell.c ****   BaseSequentialStream *chp = ((ShellConfig *)p)->sc_channel;
 566              		.loc 1 146 0
 567 000a 039B     		ldr	r3, [sp, #12]
 568 000c 1B68     		ldr	r3, [r3]
 569 000e 1C93     		str	r3, [sp, #112]
 147:/usr/src/chibiostest/os/various/shell.c ****   const ShellCommand *scp = ((ShellConfig *)p)->sc_commands;
 570              		.loc 1 147 0
 571 0010 039B     		ldr	r3, [sp, #12]
 572 0012 5B68     		ldr	r3, [r3, #4]
 573 0014 1B93     		str	r3, [sp, #108]
 148:/usr/src/chibiostest/os/various/shell.c ****   char *lp, *cmd, *tokp, line[SHELL_MAX_LINE_LENGTH];
 149:/usr/src/chibiostest/os/various/shell.c ****   char *args[SHELL_MAX_ARGUMENTS + 1];
 150:/usr/src/chibiostest/os/various/shell.c **** 
 151:/usr/src/chibiostest/os/various/shell.c ****   chRegSetThreadName("shell");
 574              		.loc 1 151 0
 575 0016 5B4B     		ldr	r3, .L47
 576 0018 9B69     		ldr	r3, [r3, #24]
 577 001a 5B4A     		ldr	r2, .L47+4
 578 001c 9A61     		str	r2, [r3, #24]
 152:/usr/src/chibiostest/os/various/shell.c ****   chprintf(chp, "\r\nChibiOS/RT Shell\r\n");
 579              		.loc 1 152 0
 580 001e 1C98     		ldr	r0, [sp, #112]
 581 0020 5A49     		ldr	r1, .L47+8
 582 0022 FFF7FEFF 		bl	chprintf
 583              	.L45:
 153:/usr/src/chibiostest/os/various/shell.c ****   while (TRUE) {
 154:/usr/src/chibiostest/os/various/shell.c ****     chprintf(chp, "ch> ");
 584              		.loc 1 154 0
 585 0026 1C98     		ldr	r0, [sp, #112]
 586 0028 5949     		ldr	r1, .L47+12
 587 002a FFF7FEFF 		bl	chprintf
 155:/usr/src/chibiostest/os/various/shell.c ****     if (shellGetLine(chp, line, sizeof(line))) {
 588              		.loc 1 155 0
 589 002e 09AB     		add	r3, sp, #36
 590 0030 1C98     		ldr	r0, [sp, #112]
 591 0032 1946     		mov	r1, r3
 592 0034 4022     		movs	r2, #64
 593 0036 FFF7FEFF 		bl	shellGetLine
 594 003a 0346     		mov	r3, r0
 595 003c 002B     		cmp	r3, #0
 596 003e 04D0     		beq	.L32
 156:/usr/src/chibiostest/os/various/shell.c ****       chprintf(chp, "\r\nlogout");
 597              		.loc 1 156 0
 598 0040 1C98     		ldr	r0, [sp, #112]
 599 0042 5449     		ldr	r1, .L47+16
 600 0044 FFF7FEFF 		bl	chprintf
 157:/usr/src/chibiostest/os/various/shell.c ****       break;
 601              		.loc 1 157 0
 602 0048 8AE0     		b	.L33
 603              	.L32:
 158:/usr/src/chibiostest/os/various/shell.c ****     }
 159:/usr/src/chibiostest/os/various/shell.c ****     lp = _strtok(line, " \009", &tokp);
 604              		.loc 1 159 0
 605 004a 09AA     		add	r2, sp, #36
 606 004c 19AB     		add	r3, sp, #100
 607 004e 1046     		mov	r0, r2
 608 0050 5149     		ldr	r1, .L47+20
 609 0052 1A46     		mov	r2, r3
 610 0054 FFF7FEFF 		bl	_strtok
 611 0058 1A90     		str	r0, [sp, #104]
 160:/usr/src/chibiostest/os/various/shell.c ****     cmd = lp;
 612              		.loc 1 160 0
 613 005a 1A9B     		ldr	r3, [sp, #104]
 614 005c 1E93     		str	r3, [sp, #120]
 161:/usr/src/chibiostest/os/various/shell.c ****     n = 0;
 615              		.loc 1 161 0
 616 005e 0023     		movs	r3, #0
 617 0060 1F93     		str	r3, [sp, #124]
 162:/usr/src/chibiostest/os/various/shell.c ****     while ((lp = _strtok(NULL, " \009", &tokp)) != NULL) {
 618              		.loc 1 162 0
 619 0062 12E0     		b	.L34
 620              	.L37:
 163:/usr/src/chibiostest/os/various/shell.c ****       if (n >= SHELL_MAX_ARGUMENTS) {
 621              		.loc 1 163 0
 622 0064 1F9B     		ldr	r3, [sp, #124]
 623 0066 032B     		cmp	r3, #3
 624 0068 06DD     		ble	.L35
 164:/usr/src/chibiostest/os/various/shell.c ****         chprintf(chp, "too many arguments\r\n");
 625              		.loc 1 164 0
 626 006a 1C98     		ldr	r0, [sp, #112]
 627 006c 4B49     		ldr	r1, .L47+24
 628 006e FFF7FEFF 		bl	chprintf
 165:/usr/src/chibiostest/os/various/shell.c ****         cmd = NULL;
 629              		.loc 1 165 0
 630 0072 0023     		movs	r3, #0
 631 0074 1E93     		str	r3, [sp, #120]
 166:/usr/src/chibiostest/os/various/shell.c ****         break;
 632              		.loc 1 166 0
 633 0076 12E0     		b	.L36
 634              	.L35:
 167:/usr/src/chibiostest/os/various/shell.c ****       }
 168:/usr/src/chibiostest/os/various/shell.c ****       args[n++] = lp;
 635              		.loc 1 168 0
 636 0078 1F9B     		ldr	r3, [sp, #124]
 637 007a 5A1C     		adds	r2, r3, #1
 638 007c 1F92     		str	r2, [sp, #124]
 639 007e 9B00     		lsls	r3, r3, #2
 640 0080 20AA     		add	r2, sp, #128
 641 0082 1344     		add	r3, r3, r2
 642 0084 1A9A     		ldr	r2, [sp, #104]
 643 0086 43F8702C 		str	r2, [r3, #-112]
 644              	.L34:
 162:/usr/src/chibiostest/os/various/shell.c ****       if (n >= SHELL_MAX_ARGUMENTS) {
 645              		.loc 1 162 0 discriminator 1
 646 008a 19AB     		add	r3, sp, #100
 647 008c 0020     		movs	r0, #0
 648 008e 4249     		ldr	r1, .L47+20
 649 0090 1A46     		mov	r2, r3
 650 0092 FFF7FEFF 		bl	_strtok
 651 0096 1A90     		str	r0, [sp, #104]
 652 0098 1A9B     		ldr	r3, [sp, #104]
 653 009a 002B     		cmp	r3, #0
 654 009c E2D1     		bne	.L37
 655              	.L36:
 169:/usr/src/chibiostest/os/various/shell.c ****     }
 170:/usr/src/chibiostest/os/various/shell.c ****     args[n] = NULL;
 656              		.loc 1 170 0
 657 009e 1F9B     		ldr	r3, [sp, #124]
 658 00a0 9B00     		lsls	r3, r3, #2
 659 00a2 20AA     		add	r2, sp, #128
 660 00a4 1344     		add	r3, r3, r2
 661 00a6 0022     		movs	r2, #0
 662 00a8 43F8702C 		str	r2, [r3, #-112]
 171:/usr/src/chibiostest/os/various/shell.c ****     if (cmd != NULL) {
 663              		.loc 1 171 0
 664 00ac 1E9B     		ldr	r3, [sp, #120]
 665 00ae 002B     		cmp	r3, #0
 666 00b0 55D0     		beq	.L38
 172:/usr/src/chibiostest/os/various/shell.c ****       if (strcasecmp(cmd, "exit") == 0) {
 667              		.loc 1 172 0
 668 00b2 1E98     		ldr	r0, [sp, #120]
 669 00b4 3A49     		ldr	r1, .L47+28
 670 00b6 FFF7FEFF 		bl	strcasecmp
 671 00ba 0346     		mov	r3, r0
 672 00bc 002B     		cmp	r3, #0
 673 00be 08D1     		bne	.L39
 173:/usr/src/chibiostest/os/various/shell.c ****         if (n > 0) {
 674              		.loc 1 173 0
 675 00c0 1F9B     		ldr	r3, [sp, #124]
 676 00c2 002B     		cmp	r3, #0
 677 00c4 04DD     		ble	.L40
 174:/usr/src/chibiostest/os/various/shell.c ****           usage(chp, "exit");
 678              		.loc 1 174 0
 679 00c6 1C98     		ldr	r0, [sp, #112]
 680 00c8 3549     		ldr	r1, .L47+28
 681 00ca FFF7FEFF 		bl	usage
 175:/usr/src/chibiostest/os/various/shell.c ****           continue;
 682              		.loc 1 175 0
 683 00ce 46E0     		b	.L38
 684              	.L40:
 176:/usr/src/chibiostest/os/various/shell.c ****         }
 177:/usr/src/chibiostest/os/various/shell.c ****         break;
 685              		.loc 1 177 0
 686 00d0 46E0     		b	.L33
 687              	.L39:
 178:/usr/src/chibiostest/os/various/shell.c ****       }
 179:/usr/src/chibiostest/os/various/shell.c ****       else if (strcasecmp(cmd, "help") == 0) {
 688              		.loc 1 179 0
 689 00d2 1E98     		ldr	r0, [sp, #120]
 690 00d4 3349     		ldr	r1, .L47+32
 691 00d6 FFF7FEFF 		bl	strcasecmp
 692 00da 0346     		mov	r3, r0
 693 00dc 002B     		cmp	r3, #0
 694 00de 1BD1     		bne	.L41
 180:/usr/src/chibiostest/os/various/shell.c ****         if (n > 0) {
 695              		.loc 1 180 0
 696 00e0 1F9B     		ldr	r3, [sp, #124]
 697 00e2 002B     		cmp	r3, #0
 698 00e4 04DD     		ble	.L42
 181:/usr/src/chibiostest/os/various/shell.c ****           usage(chp, "help");
 699              		.loc 1 181 0
 700 00e6 1C98     		ldr	r0, [sp, #112]
 701 00e8 2E49     		ldr	r1, .L47+32
 702 00ea FFF7FEFF 		bl	usage
 182:/usr/src/chibiostest/os/various/shell.c ****           continue;
 703              		.loc 1 182 0
 704 00ee 36E0     		b	.L38
 705              	.L42:
 183:/usr/src/chibiostest/os/various/shell.c ****         }
 184:/usr/src/chibiostest/os/various/shell.c ****         chprintf(chp, "Commands: help exit ");
 706              		.loc 1 184 0
 707 00f0 1C98     		ldr	r0, [sp, #112]
 708 00f2 2D49     		ldr	r1, .L47+36
 709 00f4 FFF7FEFF 		bl	chprintf
 185:/usr/src/chibiostest/os/various/shell.c ****         list_commands(chp, local_commands);
 710              		.loc 1 185 0
 711 00f8 1C98     		ldr	r0, [sp, #112]
 712 00fa 2C49     		ldr	r1, .L47+40
 713 00fc FFF7FEFF 		bl	list_commands
 186:/usr/src/chibiostest/os/various/shell.c ****         if (scp != NULL)
 714              		.loc 1 186 0
 715 0100 1B9B     		ldr	r3, [sp, #108]
 716 0102 002B     		cmp	r3, #0
 717 0104 03D0     		beq	.L43
 187:/usr/src/chibiostest/os/various/shell.c ****           list_commands(chp, scp);
 718              		.loc 1 187 0
 719 0106 1C98     		ldr	r0, [sp, #112]
 720 0108 1B99     		ldr	r1, [sp, #108]
 721 010a FFF7FEFF 		bl	list_commands
 722              	.L43:
 188:/usr/src/chibiostest/os/various/shell.c ****         chprintf(chp, "\r\n");
 723              		.loc 1 188 0
 724 010e 1C98     		ldr	r0, [sp, #112]
 725 0110 2749     		ldr	r1, .L47+44
 726 0112 FFF7FEFF 		bl	chprintf
 727 0116 22E0     		b	.L38
 728              	.L41:
 189:/usr/src/chibiostest/os/various/shell.c ****       }
 190:/usr/src/chibiostest/os/various/shell.c ****       else if (cmdexec(local_commands, chp, cmd, n, args) &&
 729              		.loc 1 190 0
 730 0118 04AB     		add	r3, sp, #16
 731 011a 0093     		str	r3, [sp]
 732 011c 2348     		ldr	r0, .L47+40
 733 011e 1C99     		ldr	r1, [sp, #112]
 734 0120 1E9A     		ldr	r2, [sp, #120]
 735 0122 1F9B     		ldr	r3, [sp, #124]
 736 0124 FFF7FEFF 		bl	cmdexec
 737 0128 0346     		mov	r3, r0
 738 012a 002B     		cmp	r3, #0
 739 012c 17D0     		beq	.L38
 740              		.loc 1 190 0 is_stmt 0 discriminator 1
 741 012e 1B9B     		ldr	r3, [sp, #108]
 742 0130 002B     		cmp	r3, #0
 743 0132 0AD0     		beq	.L44
 191:/usr/src/chibiostest/os/various/shell.c ****           ((scp == NULL) || cmdexec(scp, chp, cmd, n, args))) {
 744              		.loc 1 191 0 is_stmt 1
 745 0134 04AB     		add	r3, sp, #16
 746 0136 0093     		str	r3, [sp]
 747 0138 1B98     		ldr	r0, [sp, #108]
 748 013a 1C99     		ldr	r1, [sp, #112]
 749 013c 1E9A     		ldr	r2, [sp, #120]
 750 013e 1F9B     		ldr	r3, [sp, #124]
 751 0140 FFF7FEFF 		bl	cmdexec
 752 0144 0346     		mov	r3, r0
 753 0146 002B     		cmp	r3, #0
 754 0148 09D0     		beq	.L38
 755              	.L44:
 192:/usr/src/chibiostest/os/various/shell.c ****         chprintf(chp, "%s", cmd);
 756              		.loc 1 192 0
 757 014a 1C98     		ldr	r0, [sp, #112]
 758 014c 1949     		ldr	r1, .L47+48
 759 014e 1E9A     		ldr	r2, [sp, #120]
 760 0150 FFF7FEFF 		bl	chprintf
 193:/usr/src/chibiostest/os/various/shell.c ****         chprintf(chp, " ?\r\n");
 761              		.loc 1 193 0
 762 0154 1C98     		ldr	r0, [sp, #112]
 763 0156 1849     		ldr	r1, .L47+52
 764 0158 FFF7FEFF 		bl	chprintf
 194:/usr/src/chibiostest/os/various/shell.c ****       }
 195:/usr/src/chibiostest/os/various/shell.c ****     }
 196:/usr/src/chibiostest/os/various/shell.c ****   }
 765              		.loc 1 196 0
 766 015c 63E7     		b	.L45
 767              	.L38:
 768 015e 62E7     		b	.L45
 769              	.L33:
 770              	.LBB2:
 197:/usr/src/chibiostest/os/various/shell.c ****   /* Atomically broadcasting the event source and terminating the thread,
 198:/usr/src/chibiostest/os/various/shell.c ****      there is not a chSysUnlock() because the thread terminates upon return.*/
 199:/usr/src/chibiostest/os/various/shell.c ****   chSysLock();
 771              		.loc 1 199 0
 772 0160 2023     		movs	r3, #32
 773              	@ 199 "/usr/src/chibiostest/os/various/shell.c" 1
 774 0162 83F31188 		msr     BASEPRI, r3
 775              	@ 0 "" 2
 776              		.thumb
 777              	.LBE2:
 778 0166 FFF7FEFF 		bl	dbg_check_lock
 200:/usr/src/chibiostest/os/various/shell.c ****   chEvtBroadcastI(&shell_terminated);
 779              		.loc 1 200 0
 780 016a 1448     		ldr	r0, .L47+56
 781 016c 0021     		movs	r1, #0
 782 016e FFF7FEFF 		bl	chEvtBroadcastFlagsI
 201:/usr/src/chibiostest/os/various/shell.c ****   chThdExitS(msg);
 783              		.loc 1 201 0
 784 0172 1D98     		ldr	r0, [sp, #116]
 785 0174 FFF7FEFF 		bl	chThdExitS
 202:/usr/src/chibiostest/os/various/shell.c ****   return 0; /* Never executed.*/
 786              		.loc 1 202 0
 787 0178 0023     		movs	r3, #0
 203:/usr/src/chibiostest/os/various/shell.c **** }
 788              		.loc 1 203 0
 789 017a 1846     		mov	r0, r3
 790 017c 21B0     		add	sp, sp, #132
 791              		@ sp needed
 792 017e 5DF804FB 		ldr	pc, [sp], #4
 793              	.L48:
 794 0182 00BF     		.align	2
 795              	.L47:
 796 0184 00000000 		.word	rlist
 797 0188 8C010000 		.word	.LC23
 798 018c 94010000 		.word	.LC24
 799 0190 AC010000 		.word	.LC25
 800 0194 B4010000 		.word	.LC26
 801 0198 C0010000 		.word	.LC27
 802 019c C4010000 		.word	.LC28
 803 01a0 DC010000 		.word	.LC29
 804 01a4 E4010000 		.word	.LC30
 805 01a8 EC010000 		.word	.LC31
 806 01ac 00000000 		.word	local_commands
 807 01b0 04020000 		.word	.LC32
 808 01b4 08020000 		.word	.LC33
 809 01b8 0C020000 		.word	.LC34
 810 01bc 00000000 		.word	shell_terminated
 811              		.cfi_endproc
 812              	.LFE124:
 814              		.section	.text.shellInit,"ax",%progbits
 815              		.align	2
 816              		.p2align 4,,15
 817              		.global	shellInit
 818              		.thumb
 819              		.thumb_func
 821              	shellInit:
 822              	.LFB125:
 204:/usr/src/chibiostest/os/various/shell.c **** 
 205:/usr/src/chibiostest/os/various/shell.c **** /**
 206:/usr/src/chibiostest/os/various/shell.c ****  * @brief   Shell manager initialization.
 207:/usr/src/chibiostest/os/various/shell.c ****  */
 208:/usr/src/chibiostest/os/various/shell.c **** void shellInit(void) {
 823              		.loc 1 208 0
 824              		.cfi_startproc
 825              		@ args = 0, pretend = 0, frame = 0
 826              		@ frame_needed = 0, uses_anonymous_args = 0
 827              		@ link register save eliminated.
 209:/usr/src/chibiostest/os/various/shell.c **** 
 210:/usr/src/chibiostest/os/various/shell.c ****   chEvtInit(&shell_terminated);
 828              		.loc 1 210 0
 829 0000 014B     		ldr	r3, .L50
 830 0002 014A     		ldr	r2, .L50
 831 0004 1A60     		str	r2, [r3]
 211:/usr/src/chibiostest/os/various/shell.c **** }
 832              		.loc 1 211 0
 833 0006 7047     		bx	lr
 834              	.L51:
 835              		.align	2
 836              	.L50:
 837 0008 00000000 		.word	shell_terminated
 838              		.cfi_endproc
 839              	.LFE125:
 841 000c AFF30080 		.section	.text.shellCreate,"ax",%progbits
 842              		.align	2
 843              		.p2align 4,,15
 844              		.global	shellCreate
 845              		.thumb
 846              		.thumb_func
 848              	shellCreate:
 849              	.LFB126:
 212:/usr/src/chibiostest/os/various/shell.c **** 
 213:/usr/src/chibiostest/os/various/shell.c **** /**
 214:/usr/src/chibiostest/os/various/shell.c ****  * @brief   Spawns a new shell.
 215:/usr/src/chibiostest/os/various/shell.c ****  * @pre     @p CH_USE_MALLOC_HEAP and @p CH_USE_DYNAMIC must be enabled.
 216:/usr/src/chibiostest/os/various/shell.c ****  *
 217:/usr/src/chibiostest/os/various/shell.c ****  * @param[in] scp       pointer to a @p ShellConfig object
 218:/usr/src/chibiostest/os/various/shell.c ****  * @param[in] size      size of the shell working area to be allocated
 219:/usr/src/chibiostest/os/various/shell.c ****  * @param[in] prio      priority level for the new shell
 220:/usr/src/chibiostest/os/various/shell.c ****  * @return              A pointer to the shell thread.
 221:/usr/src/chibiostest/os/various/shell.c ****  * @retval NULL         thread creation failed because memory allocation.
 222:/usr/src/chibiostest/os/various/shell.c ****  */
 223:/usr/src/chibiostest/os/various/shell.c **** #if CH_USE_HEAP && CH_USE_DYNAMIC
 224:/usr/src/chibiostest/os/various/shell.c **** Thread *shellCreate(const ShellConfig *scp, size_t size, tprio_t prio) {
 850              		.loc 1 224 0
 851              		.cfi_startproc
 852              		@ args = 0, pretend = 0, frame = 16
 853              		@ frame_needed = 0, uses_anonymous_args = 0
 854 0000 00B5     		push	{lr}
 855              		.cfi_def_cfa_offset 4
 856              		.cfi_offset 14, -4
 857 0002 87B0     		sub	sp, sp, #28
 858              		.cfi_def_cfa_offset 32
 859 0004 0590     		str	r0, [sp, #20]
 860 0006 0491     		str	r1, [sp, #16]
 861 0008 0392     		str	r2, [sp, #12]
 225:/usr/src/chibiostest/os/various/shell.c **** 
 226:/usr/src/chibiostest/os/various/shell.c ****   return chThdCreateFromHeap(NULL, size, prio, shell_thread, (void *)scp);
 862              		.loc 1 226 0
 863 000a 059B     		ldr	r3, [sp, #20]
 864 000c 0093     		str	r3, [sp]
 865 000e 0020     		movs	r0, #0
 866 0010 0499     		ldr	r1, [sp, #16]
 867 0012 039A     		ldr	r2, [sp, #12]
 868 0014 034B     		ldr	r3, .L54
 869 0016 FFF7FEFF 		bl	chThdCreateFromHeap
 870 001a 0346     		mov	r3, r0
 227:/usr/src/chibiostest/os/various/shell.c **** }
 871              		.loc 1 227 0
 872 001c 1846     		mov	r0, r3
 873 001e 07B0     		add	sp, sp, #28
 874              		@ sp needed
 875 0020 5DF804FB 		ldr	pc, [sp], #4
 876              	.L55:
 877              		.align	2
 878              	.L54:
 879 0024 00000000 		.word	shell_thread
 880              		.cfi_endproc
 881              	.LFE126:
 883 0028 AFF30080 		.section	.text.shellCreateStatic,"ax",%progbits
 883      AFF30080 
 884              		.align	2
 885              		.p2align 4,,15
 886              		.global	shellCreateStatic
 887              		.thumb
 888              		.thumb_func
 890              	shellCreateStatic:
 891              	.LFB127:
 228:/usr/src/chibiostest/os/various/shell.c **** #endif
 229:/usr/src/chibiostest/os/various/shell.c **** 
 230:/usr/src/chibiostest/os/various/shell.c **** /**
 231:/usr/src/chibiostest/os/various/shell.c ****  * @brief   Create statically allocated shell thread.
 232:/usr/src/chibiostest/os/various/shell.c ****  *
 233:/usr/src/chibiostest/os/various/shell.c ****  * @param[in] scp       pointer to a @p ShellConfig object
 234:/usr/src/chibiostest/os/various/shell.c ****  * @param[in] wsp       pointer to a working area dedicated to the shell thread stack
 235:/usr/src/chibiostest/os/various/shell.c ****  * @param[in] size      size of the shell working area
 236:/usr/src/chibiostest/os/various/shell.c ****  * @param[in] prio      priority level for the new shell
 237:/usr/src/chibiostest/os/various/shell.c ****  * @return              A pointer to the shell thread.
 238:/usr/src/chibiostest/os/various/shell.c ****  */
 239:/usr/src/chibiostest/os/various/shell.c **** Thread *shellCreateStatic(const ShellConfig *scp, void *wsp,
 240:/usr/src/chibiostest/os/various/shell.c ****                           size_t size, tprio_t prio) {
 892              		.loc 1 240 0
 893              		.cfi_startproc
 894              		@ args = 0, pretend = 0, frame = 16
 895              		@ frame_needed = 0, uses_anonymous_args = 0
 896 0000 00B5     		push	{lr}
 897              		.cfi_def_cfa_offset 4
 898              		.cfi_offset 14, -4
 899 0002 87B0     		sub	sp, sp, #28
 900              		.cfi_def_cfa_offset 32
 901 0004 0590     		str	r0, [sp, #20]
 902 0006 0491     		str	r1, [sp, #16]
 903 0008 0392     		str	r2, [sp, #12]
 904 000a 0293     		str	r3, [sp, #8]
 241:/usr/src/chibiostest/os/various/shell.c **** 
 242:/usr/src/chibiostest/os/various/shell.c ****   return chThdCreateStatic(wsp, size, prio, shell_thread, (void *)scp);
 905              		.loc 1 242 0
 906 000c 059B     		ldr	r3, [sp, #20]
 907 000e 0093     		str	r3, [sp]
 908 0010 0498     		ldr	r0, [sp, #16]
 909 0012 0399     		ldr	r1, [sp, #12]
 910 0014 029A     		ldr	r2, [sp, #8]
 911 0016 044B     		ldr	r3, .L58
 912 0018 FFF7FEFF 		bl	chThdCreateStatic
 913 001c 0346     		mov	r3, r0
 243:/usr/src/chibiostest/os/various/shell.c **** }
 914              		.loc 1 243 0
 915 001e 1846     		mov	r0, r3
 916 0020 07B0     		add	sp, sp, #28
 917              		@ sp needed
 918 0022 5DF804FB 		ldr	pc, [sp], #4
 919              	.L59:
 920 0026 00BF     		.align	2
 921              	.L58:
 922 0028 00000000 		.word	shell_thread
 923              		.cfi_endproc
 924              	.LFE127:
 926 002c AFF30080 		.section	.rodata
 927 0211 000000   		.align	2
 928              	.LC35:
 929 0214 5E4400   		.ascii	"^D\000"
 930 0217 00       		.section	.text.shellGetLine,"ax",%progbits
 931              		.align	2
 932              		.p2align 4,,15
 933              		.global	shellGetLine
 934              		.thumb
 935              		.thumb_func
 937              	shellGetLine:
 938              	.LFB128:
 244:/usr/src/chibiostest/os/various/shell.c **** 
 245:/usr/src/chibiostest/os/various/shell.c **** /**
 246:/usr/src/chibiostest/os/various/shell.c ****  * @brief   Reads a whole line from the input channel.
 247:/usr/src/chibiostest/os/various/shell.c ****  *
 248:/usr/src/chibiostest/os/various/shell.c ****  * @param[in] chp       pointer to a @p BaseSequentialStream object
 249:/usr/src/chibiostest/os/various/shell.c ****  * @param[in] line      pointer to the line buffer
 250:/usr/src/chibiostest/os/various/shell.c ****  * @param[in] size      buffer maximum length
 251:/usr/src/chibiostest/os/various/shell.c ****  * @return              The operation status.
 252:/usr/src/chibiostest/os/various/shell.c ****  * @retval TRUE         the channel was reset or CTRL-D pressed.
 253:/usr/src/chibiostest/os/various/shell.c ****  * @retval FALSE        operation successful.
 254:/usr/src/chibiostest/os/various/shell.c ****  */
 255:/usr/src/chibiostest/os/various/shell.c **** bool_t shellGetLine(BaseSequentialStream *chp, char *line, unsigned size) {
 939              		.loc 1 255 0
 940              		.cfi_startproc
 941              		@ args = 0, pretend = 0, frame = 24
 942              		@ frame_needed = 0, uses_anonymous_args = 0
 943 0000 00B5     		push	{lr}
 944              		.cfi_def_cfa_offset 4
 945              		.cfi_offset 14, -4
 946 0002 87B0     		sub	sp, sp, #28
 947              		.cfi_def_cfa_offset 32
 948 0004 0390     		str	r0, [sp, #12]
 949 0006 0291     		str	r1, [sp, #8]
 950 0008 0192     		str	r2, [sp, #4]
 256:/usr/src/chibiostest/os/various/shell.c ****   char *p = line;
 951              		.loc 1 256 0
 952 000a 029B     		ldr	r3, [sp, #8]
 953 000c 0593     		str	r3, [sp, #20]
 954              	.L72:
 955              	.LBB3:
 257:/usr/src/chibiostest/os/various/shell.c **** 
 258:/usr/src/chibiostest/os/various/shell.c ****   while (TRUE) {
 259:/usr/src/chibiostest/os/various/shell.c ****     char c;
 260:/usr/src/chibiostest/os/various/shell.c **** 
 261:/usr/src/chibiostest/os/various/shell.c ****     if (chSequentialStreamRead(chp, (uint8_t *)&c, 1) == 0)
 956              		.loc 1 261 0
 957 000e 039B     		ldr	r3, [sp, #12]
 958 0010 1B68     		ldr	r3, [r3]
 959 0012 5B68     		ldr	r3, [r3, #4]
 960 0014 0DF11302 		add	r2, sp, #19
 961 0018 0398     		ldr	r0, [sp, #12]
 962 001a 1146     		mov	r1, r2
 963 001c 0122     		movs	r2, #1
 964 001e 9847     		blx	r3
 965 0020 0346     		mov	r3, r0
 966 0022 002B     		cmp	r3, #0
 967 0024 01D1     		bne	.L61
 262:/usr/src/chibiostest/os/various/shell.c ****       return TRUE;
 968              		.loc 1 262 0
 969 0026 0123     		movs	r3, #1
 970 0028 55E0     		b	.L71
 971              	.L61:
 263:/usr/src/chibiostest/os/various/shell.c ****     if (c == 4) {
 972              		.loc 1 263 0
 973 002a 9DF81330 		ldrb	r3, [sp, #19]	@ zero_extendqisi2
 974 002e 042B     		cmp	r3, #4
 975 0030 05D1     		bne	.L63
 264:/usr/src/chibiostest/os/various/shell.c ****       chprintf(chp, "^D");
 976              		.loc 1 264 0
 977 0032 0398     		ldr	r0, [sp, #12]
 978 0034 2A49     		ldr	r1, .L73
 979 0036 FFF7FEFF 		bl	chprintf
 265:/usr/src/chibiostest/os/various/shell.c ****       return TRUE;
 980              		.loc 1 265 0
 981 003a 0123     		movs	r3, #1
 982 003c 4BE0     		b	.L71
 983              	.L63:
 266:/usr/src/chibiostest/os/various/shell.c ****     }
 267:/usr/src/chibiostest/os/various/shell.c ****     if (c == 8) {
 984              		.loc 1 267 0
 985 003e 9DF81330 		ldrb	r3, [sp, #19]	@ zero_extendqisi2
 986 0042 082B     		cmp	r3, #8
 987 0044 1ED1     		bne	.L64
 268:/usr/src/chibiostest/os/various/shell.c ****       if (p != line) {
 988              		.loc 1 268 0
 989 0046 059A     		ldr	r2, [sp, #20]
 990 0048 029B     		ldr	r3, [sp, #8]
 991 004a 9A42     		cmp	r2, r3
 992 004c 19D0     		beq	.L65
 269:/usr/src/chibiostest/os/various/shell.c ****         chSequentialStreamPut(chp, c);
 993              		.loc 1 269 0
 994 004e 039B     		ldr	r3, [sp, #12]
 995 0050 1B68     		ldr	r3, [r3]
 996 0052 9B68     		ldr	r3, [r3, #8]
 997 0054 9DF81320 		ldrb	r2, [sp, #19]	@ zero_extendqisi2
 998 0058 0398     		ldr	r0, [sp, #12]
 999 005a 1146     		mov	r1, r2
 1000 005c 9847     		blx	r3
 270:/usr/src/chibiostest/os/various/shell.c ****         chSequentialStreamPut(chp, 0x20);
 1001              		.loc 1 270 0
 1002 005e 039B     		ldr	r3, [sp, #12]
 1003 0060 1B68     		ldr	r3, [r3]
 1004 0062 9B68     		ldr	r3, [r3, #8]
 1005 0064 0398     		ldr	r0, [sp, #12]
 1006 0066 2021     		movs	r1, #32
 1007 0068 9847     		blx	r3
 271:/usr/src/chibiostest/os/various/shell.c ****         chSequentialStreamPut(chp, c);
 1008              		.loc 1 271 0
 1009 006a 039B     		ldr	r3, [sp, #12]
 1010 006c 1B68     		ldr	r3, [r3]
 1011 006e 9B68     		ldr	r3, [r3, #8]
 1012 0070 9DF81320 		ldrb	r2, [sp, #19]	@ zero_extendqisi2
 1013 0074 0398     		ldr	r0, [sp, #12]
 1014 0076 1146     		mov	r1, r2
 1015 0078 9847     		blx	r3
 272:/usr/src/chibiostest/os/various/shell.c ****         p--;
 1016              		.loc 1 272 0
 1017 007a 059B     		ldr	r3, [sp, #20]
 1018 007c 013B     		subs	r3, r3, #1
 1019 007e 0593     		str	r3, [sp, #20]
 273:/usr/src/chibiostest/os/various/shell.c ****       }
 274:/usr/src/chibiostest/os/various/shell.c ****       continue;
 1020              		.loc 1 274 0
 1021 0080 28E0     		b	.L70
 1022              	.L65:
 1023 0082 27E0     		b	.L70
 1024              	.L64:
 275:/usr/src/chibiostest/os/various/shell.c ****     }
 276:/usr/src/chibiostest/os/various/shell.c ****     if (c == '\r') {
 1025              		.loc 1 276 0
 1026 0084 9DF81330 		ldrb	r3, [sp, #19]	@ zero_extendqisi2
 1027 0088 0D2B     		cmp	r3, #13
 1028 008a 08D1     		bne	.L67
 277:/usr/src/chibiostest/os/various/shell.c ****       chprintf(chp, "\r\n");
 1029              		.loc 1 277 0
 1030 008c 0398     		ldr	r0, [sp, #12]
 1031 008e 1549     		ldr	r1, .L73+4
 1032 0090 FFF7FEFF 		bl	chprintf
 278:/usr/src/chibiostest/os/various/shell.c ****       *p = 0;
 1033              		.loc 1 278 0
 1034 0094 059B     		ldr	r3, [sp, #20]
 1035 0096 0022     		movs	r2, #0
 1036 0098 1A70     		strb	r2, [r3]
 279:/usr/src/chibiostest/os/various/shell.c ****       return FALSE;
 1037              		.loc 1 279 0
 1038 009a 0023     		movs	r3, #0
 1039 009c 1BE0     		b	.L71
 1040              	.L67:
 280:/usr/src/chibiostest/os/various/shell.c ****     }
 281:/usr/src/chibiostest/os/various/shell.c ****     if (c < 0x20)
 1041              		.loc 1 281 0
 1042 009e 9DF81330 		ldrb	r3, [sp, #19]	@ zero_extendqisi2
 1043 00a2 1F2B     		cmp	r3, #31
 1044 00a4 00D8     		bhi	.L68
 282:/usr/src/chibiostest/os/various/shell.c ****       continue;
 1045              		.loc 1 282 0
 1046 00a6 15E0     		b	.L70
 1047              	.L68:
 283:/usr/src/chibiostest/os/various/shell.c ****     if (p < line + size - 1) {
 1048              		.loc 1 283 0
 1049 00a8 019B     		ldr	r3, [sp, #4]
 1050 00aa 013B     		subs	r3, r3, #1
 1051 00ac 029A     		ldr	r2, [sp, #8]
 1052 00ae 1A44     		add	r2, r2, r3
 1053 00b0 059B     		ldr	r3, [sp, #20]
 1054 00b2 9A42     		cmp	r2, r3
 1055 00b4 0ED9     		bls	.L70
 284:/usr/src/chibiostest/os/various/shell.c ****       chSequentialStreamPut(chp, c);
 1056              		.loc 1 284 0
 1057 00b6 039B     		ldr	r3, [sp, #12]
 1058 00b8 1B68     		ldr	r3, [r3]
 1059 00ba 9B68     		ldr	r3, [r3, #8]
 1060 00bc 9DF81320 		ldrb	r2, [sp, #19]	@ zero_extendqisi2
 1061 00c0 0398     		ldr	r0, [sp, #12]
 1062 00c2 1146     		mov	r1, r2
 1063 00c4 9847     		blx	r3
 285:/usr/src/chibiostest/os/various/shell.c ****       *p++ = (char)c;
 1064              		.loc 1 285 0
 1065 00c6 059B     		ldr	r3, [sp, #20]
 1066 00c8 5A1C     		adds	r2, r3, #1
 1067 00ca 0592     		str	r2, [sp, #20]
 1068 00cc 9DF81320 		ldrb	r2, [sp, #19]	@ zero_extendqisi2
 1069 00d0 1A70     		strb	r2, [r3]
 1070              	.LBE3:
 286:/usr/src/chibiostest/os/various/shell.c ****     }
 287:/usr/src/chibiostest/os/various/shell.c ****   }
 1071              		.loc 1 287 0
 1072 00d2 9CE7     		b	.L72
 1073              	.L70:
 1074 00d4 9BE7     		b	.L72
 1075              	.L71:
 288:/usr/src/chibiostest/os/various/shell.c **** }
 1076              		.loc 1 288 0
 1077 00d6 1846     		mov	r0, r3
 1078 00d8 07B0     		add	sp, sp, #28
 1079              		@ sp needed
 1080 00da 5DF804FB 		ldr	pc, [sp], #4
 1081              	.L74:
 1082 00de 00BF     		.align	2
 1083              	.L73:
 1084 00e0 14020000 		.word	.LC35
 1085 00e4 04020000 		.word	.LC32
 1086              		.cfi_endproc
 1087              	.LFE128:
 1089 00e8 AFF30080 		.text
 1089      AFF30080 
 1090              	.Letext0:
 1091              		.file 2 "/usr/lib/gcc/arm-none-eabi/4.8/include/stddef.h"
 1092              		.file 3 "/usr/include/newlib/machine/_default_types.h"
 1093              		.file 4 "/usr/include/newlib/stdint.h"
 1094              		.file 5 "/usr/src/chibiostest/os/ports/GCC/ARMCMx/chtypes.h"
 1095              		.file 6 "/usr/src/chibiostest/os/kernel/include/chlists.h"
 1096              		.file 7 "/usr/src/chibiostest/os/kernel/include/chthreads.h"
 1097              		.file 8 "/usr/src/chibiostest/os/ports/GCC/ARMCMx/chcore_v7m.h"
 1098              		.file 9 "/usr/src/chibiostest/os/kernel/include/chvt.h"
 1099              		.file 10 "/usr/src/chibiostest/os/kernel/include/chschd.h"
 1100              		.file 11 "/usr/src/chibiostest/os/kernel/include/chmtx.h"
 1101              		.file 12 "/usr/src/chibiostest/os/kernel/include/chevents.h"
 1102              		.file 13 "/usr/src/chibiostest/os/kernel/include/chstreams.h"
 1103              		.file 14 "/usr/src/chibiostest/os/various/shell.h"
 1104              		.file 15 "/usr/src/chibiostest/os/ports/common/ARMCMx/CMSIS/include/core_cm4.h"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 shell.c
     /tmp/ccUFhSb1.s:24     .bss.shell_terminated:0000000000000000 shell_terminated
     /tmp/ccUFhSb1.s:21     .bss.shell_terminated:0000000000000000 $d
     /tmp/ccUFhSb1.s:27     .text._strtok:0000000000000000 $t
     /tmp/ccUFhSb1.s:32     .text._strtok:0000000000000000 _strtok
     /tmp/ccUFhSb1.s:119    .rodata:0000000000000000 $d
     /tmp/ccUFhSb1.s:123    .text.usage:0000000000000000 $t
     /tmp/ccUFhSb1.s:128    .text.usage:0000000000000000 usage
     /tmp/ccUFhSb1.s:153    .text.usage:0000000000000018 $d
     /tmp/ccUFhSb1.s:162    .text.list_commands:0000000000000000 $t
     /tmp/ccUFhSb1.s:167    .text.list_commands:0000000000000000 list_commands
     /tmp/ccUFhSb1.s:207    .text.list_commands:000000000000002c $d
     /tmp/ccUFhSb1.s:270    .text.cmd_info:0000000000000000 $t
     /tmp/ccUFhSb1.s:275    .text.cmd_info:0000000000000000 cmd_info
     /tmp/ccUFhSb1.s:351    .text.cmd_info:0000000000000078 $d
     /tmp/ccUFhSb1.s:381    .text.cmd_systime:0000000000000000 $t
     /tmp/ccUFhSb1.s:386    .text.cmd_systime:0000000000000000 cmd_systime
     /tmp/ccUFhSb1.s:426    .text.cmd_systime:0000000000000030 $d
     /tmp/ccUFhSb1.s:433    .data.local_commands:0000000000000000 $d
     /tmp/ccUFhSb1.s:436    .data.local_commands:0000000000000000 local_commands
     /tmp/ccUFhSb1.s:444    .text.cmdexec:0000000000000000 $t
     /tmp/ccUFhSb1.s:449    .text.cmdexec:0000000000000000 cmdexec
     /tmp/ccUFhSb1.s:546    .text.shell_thread:0000000000000000 $t
     /tmp/ccUFhSb1.s:551    .text.shell_thread:0000000000000000 shell_thread
     /tmp/ccUFhSb1.s:937    .text.shellGetLine:0000000000000000 shellGetLine
     /tmp/ccUFhSb1.s:796    .text.shell_thread:0000000000000184 $d
     /tmp/ccUFhSb1.s:815    .text.shellInit:0000000000000000 $t
     /tmp/ccUFhSb1.s:821    .text.shellInit:0000000000000000 shellInit
     /tmp/ccUFhSb1.s:837    .text.shellInit:0000000000000008 $d
     /tmp/ccUFhSb1.s:842    .text.shellCreate:0000000000000000 $t
     /tmp/ccUFhSb1.s:848    .text.shellCreate:0000000000000000 shellCreate
     /tmp/ccUFhSb1.s:879    .text.shellCreate:0000000000000024 $d
     /tmp/ccUFhSb1.s:884    .text.shellCreateStatic:0000000000000000 $t
     /tmp/ccUFhSb1.s:890    .text.shellCreateStatic:0000000000000000 shellCreateStatic
     /tmp/ccUFhSb1.s:922    .text.shellCreateStatic:0000000000000028 $d
     /tmp/ccUFhSb1.s:931    .text.shellGetLine:0000000000000000 $t
     /tmp/ccUFhSb1.s:1084   .text.shellGetLine:00000000000000e0 $d
                     .debug_frame:0000000000000010 $d
     /tmp/ccUFhSb1.s:157    .text.usage:000000000000001c $t
     /tmp/ccUFhSb1.s:373    .text.cmd_info:00000000000000c4 $t
     /tmp/ccUFhSb1.s:432    .text.cmd_systime:000000000000003c $t
     /tmp/ccUFhSb1.s:841    .text.shellInit:000000000000000c $t
     /tmp/ccUFhSb1.s:883    .text.shellCreate:0000000000000028 $t
     /tmp/ccUFhSb1.s:926    .text.shellCreateStatic:000000000000002c $t
     /tmp/ccUFhSb1.s:1089   .text.shellGetLine:00000000000000e8 $t

UNDEFINED SYMBOLS
strspn
strpbrk
chprintf
vtlist
strcasecmp
dbg_check_lock
chEvtBroadcastFlagsI
chThdExitS
rlist
chThdCreateFromHeap
chThdCreateStatic
