   1              		.syntax unified
   2              		.cpu cortex-m4
   3              		.eabi_attribute 27, 3
   4              		.fpu fpv4-sp-d16
   5              		.eabi_attribute 20, 1
   6              		.eabi_attribute 21, 1
   7              		.eabi_attribute 23, 3
   8              		.eabi_attribute 24, 1
   9              		.eabi_attribute 25, 1
  10              		.eabi_attribute 26, 1
  11              		.eabi_attribute 30, 6
  12              		.eabi_attribute 34, 1
  13              		.eabi_attribute 18, 4
  14              		.thumb
  15              		.file	"gpt_lld.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.global	GPTD1
  20              		.section	.bss.GPTD1,"aw",%nobits
  21              		.align	2
  24              	GPTD1:
  25 0000 00000000 		.space	16
  25      00000000 
  25      00000000 
  25      00000000 
  26              		.global	GPTD2
  27              		.section	.bss.GPTD2,"aw",%nobits
  28              		.align	2
  31              	GPTD2:
  32 0000 00000000 		.space	16
  32      00000000 
  32      00000000 
  32      00000000 
  33              		.section	.text.gpt_lld_serve_interrupt,"ax",%progbits
  34              		.align	2
  35              		.p2align 4,,15
  36              		.thumb
  37              		.thumb_func
  39              	gpt_lld_serve_interrupt:
  40              	.LFB118:
  41              		.file 1 "/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c"
   1:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** /*
   2:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     ChibiOS/RT - Copyright (C) 2006,2007,2008,2009,2010,
   3:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****                  2011,2012 Giovanni Di Sirio.
   4:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
   5:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     This file is part of ChibiOS/RT.
   6:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
   7:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     ChibiOS/RT is free software; you can redistribute it and/or modify
   8:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     it under the terms of the GNU General Public License as published by
   9:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     the Free Software Foundation; either version 3 of the License, or
  10:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     (at your option) any later version.
  11:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
  12:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     ChibiOS/RT is distributed in the hope that it will be useful,
  13:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     but WITHOUT ANY WARRANTY; without even the implied warranty of
  14:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  15:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     GNU General Public License for more details.
  16:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
  17:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     You should have received a copy of the GNU General Public License
  18:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     along with this program.  If not, see <http://www.gnu.org/licenses/>.
  19:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** */
  20:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
  21:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** /**
  22:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @file    STM32/gpt_lld.c
  23:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @brief   STM32 GPT subsystem low level driver source.
  24:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  *
  25:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @addtogroup GPT
  26:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @{
  27:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  */
  28:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
  29:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #include "ch.h"
  30:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #include "hal.h"
  31:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
  32:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #if HAL_USE_GPT || defined(__DOXYGEN__)
  33:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
  34:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** /*===========================================================================*/
  35:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** /* Driver exported variables.                                                */
  36:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** /*===========================================================================*/
  37:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
  38:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** /**
  39:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @brief   GPTD1 driver identifier.
  40:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @note    The driver GPTD1 allocates the complex timer TIM1 when enabled.
  41:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  */
  42:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #if STM32_GPT_USE_TIM1 || defined(__DOXYGEN__)
  43:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** GPTDriver GPTD1;
  44:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #endif
  45:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
  46:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** /**
  47:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @brief   GPTD2 driver identifier.
  48:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @note    The driver GPTD2 allocates the timer TIM2 when enabled.
  49:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  */
  50:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #if STM32_GPT_USE_TIM2 || defined(__DOXYGEN__)
  51:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** GPTDriver GPTD2;
  52:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #endif
  53:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
  54:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** /**
  55:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @brief   GPTD3 driver identifier.
  56:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @note    The driver GPTD3 allocates the timer TIM3 when enabled.
  57:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  */
  58:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #if STM32_GPT_USE_TIM3 || defined(__DOXYGEN__)
  59:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** GPTDriver GPTD3;
  60:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #endif
  61:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
  62:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** /**
  63:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @brief   GPTD4 driver identifier.
  64:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @note    The driver GPTD4 allocates the timer TIM4 when enabled.
  65:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  */
  66:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #if STM32_GPT_USE_TIM4 || defined(__DOXYGEN__)
  67:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** GPTDriver GPTD4;
  68:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #endif
  69:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
  70:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** /**
  71:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @brief   GPTD5 driver identifier.
  72:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @note    The driver GPTD5 allocates the timer TIM5 when enabled.
  73:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  */
  74:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #if STM32_GPT_USE_TIM5 || defined(__DOXYGEN__)
  75:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** GPTDriver GPTD5;
  76:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #endif
  77:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
  78:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** /**
  79:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @brief   GPTD8 driver identifier.
  80:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @note    The driver GPTD8 allocates the timer TIM8 when enabled.
  81:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  */
  82:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #if STM32_GPT_USE_TIM8 || defined(__DOXYGEN__)
  83:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** GPTDriver GPTD8;
  84:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #endif
  85:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
  86:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** /*===========================================================================*/
  87:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** /* Driver local variables.                                                   */
  88:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** /*===========================================================================*/
  89:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
  90:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** /*===========================================================================*/
  91:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** /* Driver local functions.                                                   */
  92:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** /*===========================================================================*/
  93:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
  94:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** /**
  95:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @brief   Shared IRQ handler.
  96:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  *
  97:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @param[in] gptp      pointer to a @p GPTDriver object
  98:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  */
  99:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** static void gpt_lld_serve_interrupt(GPTDriver *gptp) {
  42              		.loc 1 99 0
  43              		.cfi_startproc
  44              		@ args = 0, pretend = 0, frame = 8
  45              		@ frame_needed = 0, uses_anonymous_args = 0
  46 0000 00B5     		push	{lr}
  47              		.cfi_def_cfa_offset 4
  48              		.cfi_offset 14, -4
  49 0002 83B0     		sub	sp, sp, #12
  50              		.cfi_def_cfa_offset 16
  51 0004 0190     		str	r0, [sp, #4]
 100:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 101:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   gptp->tim->SR = 0;
  52              		.loc 1 101 0
  53 0006 019B     		ldr	r3, [sp, #4]
  54 0008 DB68     		ldr	r3, [r3, #12]
  55 000a 0022     		movs	r2, #0
  56 000c 1A82     		strh	r2, [r3, #16]	@ movhi
 102:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   if (gptp->state == GPT_ONESHOT) {
  57              		.loc 1 102 0
  58 000e 019B     		ldr	r3, [sp, #4]
  59 0010 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  60 0012 042B     		cmp	r3, #4
  61 0014 05D1     		bne	.L2
 103:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     gptp->state = GPT_READY;                /* Back in GPT_READY state.     */
  62              		.loc 1 103 0
  63 0016 019B     		ldr	r3, [sp, #4]
  64 0018 0222     		movs	r2, #2
  65 001a 1A70     		strb	r2, [r3]
 104:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     gpt_lld_stop_timer(gptp);               /* Timer automatically stopped. */
  66              		.loc 1 104 0
  67 001c 0198     		ldr	r0, [sp, #4]
  68 001e FFF7FEFF 		bl	gpt_lld_stop_timer
  69              	.L2:
 105:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   }
 106:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   gptp->config->callback(gptp);
  70              		.loc 1 106 0
  71 0022 019B     		ldr	r3, [sp, #4]
  72 0024 5B68     		ldr	r3, [r3, #4]
  73 0026 5B68     		ldr	r3, [r3, #4]
  74 0028 0198     		ldr	r0, [sp, #4]
  75 002a 9847     		blx	r3
 107:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** }
  76              		.loc 1 107 0
  77 002c 03B0     		add	sp, sp, #12
  78              		@ sp needed
  79 002e 5DF804FB 		ldr	pc, [sp], #4
  80              		.cfi_endproc
  81              	.LFE118:
  83 0032 00BFAFF3 		.section	.text.VectorA4,"ax",%progbits
  83      0080AFF3 
  83      0080AFF3 
  83      0080
  84              		.align	2
  85              		.p2align 4,,15
  86              		.global	VectorA4
  87              		.thumb
  88              		.thumb_func
  90              	VectorA4:
  91              	.LFB119:
 108:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 109:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** /*===========================================================================*/
 110:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** /* Driver interrupt handlers.                                                */
 111:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** /*===========================================================================*/
 112:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 113:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #if STM32_GPT_USE_TIM1
 114:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #if !defined(STM32_TIM1_UP_HANDLER)
 115:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #error "STM32_TIM1_UP_HANDLER not defined"
 116:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #endif
 117:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** /**
 118:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @brief   TIM2 interrupt handler.
 119:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  *
 120:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @isr
 121:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  */
 122:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** CH_IRQ_HANDLER(STM32_TIM1_UP_HANDLER) {
  92              		.loc 1 122 0
  93              		.cfi_startproc
  94              		@ args = 0, pretend = 0, frame = 0
  95              		@ frame_needed = 0, uses_anonymous_args = 0
  96 0000 08B5     		push	{r3, lr}
  97              		.cfi_def_cfa_offset 8
  98              		.cfi_offset 3, -8
  99              		.cfi_offset 14, -4
 123:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 124:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   CH_IRQ_PROLOGUE();
 100              		.loc 1 124 0
 101 0002 FFF7FEFF 		bl	dbg_check_enter_isr
 125:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 126:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   gpt_lld_serve_interrupt(&GPTD1);
 102              		.loc 1 126 0
 103 0006 0448     		ldr	r0, .L4
 104 0008 FFF7FEFF 		bl	gpt_lld_serve_interrupt
 127:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 128:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   CH_IRQ_EPILOGUE();
 105              		.loc 1 128 0
 106 000c FFF7FEFF 		bl	dbg_check_leave_isr
 107 0010 FFF7FEFF 		bl	_port_irq_epilogue
 129:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** }
 108              		.loc 1 129 0
 109 0014 08BD     		pop	{r3, pc}
 110              	.L5:
 111 0016 00BF     		.align	2
 112              	.L4:
 113 0018 00000000 		.word	GPTD1
 114              		.cfi_endproc
 115              	.LFE119:
 117 001c AFF30080 		.section	.text.VectorB0,"ax",%progbits
 118              		.align	2
 119              		.p2align 4,,15
 120              		.global	VectorB0
 121              		.thumb
 122              		.thumb_func
 124              	VectorB0:
 125              	.LFB120:
 130:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #endif /* STM32_GPT_USE_TIM1 */
 131:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 132:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #if STM32_GPT_USE_TIM2
 133:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #if !defined(STM32_TIM2_HANDLER)
 134:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #error "STM32_TIM2_HANDLER not defined"
 135:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #endif
 136:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** /**
 137:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @brief   TIM2 interrupt handler.
 138:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  *
 139:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @isr
 140:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  */
 141:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** CH_IRQ_HANDLER(STM32_TIM2_HANDLER) {
 126              		.loc 1 141 0
 127              		.cfi_startproc
 128              		@ args = 0, pretend = 0, frame = 0
 129              		@ frame_needed = 0, uses_anonymous_args = 0
 130 0000 08B5     		push	{r3, lr}
 131              		.cfi_def_cfa_offset 8
 132              		.cfi_offset 3, -8
 133              		.cfi_offset 14, -4
 142:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 143:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   CH_IRQ_PROLOGUE();
 134              		.loc 1 143 0
 135 0002 FFF7FEFF 		bl	dbg_check_enter_isr
 144:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 145:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   gpt_lld_serve_interrupt(&GPTD2);
 136              		.loc 1 145 0
 137 0006 0448     		ldr	r0, .L7
 138 0008 FFF7FEFF 		bl	gpt_lld_serve_interrupt
 146:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 147:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   CH_IRQ_EPILOGUE();
 139              		.loc 1 147 0
 140 000c FFF7FEFF 		bl	dbg_check_leave_isr
 141 0010 FFF7FEFF 		bl	_port_irq_epilogue
 148:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** }
 142              		.loc 1 148 0
 143 0014 08BD     		pop	{r3, pc}
 144              	.L8:
 145 0016 00BF     		.align	2
 146              	.L7:
 147 0018 00000000 		.word	GPTD2
 148              		.cfi_endproc
 149              	.LFE120:
 151 001c AFF30080 		.section	.text.gpt_lld_init,"ax",%progbits
 152              		.align	2
 153              		.p2align 4,,15
 154              		.global	gpt_lld_init
 155              		.thumb
 156              		.thumb_func
 158              	gpt_lld_init:
 159              	.LFB121:
 149:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #endif /* STM32_GPT_USE_TIM2 */
 150:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 151:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #if STM32_GPT_USE_TIM3
 152:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #if !defined(STM32_TIM3_HANDLER)
 153:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #error "STM32_TIM3_HANDLER not defined"
 154:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #endif
 155:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** /**
 156:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @brief   TIM3 interrupt handler.
 157:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  *
 158:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @isr
 159:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  */
 160:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** CH_IRQ_HANDLER(STM32_TIM3_HANDLER) {
 161:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 162:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   CH_IRQ_PROLOGUE();
 163:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 164:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   gpt_lld_serve_interrupt(&GPTD3);
 165:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 166:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   CH_IRQ_EPILOGUE();
 167:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** }
 168:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #endif /* STM32_GPT_USE_TIM3 */
 169:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 170:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #if STM32_GPT_USE_TIM4
 171:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #if !defined(STM32_TIM4_HANDLER)
 172:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #error "STM32_TIM4_HANDLER not defined"
 173:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #endif
 174:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** /**
 175:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @brief   TIM4 interrupt handler.
 176:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  *
 177:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @isr
 178:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  */
 179:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** CH_IRQ_HANDLER(STM32_TIM4_HANDLER) {
 180:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 181:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   CH_IRQ_PROLOGUE();
 182:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 183:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   gpt_lld_serve_interrupt(&GPTD4);
 184:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 185:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   CH_IRQ_EPILOGUE();
 186:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** }
 187:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #endif /* STM32_GPT_USE_TIM4 */
 188:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 189:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #if STM32_GPT_USE_TIM5
 190:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #if !defined(STM32_TIM5_HANDLER)
 191:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #error "STM32_TIM5_HANDLER not defined"
 192:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #endif
 193:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** /**
 194:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @brief   TIM5 interrupt handler.
 195:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  *
 196:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @isr
 197:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  */
 198:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** CH_IRQ_HANDLER(STM32_TIM5_HANDLER) {
 199:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 200:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   CH_IRQ_PROLOGUE();
 201:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 202:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   gpt_lld_serve_interrupt(&GPTD5);
 203:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 204:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   CH_IRQ_EPILOGUE();
 205:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** }
 206:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #endif /* STM32_GPT_USE_TIM5 */
 207:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 208:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #if STM32_GPT_USE_TIM8
 209:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #if !defined(STM32_TIM8_UP_HANDLER)
 210:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #error "STM32_TIM8_UP_HANDLER not defined"
 211:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #endif
 212:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** /**
 213:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @brief   TIM8 interrupt handler.
 214:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  *
 215:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @isr
 216:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  */
 217:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** CH_IRQ_HANDLER(STM32_TIM8_UP_HANDLER) {
 218:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 219:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   CH_IRQ_PROLOGUE();
 220:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 221:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   gpt_lld_serve_interrupt(&GPTD8);
 222:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 223:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   CH_IRQ_EPILOGUE();
 224:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** }
 225:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #endif /* STM32_GPT_USE_TIM8 */
 226:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 227:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** /*===========================================================================*/
 228:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** /* Driver exported functions.                                                */
 229:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** /*===========================================================================*/
 230:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 231:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** /**
 232:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @brief   Low level GPT driver initialization.
 233:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  *
 234:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @notapi
 235:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  */
 236:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** void gpt_lld_init(void) {
 160              		.loc 1 236 0
 161              		.cfi_startproc
 162              		@ args = 0, pretend = 0, frame = 0
 163              		@ frame_needed = 0, uses_anonymous_args = 0
 164 0000 08B5     		push	{r3, lr}
 165              		.cfi_def_cfa_offset 8
 166              		.cfi_offset 3, -8
 167              		.cfi_offset 14, -4
 237:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 238:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #if STM32_GPT_USE_TIM1
 239:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   /* Driver initialization.*/
 240:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   GPTD1.tim = STM32_TIM1;
 168              		.loc 1 240 0
 169 0002 074B     		ldr	r3, .L10
 170 0004 074A     		ldr	r2, .L10+4
 171 0006 DA60     		str	r2, [r3, #12]
 241:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   gptObjectInit(&GPTD1);
 172              		.loc 1 241 0
 173 0008 0548     		ldr	r0, .L10
 174 000a FFF7FEFF 		bl	gptObjectInit
 242:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #endif
 243:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 244:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #if STM32_GPT_USE_TIM2
 245:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   /* Driver initialization.*/
 246:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   GPTD2.tim = STM32_TIM2;
 175              		.loc 1 246 0
 176 000e 064B     		ldr	r3, .L10+8
 177 0010 4FF08042 		mov	r2, #1073741824
 178 0014 DA60     		str	r2, [r3, #12]
 247:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   gptObjectInit(&GPTD2);
 179              		.loc 1 247 0
 180 0016 0448     		ldr	r0, .L10+8
 181 0018 FFF7FEFF 		bl	gptObjectInit
 248:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #endif
 249:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 250:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #if STM32_GPT_USE_TIM3
 251:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   /* Driver initialization.*/
 252:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   GPTD3.tim = STM32_TIM3;
 253:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   gptObjectInit(&GPTD3);
 254:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #endif
 255:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 256:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #if STM32_GPT_USE_TIM4
 257:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   /* Driver initialization.*/
 258:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   GPTD4.tim = STM32_TIM4;
 259:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   gptObjectInit(&GPTD4);
 260:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #endif
 261:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 262:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #if STM32_GPT_USE_TIM5
 263:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   /* Driver initialization.*/
 264:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   GPTD5.tim = STM32_TIM5;
 265:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   gptObjectInit(&GPTD5);
 266:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #endif
 267:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 268:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #if STM32_GPT_USE_TIM8
 269:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   /* Driver initialization.*/
 270:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   GPTD8.tim = STM32_TIM8;
 271:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   gptObjectInit(&GPTD8);
 272:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #endif
 273:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** }
 182              		.loc 1 273 0
 183 001c 08BD     		pop	{r3, pc}
 184              	.L11:
 185 001e 00BF     		.align	2
 186              	.L10:
 187 0020 00000000 		.word	GPTD1
 188 0024 00000140 		.word	1073807360
 189 0028 00000000 		.word	GPTD2
 190              		.cfi_endproc
 191              	.LFE121:
 193 002c AFF30080 		.section	.rodata
 194              		.align	2
 195              	.LC0:
 196 0000 6770745F 		.ascii	"gpt_lld_start(), #1\000"
 196      6C6C645F 
 196      73746172 
 196      7428292C 
 196      20233100 
 197              		.section	.text.gpt_lld_start,"ax",%progbits
 198              		.align	2
 199              		.p2align 4,,15
 200              		.global	gpt_lld_start
 201              		.thumb
 202              		.thumb_func
 204              	gpt_lld_start:
 205              	.LFB122:
 274:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 275:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** /**
 276:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @brief   Configures and activates the GPT peripheral.
 277:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  *
 278:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @param[in] gptp      pointer to the @p GPTDriver object
 279:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  *
 280:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @notapi
 281:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  */
 282:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** void gpt_lld_start(GPTDriver *gptp) {
 206              		.loc 1 282 0
 207              		.cfi_startproc
 208              		@ args = 0, pretend = 0, frame = 16
 209              		@ frame_needed = 0, uses_anonymous_args = 0
 210 0000 00B5     		push	{lr}
 211              		.cfi_def_cfa_offset 4
 212              		.cfi_offset 14, -4
 213 0002 85B0     		sub	sp, sp, #20
 214              		.cfi_def_cfa_offset 24
 215 0004 0190     		str	r0, [sp, #4]
 283:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   uint16_t psc;
 284:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 285:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   if (gptp->state == GPT_STOP) {
 216              		.loc 1 285 0
 217 0006 019B     		ldr	r3, [sp, #4]
 218 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 219 000a 012B     		cmp	r3, #1
 220 000c 33D1     		bne	.L13
 286:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     /* Clock activation.*/
 287:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #if STM32_GPT_USE_TIM1
 288:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     if (&GPTD1 == gptp) {
 221              		.loc 1 288 0
 222 000e 019A     		ldr	r2, [sp, #4]
 223 0010 304B     		ldr	r3, .L16
 224 0012 9A42     		cmp	r2, r3
 225 0014 15D1     		bne	.L14
 289:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****       rccEnableTIM1(FALSE);
 226              		.loc 1 289 0
 227 0016 304B     		ldr	r3, .L16+4
 228 0018 2F4A     		ldr	r2, .L16+4
 229 001a 526C     		ldr	r2, [r2, #68]
 230 001c 42F00102 		orr	r2, r2, #1
 231 0020 5A64     		str	r2, [r3, #68]
 290:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****       rccResetTIM1();
 232              		.loc 1 290 0
 233 0022 2D4B     		ldr	r3, .L16+4
 234 0024 2C4A     		ldr	r2, .L16+4
 235 0026 526A     		ldr	r2, [r2, #36]
 236 0028 42F00102 		orr	r2, r2, #1
 237 002c 5A62     		str	r2, [r3, #36]
 238 002e 2A4B     		ldr	r3, .L16+4
 239 0030 0022     		movs	r2, #0
 240 0032 5A62     		str	r2, [r3, #36]
 291:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****       nvicEnableVector(STM32_TIM1_UP_NUMBER,
 241              		.loc 1 291 0
 242 0034 1920     		movs	r0, #25
 243 0036 7021     		movs	r1, #112
 244 0038 FFF7FEFF 		bl	nvicEnableVector
 292:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****                        CORTEX_PRIORITY_MASK(STM32_GPT_TIM1_IRQ_PRIORITY));
 293:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****       gptp->clock = STM32_TIMCLK2;
 245              		.loc 1 293 0
 246 003c 019B     		ldr	r3, [sp, #4]
 247 003e 274A     		ldr	r2, .L16+8
 248 0040 9A60     		str	r2, [r3, #8]
 249              	.L14:
 294:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     }
 295:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #endif
 296:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #if STM32_GPT_USE_TIM2
 297:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     if (&GPTD2 == gptp) {
 250              		.loc 1 297 0
 251 0042 019A     		ldr	r2, [sp, #4]
 252 0044 264B     		ldr	r3, .L16+12
 253 0046 9A42     		cmp	r2, r3
 254 0048 15D1     		bne	.L13
 298:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****       rccEnableTIM2(FALSE);
 255              		.loc 1 298 0
 256 004a 234B     		ldr	r3, .L16+4
 257 004c 224A     		ldr	r2, .L16+4
 258 004e 126C     		ldr	r2, [r2, #64]
 259 0050 42F00102 		orr	r2, r2, #1
 260 0054 1A64     		str	r2, [r3, #64]
 299:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****       rccResetTIM2();
 261              		.loc 1 299 0
 262 0056 204B     		ldr	r3, .L16+4
 263 0058 1F4A     		ldr	r2, .L16+4
 264 005a 126A     		ldr	r2, [r2, #32]
 265 005c 42F00102 		orr	r2, r2, #1
 266 0060 1A62     		str	r2, [r3, #32]
 267 0062 1D4B     		ldr	r3, .L16+4
 268 0064 0022     		movs	r2, #0
 269 0066 1A62     		str	r2, [r3, #32]
 300:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****       nvicEnableVector(STM32_TIM2_NUMBER,
 270              		.loc 1 300 0
 271 0068 1C20     		movs	r0, #28
 272 006a 7021     		movs	r1, #112
 273 006c FFF7FEFF 		bl	nvicEnableVector
 301:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****                        CORTEX_PRIORITY_MASK(STM32_GPT_TIM2_IRQ_PRIORITY));
 302:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****       gptp->clock = STM32_TIMCLK1;
 274              		.loc 1 302 0
 275 0070 019B     		ldr	r3, [sp, #4]
 276 0072 1C4A     		ldr	r2, .L16+16
 277 0074 9A60     		str	r2, [r3, #8]
 278              	.L13:
 303:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     }
 304:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #endif
 305:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #if STM32_GPT_USE_TIM3
 306:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     if (&GPTD3 == gptp) {
 307:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****       rccEnableTIM3(FALSE);
 308:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****       rccResetTIM3();
 309:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****       nvicEnableVector(STM32_TIM3_NUMBER,
 310:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****                        CORTEX_PRIORITY_MASK(STM32_GPT_TIM3_IRQ_PRIORITY));
 311:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****       gptp->clock = STM32_TIMCLK1;
 312:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     }
 313:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #endif
 314:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #if STM32_GPT_USE_TIM4
 315:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     if (&GPTD4 == gptp) {
 316:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****       rccEnableTIM4(FALSE);
 317:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****       rccResetTIM4();
 318:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****       nvicEnableVector(STM32_TIM4_NUMBER,
 319:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****                        CORTEX_PRIORITY_MASK(STM32_GPT_TIM4_IRQ_PRIORITY));
 320:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****       gptp->clock = STM32_TIMCLK1;
 321:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     }
 322:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #endif
 323:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 324:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #if STM32_GPT_USE_TIM5
 325:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     if (&GPTD5 == gptp) {
 326:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****       rccEnableTIM5(FALSE);
 327:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****       rccResetTIM5();
 328:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****       nvicEnableVector(STM32_TIM5_NUMBER,
 329:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****                        CORTEX_PRIORITY_MASK(STM32_GPT_TIM5_IRQ_PRIORITY));
 330:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****       gptp->clock = STM32_TIMCLK1;
 331:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     }
 332:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #endif
 333:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 334:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #if STM32_GPT_USE_TIM8
 335:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     if (&GPTD8 == gptp) {
 336:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****       rccEnableTIM8(FALSE);
 337:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****       rccResetTIM8();
 338:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****       nvicEnableVector(STM32_TIM8_UP_NUMBER,
 339:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****                        CORTEX_PRIORITY_MASK(STM32_GPT_TIM8_IRQ_PRIORITY));
 340:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****       gptp->clock = STM32_TIMCLK2;
 341:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     }
 342:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #endif
 343:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   }
 344:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 345:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   /* Prescaler value calculation.*/
 346:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   psc = (uint16_t)((gptp->clock / gptp->config->frequency) - 1);
 279              		.loc 1 346 0
 280 0076 019B     		ldr	r3, [sp, #4]
 281 0078 9A68     		ldr	r2, [r3, #8]
 282 007a 019B     		ldr	r3, [sp, #4]
 283 007c 5B68     		ldr	r3, [r3, #4]
 284 007e 1B68     		ldr	r3, [r3]
 285 0080 B2FBF3F3 		udiv	r3, r2, r3
 286 0084 9BB2     		uxth	r3, r3
 287 0086 013B     		subs	r3, r3, #1
 288 0088 ADF80E30 		strh	r3, [sp, #14]	@ movhi
 347:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   chDbgAssert(((uint32_t)(psc + 1) * gptp->config->frequency) == gptp->clock,
 289              		.loc 1 347 0
 290 008c BDF80E30 		ldrh	r3, [sp, #14]
 291 0090 0133     		adds	r3, r3, #1
 292 0092 019A     		ldr	r2, [sp, #4]
 293 0094 5268     		ldr	r2, [r2, #4]
 294 0096 1268     		ldr	r2, [r2]
 295 0098 02FB03F2 		mul	r2, r2, r3
 296 009c 019B     		ldr	r3, [sp, #4]
 297 009e 9B68     		ldr	r3, [r3, #8]
 298 00a0 9A42     		cmp	r2, r3
 299 00a2 02D0     		beq	.L15
 300              		.loc 1 347 0 is_stmt 0 discriminator 1
 301 00a4 1048     		ldr	r0, .L16+20
 302 00a6 FFF7FEFF 		bl	chDbgPanic
 303              	.L15:
 348:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****               "gpt_lld_start(), #1", "invalid frequency");
 349:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 350:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   /* Timer configuration.*/
 351:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   gptp->tim->CR1  = 0;                      /* Initially stopped.           */
 304              		.loc 1 351 0 is_stmt 1
 305 00aa 019B     		ldr	r3, [sp, #4]
 306 00ac DB68     		ldr	r3, [r3, #12]
 307 00ae 0022     		movs	r2, #0
 308 00b0 1A80     		strh	r2, [r3]	@ movhi
 352:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   gptp->tim->CR2  = TIM_CR2_CCDS;           /* DMA on UE (if any).          */
 309              		.loc 1 352 0
 310 00b2 019B     		ldr	r3, [sp, #4]
 311 00b4 DB68     		ldr	r3, [r3, #12]
 312 00b6 0822     		movs	r2, #8
 313 00b8 9A80     		strh	r2, [r3, #4]	@ movhi
 353:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   gptp->tim->PSC  = psc;                    /* Prescaler value.             */
 314              		.loc 1 353 0
 315 00ba 019B     		ldr	r3, [sp, #4]
 316 00bc DB68     		ldr	r3, [r3, #12]
 317 00be BDF80E20 		ldrh	r2, [sp, #14]	@ movhi
 318 00c2 1A85     		strh	r2, [r3, #40]	@ movhi
 354:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   gptp->tim->DIER = 0;
 319              		.loc 1 354 0
 320 00c4 019B     		ldr	r3, [sp, #4]
 321 00c6 DB68     		ldr	r3, [r3, #12]
 322 00c8 0022     		movs	r2, #0
 323 00ca 9A81     		strh	r2, [r3, #12]	@ movhi
 355:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** }
 324              		.loc 1 355 0
 325 00cc 05B0     		add	sp, sp, #20
 326              		@ sp needed
 327 00ce 5DF804FB 		ldr	pc, [sp], #4
 328              	.L17:
 329 00d2 00BF     		.align	2
 330              	.L16:
 331 00d4 00000000 		.word	GPTD1
 332 00d8 00380240 		.word	1073887232
 333 00dc 007A030A 		.word	168000000
 334 00e0 00000000 		.word	GPTD2
 335 00e4 00BD0105 		.word	84000000
 336 00e8 00000000 		.word	.LC0
 337              		.cfi_endproc
 338              	.LFE122:
 340 00ec AFF30080 		.section	.text.gpt_lld_stop,"ax",%progbits
 341              		.align	2
 342              		.p2align 4,,15
 343              		.global	gpt_lld_stop
 344              		.thumb
 345              		.thumb_func
 347              	gpt_lld_stop:
 348              	.LFB123:
 356:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 357:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** /**
 358:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @brief   Deactivates the GPT peripheral.
 359:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  *
 360:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @param[in] gptp      pointer to the @p GPTDriver object
 361:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  *
 362:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @notapi
 363:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  */
 364:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** void gpt_lld_stop(GPTDriver *gptp) {
 349              		.loc 1 364 0
 350              		.cfi_startproc
 351              		@ args = 0, pretend = 0, frame = 8
 352              		@ frame_needed = 0, uses_anonymous_args = 0
 353 0000 00B5     		push	{lr}
 354              		.cfi_def_cfa_offset 4
 355              		.cfi_offset 14, -4
 356 0002 83B0     		sub	sp, sp, #12
 357              		.cfi_def_cfa_offset 16
 358 0004 0190     		str	r0, [sp, #4]
 365:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 366:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   if (gptp->state == GPT_READY) {
 359              		.loc 1 366 0
 360 0006 019B     		ldr	r3, [sp, #4]
 361 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 362 000a 022B     		cmp	r3, #2
 363 000c 25D1     		bne	.L18
 367:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     gptp->tim->CR1  = 0;                    /* Timer disabled.              */
 364              		.loc 1 367 0
 365 000e 019B     		ldr	r3, [sp, #4]
 366 0010 DB68     		ldr	r3, [r3, #12]
 367 0012 0022     		movs	r2, #0
 368 0014 1A80     		strh	r2, [r3]	@ movhi
 368:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     gptp->tim->DIER = 0;                    /* All IRQs disabled.           */
 369              		.loc 1 368 0
 370 0016 019B     		ldr	r3, [sp, #4]
 371 0018 DB68     		ldr	r3, [r3, #12]
 372 001a 0022     		movs	r2, #0
 373 001c 9A81     		strh	r2, [r3, #12]	@ movhi
 369:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     gptp->tim->SR   = 0;                    /* Clear eventual pending IRQs. */
 374              		.loc 1 369 0
 375 001e 019B     		ldr	r3, [sp, #4]
 376 0020 DB68     		ldr	r3, [r3, #12]
 377 0022 0022     		movs	r2, #0
 378 0024 1A82     		strh	r2, [r3, #16]	@ movhi
 370:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 371:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #if STM32_GPT_USE_TIM1
 372:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     if (&GPTD1 == gptp) {
 379              		.loc 1 372 0
 380 0026 019A     		ldr	r2, [sp, #4]
 381 0028 0D4B     		ldr	r3, .L21
 382 002a 9A42     		cmp	r2, r3
 383 002c 08D1     		bne	.L20
 373:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****       nvicDisableVector(STM32_TIM1_UP_NUMBER);
 384              		.loc 1 373 0
 385 002e 1920     		movs	r0, #25
 386 0030 FFF7FEFF 		bl	nvicDisableVector
 374:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****       rccDisableTIM1(FALSE);
 387              		.loc 1 374 0
 388 0034 0B4B     		ldr	r3, .L21+4
 389 0036 0B4A     		ldr	r2, .L21+4
 390 0038 526C     		ldr	r2, [r2, #68]
 391 003a 22F00102 		bic	r2, r2, #1
 392 003e 5A64     		str	r2, [r3, #68]
 393              	.L20:
 375:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     }
 376:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #endif
 377:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #if STM32_GPT_USE_TIM2
 378:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     if (&GPTD2 == gptp) {
 394              		.loc 1 378 0
 395 0040 019A     		ldr	r2, [sp, #4]
 396 0042 094B     		ldr	r3, .L21+8
 397 0044 9A42     		cmp	r2, r3
 398 0046 08D1     		bne	.L18
 379:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****       nvicDisableVector(STM32_TIM2_NUMBER);
 399              		.loc 1 379 0
 400 0048 1C20     		movs	r0, #28
 401 004a FFF7FEFF 		bl	nvicDisableVector
 380:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****       rccDisableTIM2(FALSE);
 402              		.loc 1 380 0
 403 004e 054B     		ldr	r3, .L21+4
 404 0050 044A     		ldr	r2, .L21+4
 405 0052 126C     		ldr	r2, [r2, #64]
 406 0054 22F00102 		bic	r2, r2, #1
 407 0058 1A64     		str	r2, [r3, #64]
 408              	.L18:
 381:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     }
 382:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #endif
 383:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #if STM32_GPT_USE_TIM3
 384:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     if (&GPTD3 == gptp) {
 385:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****       nvicDisableVector(STM32_TIM3_NUMBER);
 386:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****       rccDisableTIM3(FALSE);
 387:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     }
 388:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #endif
 389:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #if STM32_GPT_USE_TIM4
 390:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     if (&GPTD4 == gptp) {
 391:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****       nvicDisableVector(STM32_TIM4_NUMBER);
 392:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****       rccDisableTIM4(FALSE);
 393:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     }
 394:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #endif
 395:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #if STM32_GPT_USE_TIM5
 396:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     if (&GPTD5 == gptp) {
 397:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****       nvicDisableVector(STM32_TIM5_NUMBER);
 398:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****       rccDisableTIM5(FALSE);
 399:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     }
 400:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #endif
 401:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #if STM32_GPT_USE_TIM8
 402:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     if (&GPTD8 == gptp) {
 403:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****       nvicDisableVector(STM32_TIM8_UP_NUMBER);
 404:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****       rccDisableTIM8(FALSE);
 405:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     }
 406:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** #endif
 407:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   }
 408:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** }
 409              		.loc 1 408 0
 410 005a 03B0     		add	sp, sp, #12
 411              		@ sp needed
 412 005c 5DF804FB 		ldr	pc, [sp], #4
 413              	.L22:
 414              		.align	2
 415              	.L21:
 416 0060 00000000 		.word	GPTD1
 417 0064 00380240 		.word	1073887232
 418 0068 00000000 		.word	GPTD2
 419              		.cfi_endproc
 420              	.LFE123:
 422 006c AFF30080 		.section	.text.gpt_lld_start_timer,"ax",%progbits
 423              		.align	2
 424              		.p2align 4,,15
 425              		.global	gpt_lld_start_timer
 426              		.thumb
 427              		.thumb_func
 429              	gpt_lld_start_timer:
 430              	.LFB124:
 409:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 410:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** /**
 411:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @brief   Starts the timer in continuous mode.
 412:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  *
 413:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @param[in] gptp      pointer to the @p GPTDriver object
 414:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @param[in] interval  period in ticks
 415:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  *
 416:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @notapi
 417:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  */
 418:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** void gpt_lld_start_timer(GPTDriver *gptp, gptcnt_t interval) {
 431              		.loc 1 418 0
 432              		.cfi_startproc
 433              		@ args = 0, pretend = 0, frame = 8
 434              		@ frame_needed = 0, uses_anonymous_args = 0
 435              		@ link register save eliminated.
 436 0000 82B0     		sub	sp, sp, #8
 437              		.cfi_def_cfa_offset 8
 438 0002 0190     		str	r0, [sp, #4]
 439 0004 0B46     		mov	r3, r1
 440 0006 ADF80230 		strh	r3, [sp, #2]	@ movhi
 419:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 420:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   gptp->tim->ARR  = interval - 1;           /* Time constant.               */
 441              		.loc 1 420 0
 442 000a 019B     		ldr	r3, [sp, #4]
 443 000c DB68     		ldr	r3, [r3, #12]
 444 000e BDF80220 		ldrh	r2, [sp, #2]
 445 0012 013A     		subs	r2, r2, #1
 446 0014 DA62     		str	r2, [r3, #44]
 421:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   gptp->tim->EGR  = TIM_EGR_UG;             /* Update event.                */
 447              		.loc 1 421 0
 448 0016 019B     		ldr	r3, [sp, #4]
 449 0018 DB68     		ldr	r3, [r3, #12]
 450 001a 0122     		movs	r2, #1
 451 001c 9A82     		strh	r2, [r3, #20]	@ movhi
 422:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   gptp->tim->CNT  = 0;                      /* Reset counter.               */
 452              		.loc 1 422 0
 453 001e 019B     		ldr	r3, [sp, #4]
 454 0020 DB68     		ldr	r3, [r3, #12]
 455 0022 0022     		movs	r2, #0
 456 0024 5A62     		str	r2, [r3, #36]
 423:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   /* NOTE: After generating the UG event it takes several clock cycles before
 424:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****      SR bit 0 goes to 1. This is because the clearing of CNT has been inserted
 425:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****      before the clearing of SR, to give it some time.*/
 426:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   gptp->tim->SR   = 0;                      /* Clear pending IRQs (if any). */
 457              		.loc 1 426 0
 458 0026 019B     		ldr	r3, [sp, #4]
 459 0028 DB68     		ldr	r3, [r3, #12]
 460 002a 0022     		movs	r2, #0
 461 002c 1A82     		strh	r2, [r3, #16]	@ movhi
 427:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   gptp->tim->DIER = TIM_DIER_UIE;           /* Update Event IRQ enabled.    */
 462              		.loc 1 427 0
 463 002e 019B     		ldr	r3, [sp, #4]
 464 0030 DB68     		ldr	r3, [r3, #12]
 465 0032 0122     		movs	r2, #1
 466 0034 9A81     		strh	r2, [r3, #12]	@ movhi
 428:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   gptp->tim->CR1  = TIM_CR1_URS | TIM_CR1_CEN;
 467              		.loc 1 428 0
 468 0036 019B     		ldr	r3, [sp, #4]
 469 0038 DB68     		ldr	r3, [r3, #12]
 470 003a 0522     		movs	r2, #5
 471 003c 1A80     		strh	r2, [r3]	@ movhi
 429:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** }
 472              		.loc 1 429 0
 473 003e 02B0     		add	sp, sp, #8
 474              		@ sp needed
 475 0040 7047     		bx	lr
 476              		.cfi_endproc
 477              	.LFE124:
 479 0042 00BFAFF3 		.section	.text.gpt_lld_stop_timer,"ax",%progbits
 479      0080AFF3 
 479      0080AFF3 
 479      0080
 480              		.align	2
 481              		.p2align 4,,15
 482              		.global	gpt_lld_stop_timer
 483              		.thumb
 484              		.thumb_func
 486              	gpt_lld_stop_timer:
 487              	.LFB125:
 430:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 431:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** /**
 432:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @brief   Stops the timer.
 433:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  *
 434:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @param[in] gptp      pointer to the @p GPTDriver object
 435:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  *
 436:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @notapi
 437:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  */
 438:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** void gpt_lld_stop_timer(GPTDriver *gptp) {
 488              		.loc 1 438 0
 489              		.cfi_startproc
 490              		@ args = 0, pretend = 0, frame = 8
 491              		@ frame_needed = 0, uses_anonymous_args = 0
 492              		@ link register save eliminated.
 493 0000 82B0     		sub	sp, sp, #8
 494              		.cfi_def_cfa_offset 8
 495 0002 0190     		str	r0, [sp, #4]
 439:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 440:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   gptp->tim->CR1  = 0;                      /* Initially stopped.           */
 496              		.loc 1 440 0
 497 0004 019B     		ldr	r3, [sp, #4]
 498 0006 DB68     		ldr	r3, [r3, #12]
 499 0008 0022     		movs	r2, #0
 500 000a 1A80     		strh	r2, [r3]	@ movhi
 441:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   gptp->tim->SR   = 0;                      /* Clear pending IRQs (if any). */
 501              		.loc 1 441 0
 502 000c 019B     		ldr	r3, [sp, #4]
 503 000e DB68     		ldr	r3, [r3, #12]
 504 0010 0022     		movs	r2, #0
 505 0012 1A82     		strh	r2, [r3, #16]	@ movhi
 442:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   gptp->tim->DIER = 0;                      /* Interrupts disabled.         */
 506              		.loc 1 442 0
 507 0014 019B     		ldr	r3, [sp, #4]
 508 0016 DB68     		ldr	r3, [r3, #12]
 509 0018 0022     		movs	r2, #0
 510 001a 9A81     		strh	r2, [r3, #12]	@ movhi
 443:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** }
 511              		.loc 1 443 0
 512 001c 02B0     		add	sp, sp, #8
 513              		@ sp needed
 514 001e 7047     		bx	lr
 515              		.cfi_endproc
 516              	.LFE125:
 518              		.section	.text.gpt_lld_polled_delay,"ax",%progbits
 519              		.align	2
 520              		.p2align 4,,15
 521              		.global	gpt_lld_polled_delay
 522              		.thumb
 523              		.thumb_func
 525              	gpt_lld_polled_delay:
 526              	.LFB126:
 444:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 445:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** /**
 446:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @brief   Starts the timer in one shot mode and waits for completion.
 447:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @details This function specifically polls the timer waiting for completion
 448:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  *          in order to not have extra delays caused by interrupt servicing,
 449:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  *          this function is only recommended for short delays.
 450:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  *
 451:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @param[in] gptp      pointer to the @p GPTDriver object
 452:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @param[in] interval  time interval in ticks
 453:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  *
 454:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  * @notapi
 455:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****  */
 456:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** void gpt_lld_polled_delay(GPTDriver *gptp, gptcnt_t interval) {
 527              		.loc 1 456 0
 528              		.cfi_startproc
 529              		@ args = 0, pretend = 0, frame = 8
 530              		@ frame_needed = 0, uses_anonymous_args = 0
 531              		@ link register save eliminated.
 532 0000 82B0     		sub	sp, sp, #8
 533              		.cfi_def_cfa_offset 8
 534 0002 0190     		str	r0, [sp, #4]
 535 0004 0B46     		mov	r3, r1
 536 0006 ADF80230 		strh	r3, [sp, #2]	@ movhi
 457:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** 
 458:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   gptp->tim->ARR  = interval - 1;           /* Time constant.               */
 537              		.loc 1 458 0
 538 000a 019B     		ldr	r3, [sp, #4]
 539 000c DB68     		ldr	r3, [r3, #12]
 540 000e BDF80220 		ldrh	r2, [sp, #2]
 541 0012 013A     		subs	r2, r2, #1
 542 0014 DA62     		str	r2, [r3, #44]
 459:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   gptp->tim->EGR  = TIM_EGR_UG;             /* Update event.                */
 543              		.loc 1 459 0
 544 0016 019B     		ldr	r3, [sp, #4]
 545 0018 DB68     		ldr	r3, [r3, #12]
 546 001a 0122     		movs	r2, #1
 547 001c 9A82     		strh	r2, [r3, #20]	@ movhi
 460:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   gptp->tim->SR   = 0;                      /* Clear pending IRQs (if any). */
 548              		.loc 1 460 0
 549 001e 019B     		ldr	r3, [sp, #4]
 550 0020 DB68     		ldr	r3, [r3, #12]
 551 0022 0022     		movs	r2, #0
 552 0024 1A82     		strh	r2, [r3, #16]	@ movhi
 461:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   gptp->tim->CR1  = TIM_CR1_OPM | TIM_CR1_URS | TIM_CR1_CEN;
 553              		.loc 1 461 0
 554 0026 019B     		ldr	r3, [sp, #4]
 555 0028 DB68     		ldr	r3, [r3, #12]
 556 002a 0D22     		movs	r2, #13
 557 002c 1A80     		strh	r2, [r3]	@ movhi
 462:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****   while (!(gptp->tim->SR & TIM_SR_UIF))
 558              		.loc 1 462 0
 559 002e 00BF     		nop
 560              	.L26:
 561              		.loc 1 462 0 is_stmt 0 discriminator 1
 562 0030 019B     		ldr	r3, [sp, #4]
 563 0032 DB68     		ldr	r3, [r3, #12]
 564 0034 1B8A     		ldrh	r3, [r3, #16]	@ movhi
 565 0036 9BB2     		uxth	r3, r3
 566 0038 03F00103 		and	r3, r3, #1
 567 003c 002B     		cmp	r3, #0
 568 003e F7D0     		beq	.L26
 463:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c ****     ;
 464:/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.c **** }
 569              		.loc 1 464 0 is_stmt 1
 570 0040 02B0     		add	sp, sp, #8
 571              		@ sp needed
 572 0042 7047     		bx	lr
 573              		.cfi_endproc
 574              	.LFE126:
 576 0044 AFF30080 		.text
 576      AFF30080 
 576      AFF30080 
 577              	.Letext0:
 578              		.file 2 "/usr/include/newlib/machine/_default_types.h"
 579              		.file 3 "/usr/include/newlib/stdint.h"
 580              		.file 4 "/usr/src/chibiostest/os/hal/platforms/STM32F4xx/stm32f4xx.h"
 581              		.file 5 "/usr/src/chibiostest/os/hal/platforms/STM32/stm32.h"
 582              		.file 6 "/usr/src/chibiostest/os/hal/include/gpt.h"
 583              		.file 7 "/usr/src/chibiostest/os/hal/platforms/STM32/gpt_lld.h"
 584              		.file 8 "/usr/src/chibiostest/os/ports/common/ARMCMx/CMSIS/include/core_cm4.h"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 gpt_lld.c
     /tmp/cc8cchIS.s:24     .bss.GPTD1:0000000000000000 GPTD1
     /tmp/cc8cchIS.s:21     .bss.GPTD1:0000000000000000 $d
     /tmp/cc8cchIS.s:31     .bss.GPTD2:0000000000000000 GPTD2
     /tmp/cc8cchIS.s:28     .bss.GPTD2:0000000000000000 $d
     /tmp/cc8cchIS.s:34     .text.gpt_lld_serve_interrupt:0000000000000000 $t
     /tmp/cc8cchIS.s:39     .text.gpt_lld_serve_interrupt:0000000000000000 gpt_lld_serve_interrupt
     /tmp/cc8cchIS.s:486    .text.gpt_lld_stop_timer:0000000000000000 gpt_lld_stop_timer
     /tmp/cc8cchIS.s:84     .text.VectorA4:0000000000000000 $t
     /tmp/cc8cchIS.s:90     .text.VectorA4:0000000000000000 VectorA4
     /tmp/cc8cchIS.s:113    .text.VectorA4:0000000000000018 $d
     /tmp/cc8cchIS.s:118    .text.VectorB0:0000000000000000 $t
     /tmp/cc8cchIS.s:124    .text.VectorB0:0000000000000000 VectorB0
     /tmp/cc8cchIS.s:147    .text.VectorB0:0000000000000018 $d
     /tmp/cc8cchIS.s:152    .text.gpt_lld_init:0000000000000000 $t
     /tmp/cc8cchIS.s:158    .text.gpt_lld_init:0000000000000000 gpt_lld_init
     /tmp/cc8cchIS.s:187    .text.gpt_lld_init:0000000000000020 $d
     /tmp/cc8cchIS.s:194    .rodata:0000000000000000 $d
     /tmp/cc8cchIS.s:198    .text.gpt_lld_start:0000000000000000 $t
     /tmp/cc8cchIS.s:204    .text.gpt_lld_start:0000000000000000 gpt_lld_start
     /tmp/cc8cchIS.s:331    .text.gpt_lld_start:00000000000000d4 $d
     /tmp/cc8cchIS.s:341    .text.gpt_lld_stop:0000000000000000 $t
     /tmp/cc8cchIS.s:347    .text.gpt_lld_stop:0000000000000000 gpt_lld_stop
     /tmp/cc8cchIS.s:416    .text.gpt_lld_stop:0000000000000060 $d
     /tmp/cc8cchIS.s:423    .text.gpt_lld_start_timer:0000000000000000 $t
     /tmp/cc8cchIS.s:429    .text.gpt_lld_start_timer:0000000000000000 gpt_lld_start_timer
     /tmp/cc8cchIS.s:480    .text.gpt_lld_stop_timer:0000000000000000 $t
     /tmp/cc8cchIS.s:519    .text.gpt_lld_polled_delay:0000000000000000 $t
     /tmp/cc8cchIS.s:525    .text.gpt_lld_polled_delay:0000000000000000 gpt_lld_polled_delay
                     .debug_frame:0000000000000010 $d
     /tmp/cc8cchIS.s:117    .text.VectorA4:000000000000001c $t
     /tmp/cc8cchIS.s:151    .text.VectorB0:000000000000001c $t
     /tmp/cc8cchIS.s:193    .text.gpt_lld_init:000000000000002c $t
     /tmp/cc8cchIS.s:340    .text.gpt_lld_start:00000000000000ec $t
     /tmp/cc8cchIS.s:422    .text.gpt_lld_stop:000000000000006c $t

UNDEFINED SYMBOLS
dbg_check_enter_isr
dbg_check_leave_isr
_port_irq_epilogue
gptObjectInit
nvicEnableVector
chDbgPanic
nvicDisableVector
