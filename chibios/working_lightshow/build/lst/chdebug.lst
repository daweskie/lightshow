   1              		.syntax unified
   2              		.cpu cortex-m4
   3              		.eabi_attribute 27, 3
   4              		.fpu fpv4-sp-d16
   5              		.eabi_attribute 20, 1
   6              		.eabi_attribute 21, 1
   7              		.eabi_attribute 23, 3
   8              		.eabi_attribute 24, 1
   9              		.eabi_attribute 25, 1
  10              		.eabi_attribute 26, 1
  11              		.eabi_attribute 30, 6
  12              		.eabi_attribute 34, 1
  13              		.eabi_attribute 18, 4
  14              		.thumb
  15              		.file	"chdebug.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.global	dbg_isr_cnt
  20              		.section	.bss.dbg_isr_cnt,"aw",%nobits
  21              		.align	2
  24              	dbg_isr_cnt:
  25 0000 00000000 		.space	4
  26              		.global	dbg_lock_cnt
  27              		.section	.bss.dbg_lock_cnt,"aw",%nobits
  28              		.align	2
  31              	dbg_lock_cnt:
  32 0000 00000000 		.space	4
  33              		.section	.rodata
  34              		.align	2
  35              	.LC0:
  36 0000 53562331 		.ascii	"SV#1\000"
  36      00
  37              		.section	.text.dbg_check_disable,"ax",%progbits
  38              		.align	2
  39              		.p2align 4,,15
  40              		.global	dbg_check_disable
  41              		.thumb
  42              		.thumb_func
  44              	dbg_check_disable:
  45              	.LFB7:
  46              		.file 1 "/usr/src/chibiostest/os/kernel/src/chdebug.c"
   1:/usr/src/chibiostest/os/kernel/src/chdebug.c **** /*
   2:/usr/src/chibiostest/os/kernel/src/chdebug.c ****     ChibiOS/RT - Copyright (C) 2006,2007,2008,2009,2010,
   3:/usr/src/chibiostest/os/kernel/src/chdebug.c ****                  2011,2012 Giovanni Di Sirio.
   4:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
   5:/usr/src/chibiostest/os/kernel/src/chdebug.c ****     This file is part of ChibiOS/RT.
   6:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
   7:/usr/src/chibiostest/os/kernel/src/chdebug.c ****     ChibiOS/RT is free software; you can redistribute it and/or modify
   8:/usr/src/chibiostest/os/kernel/src/chdebug.c ****     it under the terms of the GNU General Public License as published by
   9:/usr/src/chibiostest/os/kernel/src/chdebug.c ****     the Free Software Foundation; either version 3 of the License, or
  10:/usr/src/chibiostest/os/kernel/src/chdebug.c ****     (at your option) any later version.
  11:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
  12:/usr/src/chibiostest/os/kernel/src/chdebug.c ****     ChibiOS/RT is distributed in the hope that it will be useful,
  13:/usr/src/chibiostest/os/kernel/src/chdebug.c ****     but WITHOUT ANY WARRANTY; without even the implied warranty of
  14:/usr/src/chibiostest/os/kernel/src/chdebug.c ****     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  15:/usr/src/chibiostest/os/kernel/src/chdebug.c ****     GNU General Public License for more details.
  16:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
  17:/usr/src/chibiostest/os/kernel/src/chdebug.c ****     You should have received a copy of the GNU General Public License
  18:/usr/src/chibiostest/os/kernel/src/chdebug.c ****     along with this program.  If not, see <http://www.gnu.org/licenses/>.
  19:/usr/src/chibiostest/os/kernel/src/chdebug.c **** */
  20:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
  21:/usr/src/chibiostest/os/kernel/src/chdebug.c **** /**
  22:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @file    chdebug.c
  23:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @brief   ChibiOS/RT Debug code.
  24:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *
  25:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @addtogroup debug
  26:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @details Debug APIs and services:
  27:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *          - Runtime system state and call protocol check. The following
  28:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *            panic messages can be generated:
  29:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *            - SV#1, misplaced @p chSysDisable().
  30:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *            - SV#2, misplaced @p chSysSuspend()
  31:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *            - SV#3, misplaced @p chSysEnable().
  32:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *            - SV#4, misplaced @p chSysLock().
  33:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *            - SV#5, misplaced @p chSysUnlock().
  34:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *            - SV#6, misplaced @p chSysLockFromIsr().
  35:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *            - SV#7, misplaced @p chSysUnlockFromIsr().
  36:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *            - SV#8, misplaced @p CH_IRQ_PROLOGUE().
  37:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *            - SV#9, misplaced @p CH_IRQ_EPILOGUE().
  38:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *            - SV#10, misplaced I-class function.
  39:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *            - SV#11, misplaced S-class function.
  40:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *            .
  41:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *          - Trace buffer.
  42:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *          - Parameters check.
  43:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *          - Kernel assertions.
  44:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *          - Kernel panics.
  45:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *          .
  46:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @note    Stack checks are not implemented in this module but in the port
  47:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *          layer in an architecture-dependent way.
  48:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @{
  49:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  */
  50:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
  51:/usr/src/chibiostest/os/kernel/src/chdebug.c **** #include "ch.h"
  52:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
  53:/usr/src/chibiostest/os/kernel/src/chdebug.c **** /*===========================================================================*/
  54:/usr/src/chibiostest/os/kernel/src/chdebug.c **** /* System state checker related code and variables.                          */
  55:/usr/src/chibiostest/os/kernel/src/chdebug.c **** /*===========================================================================*/
  56:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
  57:/usr/src/chibiostest/os/kernel/src/chdebug.c **** #if CH_DBG_SYSTEM_STATE_CHECK || defined(__DOXYGEN__)
  58:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
  59:/usr/src/chibiostest/os/kernel/src/chdebug.c **** /**
  60:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @brief   ISR nesting level.
  61:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  */
  62:/usr/src/chibiostest/os/kernel/src/chdebug.c **** cnt_t dbg_isr_cnt;
  63:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
  64:/usr/src/chibiostest/os/kernel/src/chdebug.c **** /**
  65:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @brief   Lock nesting level.
  66:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  */
  67:/usr/src/chibiostest/os/kernel/src/chdebug.c **** cnt_t dbg_lock_cnt;
  68:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
  69:/usr/src/chibiostest/os/kernel/src/chdebug.c **** /**
  70:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @brief   Guard code for @p chSysDisable().
  71:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *
  72:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @notapi
  73:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  */
  74:/usr/src/chibiostest/os/kernel/src/chdebug.c **** void dbg_check_disable(void) {
  47              		.loc 1 74 0
  48              		.cfi_startproc
  49              		@ args = 0, pretend = 0, frame = 0
  50              		@ frame_needed = 0, uses_anonymous_args = 0
  51 0000 08B5     		push	{r3, lr}
  52              		.cfi_def_cfa_offset 8
  53              		.cfi_offset 3, -8
  54              		.cfi_offset 14, -4
  75:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
  76:/usr/src/chibiostest/os/kernel/src/chdebug.c ****   if ((dbg_isr_cnt != 0) || (dbg_lock_cnt != 0))
  55              		.loc 1 76 0
  56 0002 064B     		ldr	r3, .L4
  57 0004 1B68     		ldr	r3, [r3]
  58 0006 002B     		cmp	r3, #0
  59 0008 03D1     		bne	.L2
  60              		.loc 1 76 0 is_stmt 0 discriminator 1
  61 000a 054B     		ldr	r3, .L4+4
  62 000c 1B68     		ldr	r3, [r3]
  63 000e 002B     		cmp	r3, #0
  64 0010 02D0     		beq	.L1
  65              	.L2:
  77:/usr/src/chibiostest/os/kernel/src/chdebug.c ****     chDbgPanic("SV#1");
  66              		.loc 1 77 0 is_stmt 1
  67 0012 0448     		ldr	r0, .L4+8
  68 0014 FFF7FEFF 		bl	chDbgPanic
  69              	.L1:
  78:/usr/src/chibiostest/os/kernel/src/chdebug.c **** }
  70              		.loc 1 78 0
  71 0018 08BD     		pop	{r3, pc}
  72              	.L5:
  73 001a 00BF     		.align	2
  74              	.L4:
  75 001c 00000000 		.word	dbg_isr_cnt
  76 0020 00000000 		.word	dbg_lock_cnt
  77 0024 00000000 		.word	.LC0
  78              		.cfi_endproc
  79              	.LFE7:
  81 0028 AFF30080 		.section	.rodata
  81      AFF30080 
  82 0005 000000   		.align	2
  83              	.LC1:
  84 0008 53562332 		.ascii	"SV#2\000"
  84      00
  85              		.section	.text.dbg_check_suspend,"ax",%progbits
  86              		.align	2
  87              		.p2align 4,,15
  88              		.global	dbg_check_suspend
  89              		.thumb
  90              		.thumb_func
  92              	dbg_check_suspend:
  93              	.LFB8:
  79:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
  80:/usr/src/chibiostest/os/kernel/src/chdebug.c **** /**
  81:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @brief   Guard code for @p chSysSuspend().
  82:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *
  83:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @notapi
  84:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  */
  85:/usr/src/chibiostest/os/kernel/src/chdebug.c **** void dbg_check_suspend(void) {
  94              		.loc 1 85 0
  95              		.cfi_startproc
  96              		@ args = 0, pretend = 0, frame = 0
  97              		@ frame_needed = 0, uses_anonymous_args = 0
  98 0000 08B5     		push	{r3, lr}
  99              		.cfi_def_cfa_offset 8
 100              		.cfi_offset 3, -8
 101              		.cfi_offset 14, -4
  86:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
  87:/usr/src/chibiostest/os/kernel/src/chdebug.c ****   if ((dbg_isr_cnt != 0) || (dbg_lock_cnt != 0))
 102              		.loc 1 87 0
 103 0002 064B     		ldr	r3, .L9
 104 0004 1B68     		ldr	r3, [r3]
 105 0006 002B     		cmp	r3, #0
 106 0008 03D1     		bne	.L7
 107              		.loc 1 87 0 is_stmt 0 discriminator 1
 108 000a 054B     		ldr	r3, .L9+4
 109 000c 1B68     		ldr	r3, [r3]
 110 000e 002B     		cmp	r3, #0
 111 0010 02D0     		beq	.L6
 112              	.L7:
  88:/usr/src/chibiostest/os/kernel/src/chdebug.c ****     chDbgPanic("SV#2");
 113              		.loc 1 88 0 is_stmt 1
 114 0012 0448     		ldr	r0, .L9+8
 115 0014 FFF7FEFF 		bl	chDbgPanic
 116              	.L6:
  89:/usr/src/chibiostest/os/kernel/src/chdebug.c **** }
 117              		.loc 1 89 0
 118 0018 08BD     		pop	{r3, pc}
 119              	.L10:
 120 001a 00BF     		.align	2
 121              	.L9:
 122 001c 00000000 		.word	dbg_isr_cnt
 123 0020 00000000 		.word	dbg_lock_cnt
 124 0024 08000000 		.word	.LC1
 125              		.cfi_endproc
 126              	.LFE8:
 128 0028 AFF30080 		.section	.rodata
 128      AFF30080 
 129 000d 000000   		.align	2
 130              	.LC2:
 131 0010 53562333 		.ascii	"SV#3\000"
 131      00
 132              		.section	.text.dbg_check_enable,"ax",%progbits
 133              		.align	2
 134              		.p2align 4,,15
 135              		.global	dbg_check_enable
 136              		.thumb
 137              		.thumb_func
 139              	dbg_check_enable:
 140              	.LFB9:
  90:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
  91:/usr/src/chibiostest/os/kernel/src/chdebug.c **** /**
  92:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @brief   Guard code for @p chSysEnable().
  93:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *
  94:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @notapi
  95:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  */
  96:/usr/src/chibiostest/os/kernel/src/chdebug.c **** void dbg_check_enable(void) {
 141              		.loc 1 96 0
 142              		.cfi_startproc
 143              		@ args = 0, pretend = 0, frame = 0
 144              		@ frame_needed = 0, uses_anonymous_args = 0
 145 0000 08B5     		push	{r3, lr}
 146              		.cfi_def_cfa_offset 8
 147              		.cfi_offset 3, -8
 148              		.cfi_offset 14, -4
  97:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
  98:/usr/src/chibiostest/os/kernel/src/chdebug.c ****   if ((dbg_isr_cnt != 0) || (dbg_lock_cnt != 0))
 149              		.loc 1 98 0
 150 0002 064B     		ldr	r3, .L14
 151 0004 1B68     		ldr	r3, [r3]
 152 0006 002B     		cmp	r3, #0
 153 0008 03D1     		bne	.L12
 154              		.loc 1 98 0 is_stmt 0 discriminator 1
 155 000a 054B     		ldr	r3, .L14+4
 156 000c 1B68     		ldr	r3, [r3]
 157 000e 002B     		cmp	r3, #0
 158 0010 02D0     		beq	.L11
 159              	.L12:
  99:/usr/src/chibiostest/os/kernel/src/chdebug.c ****     chDbgPanic("SV#3");
 160              		.loc 1 99 0 is_stmt 1
 161 0012 0448     		ldr	r0, .L14+8
 162 0014 FFF7FEFF 		bl	chDbgPanic
 163              	.L11:
 100:/usr/src/chibiostest/os/kernel/src/chdebug.c **** }
 164              		.loc 1 100 0
 165 0018 08BD     		pop	{r3, pc}
 166              	.L15:
 167 001a 00BF     		.align	2
 168              	.L14:
 169 001c 00000000 		.word	dbg_isr_cnt
 170 0020 00000000 		.word	dbg_lock_cnt
 171 0024 10000000 		.word	.LC2
 172              		.cfi_endproc
 173              	.LFE9:
 175 0028 AFF30080 		.section	.rodata
 175      AFF30080 
 176 0015 000000   		.align	2
 177              	.LC3:
 178 0018 53562334 		.ascii	"SV#4\000"
 178      00
 179              		.section	.text.dbg_check_lock,"ax",%progbits
 180              		.align	2
 181              		.p2align 4,,15
 182              		.global	dbg_check_lock
 183              		.thumb
 184              		.thumb_func
 186              	dbg_check_lock:
 187              	.LFB10:
 101:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
 102:/usr/src/chibiostest/os/kernel/src/chdebug.c **** /**
 103:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @brief   Guard code for @p chSysLock().
 104:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *
 105:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @notapi
 106:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  */
 107:/usr/src/chibiostest/os/kernel/src/chdebug.c **** void dbg_check_lock(void) {
 188              		.loc 1 107 0
 189              		.cfi_startproc
 190              		@ args = 0, pretend = 0, frame = 0
 191              		@ frame_needed = 0, uses_anonymous_args = 0
 192 0000 08B5     		push	{r3, lr}
 193              		.cfi_def_cfa_offset 8
 194              		.cfi_offset 3, -8
 195              		.cfi_offset 14, -4
 108:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
 109:/usr/src/chibiostest/os/kernel/src/chdebug.c ****   if ((dbg_isr_cnt != 0) || (dbg_lock_cnt != 0))
 196              		.loc 1 109 0
 197 0002 074B     		ldr	r3, .L19
 198 0004 1B68     		ldr	r3, [r3]
 199 0006 002B     		cmp	r3, #0
 200 0008 03D1     		bne	.L17
 201              		.loc 1 109 0 is_stmt 0 discriminator 1
 202 000a 064B     		ldr	r3, .L19+4
 203 000c 1B68     		ldr	r3, [r3]
 204 000e 002B     		cmp	r3, #0
 205 0010 02D0     		beq	.L18
 206              	.L17:
 110:/usr/src/chibiostest/os/kernel/src/chdebug.c ****     chDbgPanic("SV#4");
 207              		.loc 1 110 0 is_stmt 1
 208 0012 0548     		ldr	r0, .L19+8
 209 0014 FFF7FEFF 		bl	chDbgPanic
 210              	.L18:
 111:/usr/src/chibiostest/os/kernel/src/chdebug.c ****   dbg_enter_lock();
 211              		.loc 1 111 0
 212 0018 024B     		ldr	r3, .L19+4
 213 001a 0122     		movs	r2, #1
 214 001c 1A60     		str	r2, [r3]
 112:/usr/src/chibiostest/os/kernel/src/chdebug.c **** }
 215              		.loc 1 112 0
 216 001e 08BD     		pop	{r3, pc}
 217              	.L20:
 218              		.align	2
 219              	.L19:
 220 0020 00000000 		.word	dbg_isr_cnt
 221 0024 00000000 		.word	dbg_lock_cnt
 222 0028 18000000 		.word	.LC3
 223              		.cfi_endproc
 224              	.LFE10:
 226 002c AFF30080 		.section	.rodata
 227 001d 000000   		.align	2
 228              	.LC4:
 229 0020 53562335 		.ascii	"SV#5\000"
 229      00
 230              		.section	.text.dbg_check_unlock,"ax",%progbits
 231              		.align	2
 232              		.p2align 4,,15
 233              		.global	dbg_check_unlock
 234              		.thumb
 235              		.thumb_func
 237              	dbg_check_unlock:
 238              	.LFB11:
 113:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
 114:/usr/src/chibiostest/os/kernel/src/chdebug.c **** /**
 115:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @brief   Guard code for @p chSysUnlock().
 116:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *
 117:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @notapi
 118:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  */
 119:/usr/src/chibiostest/os/kernel/src/chdebug.c **** void dbg_check_unlock(void) {
 239              		.loc 1 119 0
 240              		.cfi_startproc
 241              		@ args = 0, pretend = 0, frame = 0
 242              		@ frame_needed = 0, uses_anonymous_args = 0
 243 0000 08B5     		push	{r3, lr}
 244              		.cfi_def_cfa_offset 8
 245              		.cfi_offset 3, -8
 246              		.cfi_offset 14, -4
 120:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
 121:/usr/src/chibiostest/os/kernel/src/chdebug.c ****   if ((dbg_isr_cnt != 0) || (dbg_lock_cnt <= 0))
 247              		.loc 1 121 0
 248 0002 074B     		ldr	r3, .L24
 249 0004 1B68     		ldr	r3, [r3]
 250 0006 002B     		cmp	r3, #0
 251 0008 03D1     		bne	.L22
 252              		.loc 1 121 0 is_stmt 0 discriminator 1
 253 000a 064B     		ldr	r3, .L24+4
 254 000c 1B68     		ldr	r3, [r3]
 255 000e 002B     		cmp	r3, #0
 256 0010 02DC     		bgt	.L23
 257              	.L22:
 122:/usr/src/chibiostest/os/kernel/src/chdebug.c ****     chDbgPanic("SV#5");
 258              		.loc 1 122 0 is_stmt 1
 259 0012 0548     		ldr	r0, .L24+8
 260 0014 FFF7FEFF 		bl	chDbgPanic
 261              	.L23:
 123:/usr/src/chibiostest/os/kernel/src/chdebug.c ****   dbg_leave_lock();
 262              		.loc 1 123 0
 263 0018 024B     		ldr	r3, .L24+4
 264 001a 0022     		movs	r2, #0
 265 001c 1A60     		str	r2, [r3]
 124:/usr/src/chibiostest/os/kernel/src/chdebug.c **** }
 266              		.loc 1 124 0
 267 001e 08BD     		pop	{r3, pc}
 268              	.L25:
 269              		.align	2
 270              	.L24:
 271 0020 00000000 		.word	dbg_isr_cnt
 272 0024 00000000 		.word	dbg_lock_cnt
 273 0028 20000000 		.word	.LC4
 274              		.cfi_endproc
 275              	.LFE11:
 277 002c AFF30080 		.section	.rodata
 278 0025 000000   		.align	2
 279              	.LC5:
 280 0028 53562336 		.ascii	"SV#6\000"
 280      00
 281              		.section	.text.dbg_check_lock_from_isr,"ax",%progbits
 282              		.align	2
 283              		.p2align 4,,15
 284              		.global	dbg_check_lock_from_isr
 285              		.thumb
 286              		.thumb_func
 288              	dbg_check_lock_from_isr:
 289              	.LFB12:
 125:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
 126:/usr/src/chibiostest/os/kernel/src/chdebug.c **** /**
 127:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @brief   Guard code for @p chSysLockFromIsr().
 128:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *
 129:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @notapi
 130:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  */
 131:/usr/src/chibiostest/os/kernel/src/chdebug.c **** void dbg_check_lock_from_isr(void) {
 290              		.loc 1 131 0
 291              		.cfi_startproc
 292              		@ args = 0, pretend = 0, frame = 0
 293              		@ frame_needed = 0, uses_anonymous_args = 0
 294 0000 08B5     		push	{r3, lr}
 295              		.cfi_def_cfa_offset 8
 296              		.cfi_offset 3, -8
 297              		.cfi_offset 14, -4
 132:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
 133:/usr/src/chibiostest/os/kernel/src/chdebug.c ****   if ((dbg_isr_cnt <= 0) || (dbg_lock_cnt != 0))
 298              		.loc 1 133 0
 299 0002 074B     		ldr	r3, .L29
 300 0004 1B68     		ldr	r3, [r3]
 301 0006 002B     		cmp	r3, #0
 302 0008 03DD     		ble	.L27
 303              		.loc 1 133 0 is_stmt 0 discriminator 1
 304 000a 064B     		ldr	r3, .L29+4
 305 000c 1B68     		ldr	r3, [r3]
 306 000e 002B     		cmp	r3, #0
 307 0010 02D0     		beq	.L28
 308              	.L27:
 134:/usr/src/chibiostest/os/kernel/src/chdebug.c ****     chDbgPanic("SV#6");
 309              		.loc 1 134 0 is_stmt 1
 310 0012 0548     		ldr	r0, .L29+8
 311 0014 FFF7FEFF 		bl	chDbgPanic
 312              	.L28:
 135:/usr/src/chibiostest/os/kernel/src/chdebug.c ****   dbg_enter_lock();
 313              		.loc 1 135 0
 314 0018 024B     		ldr	r3, .L29+4
 315 001a 0122     		movs	r2, #1
 316 001c 1A60     		str	r2, [r3]
 136:/usr/src/chibiostest/os/kernel/src/chdebug.c **** }
 317              		.loc 1 136 0
 318 001e 08BD     		pop	{r3, pc}
 319              	.L30:
 320              		.align	2
 321              	.L29:
 322 0020 00000000 		.word	dbg_isr_cnt
 323 0024 00000000 		.word	dbg_lock_cnt
 324 0028 28000000 		.word	.LC5
 325              		.cfi_endproc
 326              	.LFE12:
 328 002c AFF30080 		.section	.rodata
 329 002d 000000   		.align	2
 330              	.LC6:
 331 0030 53562337 		.ascii	"SV#7\000"
 331      00
 332              		.section	.text.dbg_check_unlock_from_isr,"ax",%progbits
 333              		.align	2
 334              		.p2align 4,,15
 335              		.global	dbg_check_unlock_from_isr
 336              		.thumb
 337              		.thumb_func
 339              	dbg_check_unlock_from_isr:
 340              	.LFB13:
 137:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
 138:/usr/src/chibiostest/os/kernel/src/chdebug.c **** /**
 139:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @brief   Guard code for @p chSysUnlockFromIsr().
 140:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *
 141:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @notapi
 142:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  */
 143:/usr/src/chibiostest/os/kernel/src/chdebug.c **** void dbg_check_unlock_from_isr(void) {
 341              		.loc 1 143 0
 342              		.cfi_startproc
 343              		@ args = 0, pretend = 0, frame = 0
 344              		@ frame_needed = 0, uses_anonymous_args = 0
 345 0000 08B5     		push	{r3, lr}
 346              		.cfi_def_cfa_offset 8
 347              		.cfi_offset 3, -8
 348              		.cfi_offset 14, -4
 144:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
 145:/usr/src/chibiostest/os/kernel/src/chdebug.c ****   if ((dbg_isr_cnt <= 0) || (dbg_lock_cnt <= 0))
 349              		.loc 1 145 0
 350 0002 074B     		ldr	r3, .L34
 351 0004 1B68     		ldr	r3, [r3]
 352 0006 002B     		cmp	r3, #0
 353 0008 03DD     		ble	.L32
 354              		.loc 1 145 0 is_stmt 0 discriminator 1
 355 000a 064B     		ldr	r3, .L34+4
 356 000c 1B68     		ldr	r3, [r3]
 357 000e 002B     		cmp	r3, #0
 358 0010 02DC     		bgt	.L33
 359              	.L32:
 146:/usr/src/chibiostest/os/kernel/src/chdebug.c ****     chDbgPanic("SV#7");
 360              		.loc 1 146 0 is_stmt 1
 361 0012 0548     		ldr	r0, .L34+8
 362 0014 FFF7FEFF 		bl	chDbgPanic
 363              	.L33:
 147:/usr/src/chibiostest/os/kernel/src/chdebug.c ****   dbg_leave_lock();
 364              		.loc 1 147 0
 365 0018 024B     		ldr	r3, .L34+4
 366 001a 0022     		movs	r2, #0
 367 001c 1A60     		str	r2, [r3]
 148:/usr/src/chibiostest/os/kernel/src/chdebug.c **** }
 368              		.loc 1 148 0
 369 001e 08BD     		pop	{r3, pc}
 370              	.L35:
 371              		.align	2
 372              	.L34:
 373 0020 00000000 		.word	dbg_isr_cnt
 374 0024 00000000 		.word	dbg_lock_cnt
 375 0028 30000000 		.word	.LC6
 376              		.cfi_endproc
 377              	.LFE13:
 379 002c AFF30080 		.section	.rodata
 380 0035 000000   		.align	2
 381              	.LC7:
 382 0038 53562338 		.ascii	"SV#8\000"
 382      00
 383              		.section	.text.dbg_check_enter_isr,"ax",%progbits
 384              		.align	2
 385              		.p2align 4,,15
 386              		.global	dbg_check_enter_isr
 387              		.thumb
 388              		.thumb_func
 390              	dbg_check_enter_isr:
 391              	.LFB14:
 149:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
 150:/usr/src/chibiostest/os/kernel/src/chdebug.c **** /**
 151:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @brief   Guard code for @p CH_IRQ_PROLOGUE().
 152:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *
 153:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @notapi
 154:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  */
 155:/usr/src/chibiostest/os/kernel/src/chdebug.c **** void dbg_check_enter_isr(void) {
 392              		.loc 1 155 0
 393              		.cfi_startproc
 394              		@ args = 0, pretend = 0, frame = 0
 395              		@ frame_needed = 0, uses_anonymous_args = 0
 396 0000 08B5     		push	{r3, lr}
 397              		.cfi_def_cfa_offset 8
 398              		.cfi_offset 3, -8
 399              		.cfi_offset 14, -4
 400              	.LBB2:
 156:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
 157:/usr/src/chibiostest/os/kernel/src/chdebug.c ****   port_lock_from_isr();
 401              		.loc 1 157 0
 402 0002 2023     		movs	r3, #32
 403              	@ 157 "/usr/src/chibiostest/os/kernel/src/chdebug.c" 1
 404 0004 83F31188 		msr     BASEPRI, r3
 405              	@ 0 "" 2
 406              		.thumb
 407              	.LBE2:
 158:/usr/src/chibiostest/os/kernel/src/chdebug.c ****   if ((dbg_isr_cnt < 0) || (dbg_lock_cnt != 0))
 408              		.loc 1 158 0
 409 0008 094B     		ldr	r3, .L39
 410 000a 1B68     		ldr	r3, [r3]
 411 000c 002B     		cmp	r3, #0
 412 000e 03DB     		blt	.L37
 413              		.loc 1 158 0 is_stmt 0 discriminator 1
 414 0010 084B     		ldr	r3, .L39+4
 415 0012 1B68     		ldr	r3, [r3]
 416 0014 002B     		cmp	r3, #0
 417 0016 02D0     		beq	.L38
 418              	.L37:
 159:/usr/src/chibiostest/os/kernel/src/chdebug.c ****     chDbgPanic("SV#8");
 419              		.loc 1 159 0 is_stmt 1
 420 0018 0748     		ldr	r0, .L39+8
 421 001a FFF7FEFF 		bl	chDbgPanic
 422              	.L38:
 160:/usr/src/chibiostest/os/kernel/src/chdebug.c ****   dbg_isr_cnt++;
 423              		.loc 1 160 0
 424 001e 044B     		ldr	r3, .L39
 425 0020 1B68     		ldr	r3, [r3]
 426 0022 5A1C     		adds	r2, r3, #1
 427 0024 024B     		ldr	r3, .L39
 428 0026 1A60     		str	r2, [r3]
 429              	.LBB3:
 161:/usr/src/chibiostest/os/kernel/src/chdebug.c ****   port_unlock_from_isr();
 430              		.loc 1 161 0
 431 0028 0023     		movs	r3, #0
 432              	@ 161 "/usr/src/chibiostest/os/kernel/src/chdebug.c" 1
 433 002a 83F31188 		msr     BASEPRI, r3
 434              	@ 0 "" 2
 435              		.thumb
 436              	.LBE3:
 162:/usr/src/chibiostest/os/kernel/src/chdebug.c **** }
 437              		.loc 1 162 0
 438 002e 08BD     		pop	{r3, pc}
 439              	.L40:
 440              		.align	2
 441              	.L39:
 442 0030 00000000 		.word	dbg_isr_cnt
 443 0034 00000000 		.word	dbg_lock_cnt
 444 0038 38000000 		.word	.LC7
 445              		.cfi_endproc
 446              	.LFE14:
 448 003c AFF30080 		.section	.rodata
 449 003d 000000   		.align	2
 450              	.LC8:
 451 0040 53562339 		.ascii	"SV#9\000"
 451      00
 452              		.section	.text.dbg_check_leave_isr,"ax",%progbits
 453              		.align	2
 454              		.p2align 4,,15
 455              		.global	dbg_check_leave_isr
 456              		.thumb
 457              		.thumb_func
 459              	dbg_check_leave_isr:
 460              	.LFB15:
 163:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
 164:/usr/src/chibiostest/os/kernel/src/chdebug.c **** /**
 165:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @brief   Guard code for @p CH_IRQ_EPILOGUE().
 166:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *
 167:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @notapi
 168:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  */
 169:/usr/src/chibiostest/os/kernel/src/chdebug.c **** void dbg_check_leave_isr(void) {
 461              		.loc 1 169 0
 462              		.cfi_startproc
 463              		@ args = 0, pretend = 0, frame = 0
 464              		@ frame_needed = 0, uses_anonymous_args = 0
 465 0000 08B5     		push	{r3, lr}
 466              		.cfi_def_cfa_offset 8
 467              		.cfi_offset 3, -8
 468              		.cfi_offset 14, -4
 469              	.LBB4:
 170:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
 171:/usr/src/chibiostest/os/kernel/src/chdebug.c ****   port_lock_from_isr();
 470              		.loc 1 171 0
 471 0002 2023     		movs	r3, #32
 472              	@ 171 "/usr/src/chibiostest/os/kernel/src/chdebug.c" 1
 473 0004 83F31188 		msr     BASEPRI, r3
 474              	@ 0 "" 2
 475              		.thumb
 476              	.LBE4:
 172:/usr/src/chibiostest/os/kernel/src/chdebug.c ****   if ((dbg_isr_cnt <= 0) || (dbg_lock_cnt != 0))
 477              		.loc 1 172 0
 478 0008 094B     		ldr	r3, .L44
 479 000a 1B68     		ldr	r3, [r3]
 480 000c 002B     		cmp	r3, #0
 481 000e 03DD     		ble	.L42
 482              		.loc 1 172 0 is_stmt 0 discriminator 1
 483 0010 084B     		ldr	r3, .L44+4
 484 0012 1B68     		ldr	r3, [r3]
 485 0014 002B     		cmp	r3, #0
 486 0016 02D0     		beq	.L43
 487              	.L42:
 173:/usr/src/chibiostest/os/kernel/src/chdebug.c ****     chDbgPanic("SV#9");
 488              		.loc 1 173 0 is_stmt 1
 489 0018 0748     		ldr	r0, .L44+8
 490 001a FFF7FEFF 		bl	chDbgPanic
 491              	.L43:
 174:/usr/src/chibiostest/os/kernel/src/chdebug.c ****   dbg_isr_cnt--;
 492              		.loc 1 174 0
 493 001e 044B     		ldr	r3, .L44
 494 0020 1B68     		ldr	r3, [r3]
 495 0022 5A1E     		subs	r2, r3, #1
 496 0024 024B     		ldr	r3, .L44
 497 0026 1A60     		str	r2, [r3]
 498              	.LBB5:
 175:/usr/src/chibiostest/os/kernel/src/chdebug.c ****   port_unlock_from_isr();
 499              		.loc 1 175 0
 500 0028 0023     		movs	r3, #0
 501              	@ 175 "/usr/src/chibiostest/os/kernel/src/chdebug.c" 1
 502 002a 83F31188 		msr     BASEPRI, r3
 503              	@ 0 "" 2
 504              		.thumb
 505              	.LBE5:
 176:/usr/src/chibiostest/os/kernel/src/chdebug.c **** }
 506              		.loc 1 176 0
 507 002e 08BD     		pop	{r3, pc}
 508              	.L45:
 509              		.align	2
 510              	.L44:
 511 0030 00000000 		.word	dbg_isr_cnt
 512 0034 00000000 		.word	dbg_lock_cnt
 513 0038 40000000 		.word	.LC8
 514              		.cfi_endproc
 515              	.LFE15:
 517 003c AFF30080 		.section	.rodata
 518 0045 000000   		.align	2
 519              	.LC9:
 520 0048 53562331 		.ascii	"SV#10\000"
 520      3000
 521              		.section	.text.chDbgCheckClassI,"ax",%progbits
 522              		.align	2
 523              		.p2align 4,,15
 524              		.global	chDbgCheckClassI
 525              		.thumb
 526              		.thumb_func
 528              	chDbgCheckClassI:
 529              	.LFB16:
 177:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
 178:/usr/src/chibiostest/os/kernel/src/chdebug.c **** /**
 179:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @brief   I-class functions context check.
 180:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @details Verifies that the system is in an appropriate state for invoking
 181:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *          an I-class API function. A panic is generated if the state is
 182:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *          not compatible.
 183:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *
 184:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @api
 185:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  */
 186:/usr/src/chibiostest/os/kernel/src/chdebug.c **** void chDbgCheckClassI(void) {
 530              		.loc 1 186 0
 531              		.cfi_startproc
 532              		@ args = 0, pretend = 0, frame = 0
 533              		@ frame_needed = 0, uses_anonymous_args = 0
 534 0000 08B5     		push	{r3, lr}
 535              		.cfi_def_cfa_offset 8
 536              		.cfi_offset 3, -8
 537              		.cfi_offset 14, -4
 187:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
 188:/usr/src/chibiostest/os/kernel/src/chdebug.c ****   if ((dbg_isr_cnt < 0) || (dbg_lock_cnt <= 0))
 538              		.loc 1 188 0
 539 0002 064B     		ldr	r3, .L49
 540 0004 1B68     		ldr	r3, [r3]
 541 0006 002B     		cmp	r3, #0
 542 0008 03DB     		blt	.L47
 543              		.loc 1 188 0 is_stmt 0 discriminator 1
 544 000a 054B     		ldr	r3, .L49+4
 545 000c 1B68     		ldr	r3, [r3]
 546 000e 002B     		cmp	r3, #0
 547 0010 02DC     		bgt	.L46
 548              	.L47:
 189:/usr/src/chibiostest/os/kernel/src/chdebug.c ****     chDbgPanic("SV#10");
 549              		.loc 1 189 0 is_stmt 1
 550 0012 0448     		ldr	r0, .L49+8
 551 0014 FFF7FEFF 		bl	chDbgPanic
 552              	.L46:
 190:/usr/src/chibiostest/os/kernel/src/chdebug.c **** }
 553              		.loc 1 190 0
 554 0018 08BD     		pop	{r3, pc}
 555              	.L50:
 556 001a 00BF     		.align	2
 557              	.L49:
 558 001c 00000000 		.word	dbg_isr_cnt
 559 0020 00000000 		.word	dbg_lock_cnt
 560 0024 48000000 		.word	.LC9
 561              		.cfi_endproc
 562              	.LFE16:
 564 0028 AFF30080 		.section	.rodata
 564      AFF30080 
 565 004e 0000     		.align	2
 566              	.LC10:
 567 0050 53562331 		.ascii	"SV#11\000"
 567      3100
 568 0056 0000     		.section	.text.chDbgCheckClassS,"ax",%progbits
 569              		.align	2
 570              		.p2align 4,,15
 571              		.global	chDbgCheckClassS
 572              		.thumb
 573              		.thumb_func
 575              	chDbgCheckClassS:
 576              	.LFB17:
 191:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
 192:/usr/src/chibiostest/os/kernel/src/chdebug.c **** /**
 193:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @brief   S-class functions context check.
 194:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @details Verifies that the system is in an appropriate state for invoking
 195:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *          an S-class API function. A panic is generated if the state is
 196:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *          not compatible.
 197:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *
 198:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @api
 199:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  */
 200:/usr/src/chibiostest/os/kernel/src/chdebug.c **** void chDbgCheckClassS(void) {
 577              		.loc 1 200 0
 578              		.cfi_startproc
 579              		@ args = 0, pretend = 0, frame = 0
 580              		@ frame_needed = 0, uses_anonymous_args = 0
 581 0000 08B5     		push	{r3, lr}
 582              		.cfi_def_cfa_offset 8
 583              		.cfi_offset 3, -8
 584              		.cfi_offset 14, -4
 201:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
 202:/usr/src/chibiostest/os/kernel/src/chdebug.c ****   if ((dbg_isr_cnt != 0) || (dbg_lock_cnt <= 0))
 585              		.loc 1 202 0
 586 0002 064B     		ldr	r3, .L54
 587 0004 1B68     		ldr	r3, [r3]
 588 0006 002B     		cmp	r3, #0
 589 0008 03D1     		bne	.L52
 590              		.loc 1 202 0 is_stmt 0 discriminator 1
 591 000a 054B     		ldr	r3, .L54+4
 592 000c 1B68     		ldr	r3, [r3]
 593 000e 002B     		cmp	r3, #0
 594 0010 02DC     		bgt	.L51
 595              	.L52:
 203:/usr/src/chibiostest/os/kernel/src/chdebug.c ****     chDbgPanic("SV#11");
 596              		.loc 1 203 0 is_stmt 1
 597 0012 0448     		ldr	r0, .L54+8
 598 0014 FFF7FEFF 		bl	chDbgPanic
 599              	.L51:
 204:/usr/src/chibiostest/os/kernel/src/chdebug.c **** }
 600              		.loc 1 204 0
 601 0018 08BD     		pop	{r3, pc}
 602              	.L55:
 603 001a 00BF     		.align	2
 604              	.L54:
 605 001c 00000000 		.word	dbg_isr_cnt
 606 0020 00000000 		.word	dbg_lock_cnt
 607 0024 50000000 		.word	.LC10
 608              		.cfi_endproc
 609              	.LFE17:
 611              		.global	dbg_trace_buffer
 612 0028 AFF30080 		.section	.bss.dbg_trace_buffer,"aw",%nobits
 612      AFF30080 
 613              		.align	2
 616              	dbg_trace_buffer:
 617 0000 00000000 		.space	1032
 617      00000000 
 617      00000000 
 617      00000000 
 617      00000000 
 618              		.section	.text._trace_init,"ax",%progbits
 619              		.align	2
 620              		.p2align 4,,15
 621              		.global	_trace_init
 622              		.thumb
 623              		.thumb_func
 625              	_trace_init:
 626              	.LFB18:
 205:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
 206:/usr/src/chibiostest/os/kernel/src/chdebug.c **** #endif /* CH_DBG_SYSTEM_STATE_CHECK */
 207:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
 208:/usr/src/chibiostest/os/kernel/src/chdebug.c **** /*===========================================================================*/
 209:/usr/src/chibiostest/os/kernel/src/chdebug.c **** /* Trace related code and variables.                                         */
 210:/usr/src/chibiostest/os/kernel/src/chdebug.c **** /*===========================================================================*/
 211:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
 212:/usr/src/chibiostest/os/kernel/src/chdebug.c **** #if CH_DBG_ENABLE_TRACE || defined(__DOXYGEN__)
 213:/usr/src/chibiostest/os/kernel/src/chdebug.c **** /**
 214:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @brief   Public trace buffer.
 215:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  */
 216:/usr/src/chibiostest/os/kernel/src/chdebug.c **** ch_trace_buffer_t dbg_trace_buffer;
 217:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
 218:/usr/src/chibiostest/os/kernel/src/chdebug.c **** /**
 219:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @brief   Trace circular buffer subsystem initialization.
 220:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @note    Internal use only.
 221:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  */
 222:/usr/src/chibiostest/os/kernel/src/chdebug.c **** void _trace_init(void) {
 627              		.loc 1 222 0
 628              		.cfi_startproc
 629              		@ args = 0, pretend = 0, frame = 0
 630              		@ frame_needed = 0, uses_anonymous_args = 0
 631              		@ link register save eliminated.
 223:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
 224:/usr/src/chibiostest/os/kernel/src/chdebug.c ****   dbg_trace_buffer.tb_size = CH_TRACE_BUFFER_SIZE;
 632              		.loc 1 224 0
 633 0000 034B     		ldr	r3, .L57
 634 0002 4022     		movs	r2, #64
 635 0004 1A60     		str	r2, [r3]
 225:/usr/src/chibiostest/os/kernel/src/chdebug.c ****   dbg_trace_buffer.tb_ptr = &dbg_trace_buffer.tb_buffer[0];
 636              		.loc 1 225 0
 637 0006 024B     		ldr	r3, .L57
 638 0008 024A     		ldr	r2, .L57+4
 639 000a 5A60     		str	r2, [r3, #4]
 226:/usr/src/chibiostest/os/kernel/src/chdebug.c **** }
 640              		.loc 1 226 0
 641 000c 7047     		bx	lr
 642              	.L58:
 643 000e 00BF     		.align	2
 644              	.L57:
 645 0010 00000000 		.word	dbg_trace_buffer
 646 0014 08000000 		.word	dbg_trace_buffer+8
 647              		.cfi_endproc
 648              	.LFE18:
 650 0018 AFF30080 		.section	.text.dbg_trace,"ax",%progbits
 650      AFF30080 
 651              		.align	2
 652              		.p2align 4,,15
 653              		.global	dbg_trace
 654              		.thumb
 655              		.thumb_func
 657              	dbg_trace:
 658              	.LFB19:
 227:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
 228:/usr/src/chibiostest/os/kernel/src/chdebug.c **** /**
 229:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @brief   Inserts in the circular debug trace buffer a context switch record.
 230:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *
 231:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @param[in] otp       the thread being switched out
 232:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *
 233:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @notapi
 234:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  */
 235:/usr/src/chibiostest/os/kernel/src/chdebug.c **** void dbg_trace(Thread *otp) {
 659              		.loc 1 235 0
 660              		.cfi_startproc
 661              		@ args = 0, pretend = 0, frame = 8
 662              		@ frame_needed = 0, uses_anonymous_args = 0
 663              		@ link register save eliminated.
 664 0000 82B0     		sub	sp, sp, #8
 665              		.cfi_def_cfa_offset 8
 666 0002 0190     		str	r0, [sp, #4]
 236:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
 237:/usr/src/chibiostest/os/kernel/src/chdebug.c ****   dbg_trace_buffer.tb_ptr->se_time   = chTimeNow();
 667              		.loc 1 237 0
 668 0004 124B     		ldr	r3, .L61
 669 0006 5B68     		ldr	r3, [r3, #4]
 670 0008 124A     		ldr	r2, .L61+4
 671 000a D268     		ldr	r2, [r2, #12]
 672 000c 1A60     		str	r2, [r3]
 238:/usr/src/chibiostest/os/kernel/src/chdebug.c ****   dbg_trace_buffer.tb_ptr->se_tp     = currp;
 673              		.loc 1 238 0
 674 000e 104B     		ldr	r3, .L61
 675 0010 5B68     		ldr	r3, [r3, #4]
 676 0012 114A     		ldr	r2, .L61+8
 677 0014 9269     		ldr	r2, [r2, #24]
 678 0016 5A60     		str	r2, [r3, #4]
 239:/usr/src/chibiostest/os/kernel/src/chdebug.c ****   dbg_trace_buffer.tb_ptr->se_wtobjp = otp->p_u.wtobjp;
 679              		.loc 1 239 0
 680 0018 0D4B     		ldr	r3, .L61
 681 001a 5B68     		ldr	r3, [r3, #4]
 682 001c 019A     		ldr	r2, [sp, #4]
 683 001e 926A     		ldr	r2, [r2, #40]
 684 0020 9A60     		str	r2, [r3, #8]
 240:/usr/src/chibiostest/os/kernel/src/chdebug.c ****   dbg_trace_buffer.tb_ptr->se_state  = (uint8_t)otp->p_state;
 685              		.loc 1 240 0
 686 0022 0B4B     		ldr	r3, .L61
 687 0024 5B68     		ldr	r3, [r3, #4]
 688 0026 019A     		ldr	r2, [sp, #4]
 689 0028 92F82020 		ldrb	r2, [r2, #32]	@ zero_extendqisi2
 690 002c 1A73     		strb	r2, [r3, #12]
 241:/usr/src/chibiostest/os/kernel/src/chdebug.c ****   if (++dbg_trace_buffer.tb_ptr >=
 691              		.loc 1 241 0
 692 002e 084B     		ldr	r3, .L61
 693 0030 5B68     		ldr	r3, [r3, #4]
 694 0032 03F11002 		add	r2, r3, #16
 695 0036 064B     		ldr	r3, .L61
 696 0038 5A60     		str	r2, [r3, #4]
 697 003a 054B     		ldr	r3, .L61
 698 003c 5A68     		ldr	r2, [r3, #4]
 699 003e 074B     		ldr	r3, .L61+12
 700 0040 9A42     		cmp	r2, r3
 701 0042 02D3     		bcc	.L59
 242:/usr/src/chibiostest/os/kernel/src/chdebug.c ****       &dbg_trace_buffer.tb_buffer[CH_TRACE_BUFFER_SIZE])
 243:/usr/src/chibiostest/os/kernel/src/chdebug.c ****     dbg_trace_buffer.tb_ptr = &dbg_trace_buffer.tb_buffer[0];
 702              		.loc 1 243 0
 703 0044 024B     		ldr	r3, .L61
 704 0046 064A     		ldr	r2, .L61+16
 705 0048 5A60     		str	r2, [r3, #4]
 706              	.L59:
 244:/usr/src/chibiostest/os/kernel/src/chdebug.c **** }
 707              		.loc 1 244 0
 708 004a 02B0     		add	sp, sp, #8
 709              		@ sp needed
 710 004c 7047     		bx	lr
 711              	.L62:
 712 004e 00BF     		.align	2
 713              	.L61:
 714 0050 00000000 		.word	dbg_trace_buffer
 715 0054 00000000 		.word	vtlist
 716 0058 00000000 		.word	rlist
 717 005c 08040000 		.word	dbg_trace_buffer+1032
 718 0060 08000000 		.word	dbg_trace_buffer+8
 719              		.cfi_endproc
 720              	.LFE19:
 722              		.global	dbg_panic_msg
 723 0064 AFF30080 		.section	.bss.dbg_panic_msg,"aw",%nobits
 723      AFF30080 
 723      AFF30080 
 724              		.align	2
 727              	dbg_panic_msg:
 728 0000 00000000 		.space	4
 729              		.section	.text.chDbgPanic,"ax",%progbits
 730              		.align	2
 731              		.p2align 4,,15
 732              		.global	chDbgPanic
 733              		.thumb
 734              		.thumb_func
 736              	chDbgPanic:
 737              	.LFB20:
 245:/usr/src/chibiostest/os/kernel/src/chdebug.c **** #endif /* CH_DBG_ENABLE_TRACE */
 246:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
 247:/usr/src/chibiostest/os/kernel/src/chdebug.c **** /*===========================================================================*/
 248:/usr/src/chibiostest/os/kernel/src/chdebug.c **** /* Panic related code and variables.                                         */
 249:/usr/src/chibiostest/os/kernel/src/chdebug.c **** /*===========================================================================*/
 250:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
 251:/usr/src/chibiostest/os/kernel/src/chdebug.c **** #if CH_DBG_ENABLED || defined(__DOXYGEN__)
 252:/usr/src/chibiostest/os/kernel/src/chdebug.c **** /**
 253:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @brief   Pointer to the panic message.
 254:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @details This pointer is meant to be accessed through the debugger, it is
 255:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *          written once and then the system is halted.
 256:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  */
 257:/usr/src/chibiostest/os/kernel/src/chdebug.c **** const char *dbg_panic_msg;
 258:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
 259:/usr/src/chibiostest/os/kernel/src/chdebug.c **** /**
 260:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @brief   Prints a panic message on the console and then halts the system.
 261:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  *
 262:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  * @param[in] msg       the pointer to the panic message string
 263:/usr/src/chibiostest/os/kernel/src/chdebug.c ****  */
 264:/usr/src/chibiostest/os/kernel/src/chdebug.c **** void chDbgPanic(const char *msg) {
 738              		.loc 1 264 0
 739              		.cfi_startproc
 740              		@ args = 0, pretend = 0, frame = 8
 741              		@ frame_needed = 0, uses_anonymous_args = 0
 742 0000 00B5     		push	{lr}
 743              		.cfi_def_cfa_offset 4
 744              		.cfi_offset 14, -4
 745 0002 83B0     		sub	sp, sp, #12
 746              		.cfi_def_cfa_offset 16
 747 0004 0190     		str	r0, [sp, #4]
 265:/usr/src/chibiostest/os/kernel/src/chdebug.c **** 
 266:/usr/src/chibiostest/os/kernel/src/chdebug.c ****   dbg_panic_msg = msg;
 748              		.loc 1 266 0
 749 0006 044B     		ldr	r3, .L64
 750 0008 019A     		ldr	r2, [sp, #4]
 751 000a 1A60     		str	r2, [r3]
 267:/usr/src/chibiostest/os/kernel/src/chdebug.c ****   chSysHalt();
 752              		.loc 1 267 0
 753 000c FFF7FEFF 		bl	port_halt
 268:/usr/src/chibiostest/os/kernel/src/chdebug.c **** }
 754              		.loc 1 268 0
 755 0010 03B0     		add	sp, sp, #12
 756              		@ sp needed
 757 0012 5DF804FB 		ldr	pc, [sp], #4
 758              	.L65:
 759 0016 00BF     		.align	2
 760              	.L64:
 761 0018 00000000 		.word	dbg_panic_msg
 762              		.cfi_endproc
 763              	.LFE20:
 765 001c AFF30080 		.text
 766              	.Letext0:
 767              		.file 2 "/usr/include/newlib/machine/_default_types.h"
 768              		.file 3 "/usr/include/newlib/stdint.h"
 769              		.file 4 "/usr/src/chibiostest/os/ports/GCC/ARMCMx/chtypes.h"
 770              		.file 5 "/usr/src/chibiostest/os/kernel/include/chlists.h"
 771              		.file 6 "/usr/src/chibiostest/os/kernel/include/chthreads.h"
 772              		.file 7 "/usr/src/chibiostest/os/ports/GCC/ARMCMx/chcore_v7m.h"
 773              		.file 8 "/usr/src/chibiostest/os/kernel/include/chvt.h"
 774              		.file 9 "/usr/src/chibiostest/os/kernel/include/chschd.h"
 775              		.file 10 "/usr/src/chibiostest/os/kernel/include/chmtx.h"
 776              		.file 11 "/usr/src/chibiostest/os/kernel/include/chdebug.h"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 chdebug.c
     /tmp/ccIwCjnf.s:24     .bss.dbg_isr_cnt:0000000000000000 dbg_isr_cnt
     /tmp/ccIwCjnf.s:21     .bss.dbg_isr_cnt:0000000000000000 $d
     /tmp/ccIwCjnf.s:31     .bss.dbg_lock_cnt:0000000000000000 dbg_lock_cnt
     /tmp/ccIwCjnf.s:28     .bss.dbg_lock_cnt:0000000000000000 $d
     /tmp/ccIwCjnf.s:34     .rodata:0000000000000000 $d
     /tmp/ccIwCjnf.s:38     .text.dbg_check_disable:0000000000000000 $t
     /tmp/ccIwCjnf.s:44     .text.dbg_check_disable:0000000000000000 dbg_check_disable
     /tmp/ccIwCjnf.s:736    .text.chDbgPanic:0000000000000000 chDbgPanic
     /tmp/ccIwCjnf.s:75     .text.dbg_check_disable:000000000000001c $d
     /tmp/ccIwCjnf.s:86     .text.dbg_check_suspend:0000000000000000 $t
     /tmp/ccIwCjnf.s:92     .text.dbg_check_suspend:0000000000000000 dbg_check_suspend
     /tmp/ccIwCjnf.s:122    .text.dbg_check_suspend:000000000000001c $d
     /tmp/ccIwCjnf.s:133    .text.dbg_check_enable:0000000000000000 $t
     /tmp/ccIwCjnf.s:139    .text.dbg_check_enable:0000000000000000 dbg_check_enable
     /tmp/ccIwCjnf.s:169    .text.dbg_check_enable:000000000000001c $d
     /tmp/ccIwCjnf.s:180    .text.dbg_check_lock:0000000000000000 $t
     /tmp/ccIwCjnf.s:186    .text.dbg_check_lock:0000000000000000 dbg_check_lock
     /tmp/ccIwCjnf.s:220    .text.dbg_check_lock:0000000000000020 $d
     /tmp/ccIwCjnf.s:231    .text.dbg_check_unlock:0000000000000000 $t
     /tmp/ccIwCjnf.s:237    .text.dbg_check_unlock:0000000000000000 dbg_check_unlock
     /tmp/ccIwCjnf.s:271    .text.dbg_check_unlock:0000000000000020 $d
     /tmp/ccIwCjnf.s:282    .text.dbg_check_lock_from_isr:0000000000000000 $t
     /tmp/ccIwCjnf.s:288    .text.dbg_check_lock_from_isr:0000000000000000 dbg_check_lock_from_isr
     /tmp/ccIwCjnf.s:322    .text.dbg_check_lock_from_isr:0000000000000020 $d
     /tmp/ccIwCjnf.s:333    .text.dbg_check_unlock_from_isr:0000000000000000 $t
     /tmp/ccIwCjnf.s:339    .text.dbg_check_unlock_from_isr:0000000000000000 dbg_check_unlock_from_isr
     /tmp/ccIwCjnf.s:373    .text.dbg_check_unlock_from_isr:0000000000000020 $d
     /tmp/ccIwCjnf.s:384    .text.dbg_check_enter_isr:0000000000000000 $t
     /tmp/ccIwCjnf.s:390    .text.dbg_check_enter_isr:0000000000000000 dbg_check_enter_isr
     /tmp/ccIwCjnf.s:442    .text.dbg_check_enter_isr:0000000000000030 $d
     /tmp/ccIwCjnf.s:453    .text.dbg_check_leave_isr:0000000000000000 $t
     /tmp/ccIwCjnf.s:459    .text.dbg_check_leave_isr:0000000000000000 dbg_check_leave_isr
     /tmp/ccIwCjnf.s:511    .text.dbg_check_leave_isr:0000000000000030 $d
     /tmp/ccIwCjnf.s:522    .text.chDbgCheckClassI:0000000000000000 $t
     /tmp/ccIwCjnf.s:528    .text.chDbgCheckClassI:0000000000000000 chDbgCheckClassI
     /tmp/ccIwCjnf.s:558    .text.chDbgCheckClassI:000000000000001c $d
     /tmp/ccIwCjnf.s:569    .text.chDbgCheckClassS:0000000000000000 $t
     /tmp/ccIwCjnf.s:575    .text.chDbgCheckClassS:0000000000000000 chDbgCheckClassS
     /tmp/ccIwCjnf.s:605    .text.chDbgCheckClassS:000000000000001c $d
     /tmp/ccIwCjnf.s:616    .bss.dbg_trace_buffer:0000000000000000 dbg_trace_buffer
     /tmp/ccIwCjnf.s:613    .bss.dbg_trace_buffer:0000000000000000 $d
     /tmp/ccIwCjnf.s:619    .text._trace_init:0000000000000000 $t
     /tmp/ccIwCjnf.s:625    .text._trace_init:0000000000000000 _trace_init
     /tmp/ccIwCjnf.s:645    .text._trace_init:0000000000000010 $d
     /tmp/ccIwCjnf.s:651    .text.dbg_trace:0000000000000000 $t
     /tmp/ccIwCjnf.s:657    .text.dbg_trace:0000000000000000 dbg_trace
     /tmp/ccIwCjnf.s:714    .text.dbg_trace:0000000000000050 $d
     /tmp/ccIwCjnf.s:727    .bss.dbg_panic_msg:0000000000000000 dbg_panic_msg
     /tmp/ccIwCjnf.s:724    .bss.dbg_panic_msg:0000000000000000 $d
     /tmp/ccIwCjnf.s:730    .text.chDbgPanic:0000000000000000 $t
     /tmp/ccIwCjnf.s:761    .text.chDbgPanic:0000000000000018 $d
                     .debug_frame:0000000000000010 $d
     /tmp/ccIwCjnf.s:81     .text.dbg_check_disable:0000000000000028 $t
     /tmp/ccIwCjnf.s:128    .text.dbg_check_suspend:0000000000000028 $t
     /tmp/ccIwCjnf.s:175    .text.dbg_check_enable:0000000000000028 $t
     /tmp/ccIwCjnf.s:226    .text.dbg_check_lock:000000000000002c $t
     /tmp/ccIwCjnf.s:277    .text.dbg_check_unlock:000000000000002c $t
     /tmp/ccIwCjnf.s:328    .text.dbg_check_lock_from_isr:000000000000002c $t
     /tmp/ccIwCjnf.s:379    .text.dbg_check_unlock_from_isr:000000000000002c $t
     /tmp/ccIwCjnf.s:448    .text.dbg_check_enter_isr:000000000000003c $t
     /tmp/ccIwCjnf.s:517    .text.dbg_check_leave_isr:000000000000003c $t
     /tmp/ccIwCjnf.s:564    .text.chDbgCheckClassI:0000000000000028 $t
     /tmp/ccIwCjnf.s:612    .text.chDbgCheckClassS:0000000000000028 $t
     /tmp/ccIwCjnf.s:650    .text._trace_init:0000000000000018 $t
     /tmp/ccIwCjnf.s:723    .text.dbg_trace:0000000000000064 $t
     /tmp/ccIwCjnf.s:765    .text.chDbgPanic:000000000000001c $t

UNDEFINED SYMBOLS
vtlist
rlist
port_halt
