   1              		.syntax unified
   2              		.cpu cortex-m4
   3              		.eabi_attribute 27, 3
   4              		.fpu fpv4-sp-d16
   5              		.eabi_attribute 20, 1
   6              		.eabi_attribute 21, 1
   7              		.eabi_attribute 23, 3
   8              		.eabi_attribute 24, 1
   9              		.eabi_attribute 25, 1
  10              		.eabi_attribute 26, 1
  11              		.eabi_attribute 30, 6
  12              		.eabi_attribute 34, 1
  13              		.eabi_attribute 18, 4
  14              		.thumb
  15              		.file	"usb_lld.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.fifo_remove,"ax",%progbits
  20              		.align	2
  21              		.p2align 4,,15
  22              		.thumb
  23              		.thumb_func
  25              	fifo_remove:
  26              	.LFB2:
  27              		.file 1 "/usr/src/chibiostest/os/kernel/include/chinline.h"
   1:/usr/src/chibiostest/os/kernel/include/chinline.h **** /*
   2:/usr/src/chibiostest/os/kernel/include/chinline.h ****     ChibiOS/RT - Copyright (C) 2006,2007,2008,2009,2010,
   3:/usr/src/chibiostest/os/kernel/include/chinline.h ****                  2011,2012 Giovanni Di Sirio.
   4:/usr/src/chibiostest/os/kernel/include/chinline.h **** 
   5:/usr/src/chibiostest/os/kernel/include/chinline.h ****     This file is part of ChibiOS/RT.
   6:/usr/src/chibiostest/os/kernel/include/chinline.h **** 
   7:/usr/src/chibiostest/os/kernel/include/chinline.h ****     ChibiOS/RT is free software; you can redistribute it and/or modify
   8:/usr/src/chibiostest/os/kernel/include/chinline.h ****     it under the terms of the GNU General Public License as published by
   9:/usr/src/chibiostest/os/kernel/include/chinline.h ****     the Free Software Foundation; either version 3 of the License, or
  10:/usr/src/chibiostest/os/kernel/include/chinline.h ****     (at your option) any later version.
  11:/usr/src/chibiostest/os/kernel/include/chinline.h **** 
  12:/usr/src/chibiostest/os/kernel/include/chinline.h ****     ChibiOS/RT is distributed in the hope that it will be useful,
  13:/usr/src/chibiostest/os/kernel/include/chinline.h ****     but WITHOUT ANY WARRANTY; without even the implied warranty of
  14:/usr/src/chibiostest/os/kernel/include/chinline.h ****     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  15:/usr/src/chibiostest/os/kernel/include/chinline.h ****     GNU General Public License for more details.
  16:/usr/src/chibiostest/os/kernel/include/chinline.h **** 
  17:/usr/src/chibiostest/os/kernel/include/chinline.h ****     You should have received a copy of the GNU General Public License
  18:/usr/src/chibiostest/os/kernel/include/chinline.h ****     along with this program.  If not, see <http://www.gnu.org/licenses/>.
  19:/usr/src/chibiostest/os/kernel/include/chinline.h **** */
  20:/usr/src/chibiostest/os/kernel/include/chinline.h **** 
  21:/usr/src/chibiostest/os/kernel/include/chinline.h **** /**
  22:/usr/src/chibiostest/os/kernel/include/chinline.h ****  * @file    chinline.h
  23:/usr/src/chibiostest/os/kernel/include/chinline.h ****  * @brief   Kernel inlined functions.
  24:/usr/src/chibiostest/os/kernel/include/chinline.h ****  * @details In this file there are a set of inlined functions if the
  25:/usr/src/chibiostest/os/kernel/include/chinline.h ****  *          @p CH_OPTIMIZE_SPEED is enabled.
  26:/usr/src/chibiostest/os/kernel/include/chinline.h ****  */
  27:/usr/src/chibiostest/os/kernel/include/chinline.h **** 
  28:/usr/src/chibiostest/os/kernel/include/chinline.h **** #ifndef _CHINLINE_H_
  29:/usr/src/chibiostest/os/kernel/include/chinline.h **** #define _CHINLINE_H_
  30:/usr/src/chibiostest/os/kernel/include/chinline.h **** 
  31:/usr/src/chibiostest/os/kernel/include/chinline.h **** /* If the performance code path has been chosen then all the following
  32:/usr/src/chibiostest/os/kernel/include/chinline.h ****    functions are inlined into the various kernel modules.*/
  33:/usr/src/chibiostest/os/kernel/include/chinline.h **** #if CH_OPTIMIZE_SPEED
  34:/usr/src/chibiostest/os/kernel/include/chinline.h **** static INLINE void prio_insert(Thread *tp, ThreadsQueue *tqp) {
  35:/usr/src/chibiostest/os/kernel/include/chinline.h **** 
  36:/usr/src/chibiostest/os/kernel/include/chinline.h ****   Thread *cp = (Thread *)tqp;
  37:/usr/src/chibiostest/os/kernel/include/chinline.h ****   do {
  38:/usr/src/chibiostest/os/kernel/include/chinline.h ****     cp = cp->p_next;
  39:/usr/src/chibiostest/os/kernel/include/chinline.h ****   } while ((cp != (Thread *)tqp) && (cp->p_prio >= tp->p_prio));
  40:/usr/src/chibiostest/os/kernel/include/chinline.h ****   tp->p_next = cp;
  41:/usr/src/chibiostest/os/kernel/include/chinline.h ****   tp->p_prev = cp->p_prev;
  42:/usr/src/chibiostest/os/kernel/include/chinline.h ****   tp->p_prev->p_next = cp->p_prev = tp;
  43:/usr/src/chibiostest/os/kernel/include/chinline.h **** }
  44:/usr/src/chibiostest/os/kernel/include/chinline.h **** 
  45:/usr/src/chibiostest/os/kernel/include/chinline.h **** static INLINE void queue_insert(Thread *tp, ThreadsQueue *tqp) {
  46:/usr/src/chibiostest/os/kernel/include/chinline.h **** 
  47:/usr/src/chibiostest/os/kernel/include/chinline.h ****   tp->p_next = (Thread *)tqp;
  48:/usr/src/chibiostest/os/kernel/include/chinline.h ****   tp->p_prev = tqp->p_prev;
  49:/usr/src/chibiostest/os/kernel/include/chinline.h ****   tp->p_prev->p_next = tqp->p_prev = tp;
  50:/usr/src/chibiostest/os/kernel/include/chinline.h **** }
  51:/usr/src/chibiostest/os/kernel/include/chinline.h **** 
  52:/usr/src/chibiostest/os/kernel/include/chinline.h **** static INLINE Thread *fifo_remove(ThreadsQueue *tqp) {
  28              		.loc 1 52 0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 16
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
  33 0000 84B0     		sub	sp, sp, #16
  34              		.cfi_def_cfa_offset 16
  35 0002 0190     		str	r0, [sp, #4]
  53:/usr/src/chibiostest/os/kernel/include/chinline.h ****   Thread *tp = tqp->p_next;
  36              		.loc 1 53 0
  37 0004 019B     		ldr	r3, [sp, #4]
  38 0006 1B68     		ldr	r3, [r3]
  39 0008 0393     		str	r3, [sp, #12]
  54:/usr/src/chibiostest/os/kernel/include/chinline.h **** 
  55:/usr/src/chibiostest/os/kernel/include/chinline.h ****   (tqp->p_next = tp->p_next)->p_prev = (Thread *)tqp;
  40              		.loc 1 55 0
  41 000a 039B     		ldr	r3, [sp, #12]
  42 000c 1A68     		ldr	r2, [r3]
  43 000e 019B     		ldr	r3, [sp, #4]
  44 0010 1A60     		str	r2, [r3]
  45 0012 019B     		ldr	r3, [sp, #4]
  46 0014 1B68     		ldr	r3, [r3]
  47 0016 019A     		ldr	r2, [sp, #4]
  48 0018 5A60     		str	r2, [r3, #4]
  56:/usr/src/chibiostest/os/kernel/include/chinline.h ****   return tp;
  49              		.loc 1 56 0
  50 001a 039B     		ldr	r3, [sp, #12]
  57:/usr/src/chibiostest/os/kernel/include/chinline.h **** }
  51              		.loc 1 57 0
  52 001c 1846     		mov	r0, r3
  53 001e 04B0     		add	sp, sp, #16
  54              		@ sp needed
  55 0020 7047     		bx	lr
  56              		.cfi_endproc
  57              	.LFE2:
  59              		.global	USBD1
  60 0022 00BFAFF3 		.section	.bss.USBD1,"aw",%nobits
  60      0080AFF3 
  60      0080AFF3 
  60      0080
  61              		.align	3
  64              	USBD1:
  65 0000 00000000 		.space	528
  65      00000000 
  65      00000000 
  65      00000000 
  65      00000000 
  66              		.section	.bss.ep0_state,"aw",%nobits
  67              		.align	2
  70              	ep0_state:
  71 0000 00000000 		.space	16
  71      00000000 
  71      00000000 
  71      00000000 
  72              		.section	.bss.ep0setup_buffer,"aw",%nobits
  73              		.align	2
  76              	ep0setup_buffer:
  77 0000 00000000 		.space	8
  77      00000000 
  78              		.section	.rodata.ep0config,"a",%progbits
  79              		.align	2
  82              	ep0config:
  83 0000 00000000 		.word	0
  84 0004 00000000 		.word	_usb_ep0setup
  85 0008 00000000 		.word	_usb_ep0in
  86 000c 00000000 		.word	_usb_ep0out
  87 0010 4000     		.short	64
  88 0012 4000     		.short	64
  89 0014 00000000 		.word	ep0_state
  90 0018 00000000 		.word	ep0_state
  91 001c 0100     		.short	1
  92 001e 0000     		.space	2
  93 0020 00000000 		.word	ep0setup_buffer
  94              		.section	.rodata.fsparams,"a",%progbits
  95              		.align	2
  98              	fsparams:
  99 0000 80000000 		.word	128
 100 0004 80010000 		.word	384
 101 0008 03000000 		.word	3
 102              		.section	.text.usb_lld_wakeup_pump,"ax",%progbits
 103              		.align	2
 104              		.p2align 4,,15
 105              		.thumb
 106              		.thumb_func
 108              	usb_lld_wakeup_pump:
 109              	.LFB118:
 110              		.file 2 "/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c"
   1:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /*
   2:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     ChibiOS/RT - Copyright (C) 2006,2007,2008,2009,2010,
   3:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                  2011,2012 Giovanni Di Sirio.
   4:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
   5:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     This file is part of ChibiOS/RT.
   6:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
   7:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     ChibiOS/RT is free software; you can redistribute it and/or modify
   8:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     it under the terms of the GNU General Public License as published by
   9:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     the Free Software Foundation; either version 3 of the License, or
  10:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     (at your option) any later version.
  11:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
  12:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     ChibiOS/RT is distributed in the hope that it will be useful,
  13:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     but WITHOUT ANY WARRANTY; without even the implied warranty of
  14:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  15:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     GNU General Public License for more details.
  16:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
  17:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     You should have received a copy of the GNU General Public License
  18:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     along with this program.  If not, see <http://www.gnu.org/licenses/>.
  19:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** */
  20:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
  21:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /**
  22:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @file    STM32/OTGv1/usb_lld.c
  23:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @brief   STM32 USB subsystem low level driver source.
  24:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
  25:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @addtogroup USB
  26:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @{
  27:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  */
  28:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
  29:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #include <string.h>
  30:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
  31:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #include "ch.h"
  32:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #include "hal.h"
  33:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
  34:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #if HAL_USE_USB || defined(__DOXYGEN__)
  35:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
  36:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /*===========================================================================*/
  37:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /* Driver local definitions.                                                 */
  38:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /*===========================================================================*/
  39:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
  40:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #define TRDT_VALUE      5
  41:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
  42:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /*===========================================================================*/
  43:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /* Driver exported variables.                                                */
  44:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /*===========================================================================*/
  45:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
  46:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /** @brief OTG_FS driver identifier.*/
  47:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #if STM32_USB_USE_OTG1 || defined(__DOXYGEN__)
  48:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** USBDriver USBD1;
  49:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #endif
  50:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
  51:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /** @brief OTG_HS driver identifier.*/
  52:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #if STM32_USB_USE_OTG2 || defined(__DOXYGEN__)
  53:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** USBDriver USBD2;
  54:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #endif
  55:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
  56:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /*===========================================================================*/
  57:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /* Driver local variables.                                                   */
  58:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /*===========================================================================*/
  59:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
  60:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /**
  61:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @brief   EP0 state.
  62:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @note    It is an union because IN and OUT endpoints are never used at the
  63:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *          same time for EP0.
  64:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  */
  65:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** static union {
  66:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   /**
  67:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****    * @brief   IN EP0 state.
  68:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****    */
  69:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   USBInEndpointState in;
  70:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   /**
  71:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****    * @brief   OUT EP0 state.
  72:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****    */
  73:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   USBOutEndpointState out;
  74:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** } ep0_state;
  75:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
  76:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /**
  77:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @brief   Buffer for the EP0 setup packets.
  78:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  */
  79:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** static uint8_t ep0setup_buffer[8];
  80:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
  81:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /**
  82:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @brief   EP0 initialization structure.
  83:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  */
  84:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** static const USBEndpointConfig ep0config = {
  85:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   USB_EP_MODE_TYPE_CTRL,
  86:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   _usb_ep0setup,
  87:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   _usb_ep0in,
  88:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   _usb_ep0out,
  89:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   0x40,
  90:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   0x40,
  91:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   &ep0_state.in,
  92:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   &ep0_state.out,
  93:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   1,
  94:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   ep0setup_buffer
  95:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** };
  96:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
  97:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #if STM32_USB_USE_OTG1
  98:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** static const stm32_otg_params_t fsparams = {
  99:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   STM32_USB_OTG1_RX_FIFO_SIZE / 4,
 100:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   STM32_OTG1_FIFO_MEM_SIZE,
 101:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   STM32_OTG1_ENDOPOINTS_NUMBER
 102:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** };
 103:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #endif
 104:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 105:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #if STM32_USB_USE_OTG2
 106:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** static const stm32_otg_params_t hsparams = {
 107:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   STM32_USB_OTG2_RX_FIFO_SIZE / 4,
 108:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   STM32_OTG2_FIFO_MEM_SIZE,
 109:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   STM32_OTG2_ENDOPOINTS_NUMBER
 110:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** };
 111:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #endif
 112:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 113:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /*===========================================================================*/
 114:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /* Driver local functions.                                                   */
 115:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /*===========================================================================*/
 116:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 117:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /**
 118:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @brief   Wakes up the pump thread.
 119:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 120:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 121:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 122:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @notapi
 123:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  */
 124:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** static void usb_lld_wakeup_pump(USBDriver *usbp) {
 111              		.loc 2 124 0
 112              		.cfi_startproc
 113              		@ args = 0, pretend = 0, frame = 8
 114              		@ frame_needed = 0, uses_anonymous_args = 0
 115 0000 00B5     		push	{lr}
 116              		.cfi_def_cfa_offset 4
 117              		.cfi_offset 14, -4
 118 0002 83B0     		sub	sp, sp, #12
 119              		.cfi_def_cfa_offset 16
 120 0004 0190     		str	r0, [sp, #4]
 125:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 126:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   if (usbp->thd_wait != NULL) {
 121              		.loc 2 126 0
 122 0006 019B     		ldr	r3, [sp, #4]
 123 0008 1B6D     		ldr	r3, [r3, #80]
 124 000a 002B     		cmp	r3, #0
 125 000c 07D0     		beq	.L3
 127:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     chThdResumeI(usbp->thd_wait);
 126              		.loc 2 127 0
 127 000e 019B     		ldr	r3, [sp, #4]
 128 0010 1B6D     		ldr	r3, [r3, #80]
 129 0012 1846     		mov	r0, r3
 130 0014 FFF7FEFF 		bl	chSchReadyI
 128:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     usbp->thd_wait = NULL;
 131              		.loc 2 128 0
 132 0018 019B     		ldr	r3, [sp, #4]
 133 001a 0022     		movs	r2, #0
 134 001c 1A65     		str	r2, [r3, #80]
 135              	.L3:
 129:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   }
 130:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 136              		.loc 2 130 0
 137 001e 03B0     		add	sp, sp, #12
 138              		@ sp needed
 139 0020 5DF804FB 		ldr	pc, [sp], #4
 140              		.cfi_endproc
 141              	.LFE118:
 143 0024 AFF30080 		.section	.text.otg_core_reset,"ax",%progbits
 143      AFF30080 
 143      AFF30080 
 144              		.align	2
 145              		.p2align 4,,15
 146              		.thumb
 147              		.thumb_func
 149              	otg_core_reset:
 150              	.LFB119:
 131:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 132:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** static void otg_core_reset(USBDriver *usbp) {
 151              		.loc 2 132 0
 152              		.cfi_startproc
 153              		@ args = 0, pretend = 0, frame = 16
 154              		@ frame_needed = 0, uses_anonymous_args = 0
 155 0000 00B5     		push	{lr}
 156              		.cfi_def_cfa_offset 4
 157              		.cfi_offset 14, -4
 158 0002 85B0     		sub	sp, sp, #20
 159              		.cfi_def_cfa_offset 24
 160 0004 0190     		str	r0, [sp, #4]
 133:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   stm32_otg_t *otgp = usbp->otg;
 161              		.loc 2 133 0
 162 0006 019B     		ldr	r3, [sp, #4]
 163 0008 DB6B     		ldr	r3, [r3, #60]
 164 000a 0393     		str	r3, [sp, #12]
 134:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 135:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   /* Core reset and delay of at least 3 PHY cycles.*/
 136:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   otgp->GRSTCTL = GRSTCTL_CSRST;
 165              		.loc 2 136 0
 166 000c 039B     		ldr	r3, [sp, #12]
 167 000e 0122     		movs	r2, #1
 168 0010 1A61     		str	r2, [r3, #16]
 137:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   while ((otgp->GRSTCTL & GRSTCTL_CSRST) != 0)
 169              		.loc 2 137 0
 170 0012 00BF     		nop
 171              	.L6:
 172              		.loc 2 137 0 is_stmt 0 discriminator 1
 173 0014 039B     		ldr	r3, [sp, #12]
 174 0016 1B69     		ldr	r3, [r3, #16]
 175 0018 03F00103 		and	r3, r3, #1
 176 001c 002B     		cmp	r3, #0
 177 001e F9D1     		bne	.L6
 138:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     ;
 139:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   halPolledDelay(12);
 178              		.loc 2 139 0 is_stmt 1
 179 0020 0C20     		movs	r0, #12
 180 0022 FFF7FEFF 		bl	halPolledDelay
 140:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   /* Wait AHB idle condition.*/
 141:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   while ((otgp->GRSTCTL & GRSTCTL_AHBIDL) == 0)
 181              		.loc 2 141 0
 182 0026 00BF     		nop
 183              	.L7:
 184              		.loc 2 141 0 is_stmt 0 discriminator 1
 185 0028 039B     		ldr	r3, [sp, #12]
 186 002a 1B69     		ldr	r3, [r3, #16]
 187 002c 002B     		cmp	r3, #0
 188 002e FBDA     		bge	.L7
 142:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     ;
 143:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 189              		.loc 2 143 0 is_stmt 1
 190 0030 05B0     		add	sp, sp, #20
 191              		@ sp needed
 192 0032 5DF804FB 		ldr	pc, [sp], #4
 193              		.cfi_endproc
 194              	.LFE119:
 196 0036 00BFAFF3 		.section	.text.otg_disable_ep,"ax",%progbits
 196      0080AFF3 
 196      0080
 197              		.align	2
 198              		.p2align 4,,15
 199              		.thumb
 200              		.thumb_func
 202              	otg_disable_ep:
 203              	.LFB120:
 144:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 145:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** static void otg_disable_ep(USBDriver *usbp) {
 204              		.loc 2 145 0
 205              		.cfi_startproc
 206              		@ args = 0, pretend = 0, frame = 16
 207              		@ frame_needed = 0, uses_anonymous_args = 0
 208              		@ link register save eliminated.
 209 0000 84B0     		sub	sp, sp, #16
 210              		.cfi_def_cfa_offset 16
 211 0002 0190     		str	r0, [sp, #4]
 146:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   stm32_otg_t *otgp = usbp->otg;
 212              		.loc 2 146 0
 213 0004 019B     		ldr	r3, [sp, #4]
 214 0006 DB6B     		ldr	r3, [r3, #60]
 215 0008 0293     		str	r3, [sp, #8]
 147:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   unsigned i;
 148:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 149:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   for (i = 0; i <= usbp->otgparams->num_endpoints; i++) {
 216              		.loc 2 149 0
 217 000a 0023     		movs	r3, #0
 218 000c 0393     		str	r3, [sp, #12]
 219 000e 6CE0     		b	.L9
 220              	.L16:
 150:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     /* Disable only if enabled because this sentence in the manual:
 151:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****        "The application must set this bit only if Endpoint Enable is
 152:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****         already set for this endpoint".*/
 153:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     if ((otgp->ie[i].DIEPCTL & DIEPCTL_EPENA) != 0) {
 221              		.loc 2 153 0
 222 0010 029A     		ldr	r2, [sp, #8]
 223 0012 039B     		ldr	r3, [sp, #12]
 224 0014 4833     		adds	r3, r3, #72
 225 0016 5B01     		lsls	r3, r3, #5
 226 0018 1344     		add	r3, r3, r2
 227 001a 1B68     		ldr	r3, [r3]
 228 001c 002B     		cmp	r3, #0
 229 001e 14DA     		bge	.L10
 154:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       otgp->ie[i].DIEPCTL = DIEPCTL_EPDIS;
 230              		.loc 2 154 0
 231 0020 029A     		ldr	r2, [sp, #8]
 232 0022 039B     		ldr	r3, [sp, #12]
 233 0024 4833     		adds	r3, r3, #72
 234 0026 5B01     		lsls	r3, r3, #5
 235 0028 1344     		add	r3, r3, r2
 236 002a 4FF08042 		mov	r2, #1073741824
 237 002e 1A60     		str	r2, [r3]
 155:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       /* Wait for endpoint disable.*/
 156:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       while (!(otgp->ie[i].DIEPINT & DIEPINT_EPDISD))
 238              		.loc 2 156 0
 239 0030 00BF     		nop
 240              	.L11:
 241              		.loc 2 156 0 is_stmt 0 discriminator 1
 242 0032 029A     		ldr	r2, [sp, #8]
 243 0034 039B     		ldr	r3, [sp, #12]
 244 0036 5B01     		lsls	r3, r3, #5
 245 0038 1344     		add	r3, r3, r2
 246 003a 03F60813 		addw	r3, r3, #2312
 247 003e 1B68     		ldr	r3, [r3]
 248 0040 03F00203 		and	r3, r3, #2
 249 0044 002B     		cmp	r3, #0
 250 0046 F4D0     		beq	.L11
 251 0048 06E0     		b	.L12
 252              	.L10:
 157:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****         ;
 158:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     }
 159:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     else
 160:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       otgp->ie[i].DIEPCTL = 0;
 253              		.loc 2 160 0 is_stmt 1
 254 004a 029A     		ldr	r2, [sp, #8]
 255 004c 039B     		ldr	r3, [sp, #12]
 256 004e 4833     		adds	r3, r3, #72
 257 0050 5B01     		lsls	r3, r3, #5
 258 0052 1344     		add	r3, r3, r2
 259 0054 0022     		movs	r2, #0
 260 0056 1A60     		str	r2, [r3]
 261              	.L12:
 161:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otgp->ie[i].DIEPTSIZ = 0;
 262              		.loc 2 161 0
 263 0058 029A     		ldr	r2, [sp, #8]
 264 005a 039B     		ldr	r3, [sp, #12]
 265 005c 5B01     		lsls	r3, r3, #5
 266 005e 1344     		add	r3, r3, r2
 267 0060 03F51163 		add	r3, r3, #2320
 268 0064 0022     		movs	r2, #0
 269 0066 1A60     		str	r2, [r3]
 162:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otgp->ie[i].DIEPINT = 0xFFFFFFFF;
 270              		.loc 2 162 0
 271 0068 029A     		ldr	r2, [sp, #8]
 272 006a 039B     		ldr	r3, [sp, #12]
 273 006c 5B01     		lsls	r3, r3, #5
 274 006e 1344     		add	r3, r3, r2
 275 0070 03F60813 		addw	r3, r3, #2312
 276 0074 4FF0FF32 		mov	r2, #-1
 277 0078 1A60     		str	r2, [r3]
 163:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     /* Disable only if enabled because this sentence in the manual:
 164:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****        "The application must set this bit only if Endpoint Enable is
 165:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****         already set for this endpoint".
 166:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****        Note that the attempt to disable the OUT EP0 is ignored by the
 167:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****        hardware but the code is simpler this way.*/
 168:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     if ((otgp->oe[i].DOEPCTL & DOEPCTL_EPENA) != 0) {
 278              		.loc 2 168 0
 279 007a 029A     		ldr	r2, [sp, #8]
 280 007c 039B     		ldr	r3, [sp, #12]
 281 007e 5833     		adds	r3, r3, #88
 282 0080 5B01     		lsls	r3, r3, #5
 283 0082 1344     		add	r3, r3, r2
 284 0084 1B68     		ldr	r3, [r3]
 285 0086 002B     		cmp	r3, #0
 286 0088 14DA     		bge	.L13
 169:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       otgp->oe[i].DOEPCTL = DOEPCTL_EPDIS;
 287              		.loc 2 169 0
 288 008a 029A     		ldr	r2, [sp, #8]
 289 008c 039B     		ldr	r3, [sp, #12]
 290 008e 5833     		adds	r3, r3, #88
 291 0090 5B01     		lsls	r3, r3, #5
 292 0092 1344     		add	r3, r3, r2
 293 0094 4FF08042 		mov	r2, #1073741824
 294 0098 1A60     		str	r2, [r3]
 170:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       /* Wait for endpoint disable.*/
 171:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       while (!(otgp->oe[i].DOEPINT & DOEPINT_OTEPDIS))
 295              		.loc 2 171 0
 296 009a 00BF     		nop
 297              	.L14:
 298              		.loc 2 171 0 is_stmt 0 discriminator 1
 299 009c 029A     		ldr	r2, [sp, #8]
 300 009e 039B     		ldr	r3, [sp, #12]
 301 00a0 5B01     		lsls	r3, r3, #5
 302 00a2 1344     		add	r3, r3, r2
 303 00a4 03F60833 		addw	r3, r3, #2824
 304 00a8 1B68     		ldr	r3, [r3]
 305 00aa 03F01003 		and	r3, r3, #16
 306 00ae 002B     		cmp	r3, #0
 307 00b0 F4D0     		beq	.L14
 308 00b2 06E0     		b	.L15
 309              	.L13:
 172:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****         ;
 173:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     }
 174:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     else
 175:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       otgp->oe[i].DOEPCTL = 0;
 310              		.loc 2 175 0 is_stmt 1
 311 00b4 029A     		ldr	r2, [sp, #8]
 312 00b6 039B     		ldr	r3, [sp, #12]
 313 00b8 5833     		adds	r3, r3, #88
 314 00ba 5B01     		lsls	r3, r3, #5
 315 00bc 1344     		add	r3, r3, r2
 316 00be 0022     		movs	r2, #0
 317 00c0 1A60     		str	r2, [r3]
 318              	.L15:
 176:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otgp->oe[i].DOEPTSIZ = 0;
 319              		.loc 2 176 0
 320 00c2 029A     		ldr	r2, [sp, #8]
 321 00c4 039B     		ldr	r3, [sp, #12]
 322 00c6 5B01     		lsls	r3, r3, #5
 323 00c8 1344     		add	r3, r3, r2
 324 00ca 03F53163 		add	r3, r3, #2832
 325 00ce 0022     		movs	r2, #0
 326 00d0 1A60     		str	r2, [r3]
 177:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otgp->oe[i].DOEPINT = 0xFFFFFFFF;
 327              		.loc 2 177 0
 328 00d2 029A     		ldr	r2, [sp, #8]
 329 00d4 039B     		ldr	r3, [sp, #12]
 330 00d6 5B01     		lsls	r3, r3, #5
 331 00d8 1344     		add	r3, r3, r2
 332 00da 03F60833 		addw	r3, r3, #2824
 333 00de 4FF0FF32 		mov	r2, #-1
 334 00e2 1A60     		str	r2, [r3]
 149:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     /* Disable only if enabled because this sentence in the manual:
 335              		.loc 2 149 0
 336 00e4 039B     		ldr	r3, [sp, #12]
 337 00e6 0133     		adds	r3, r3, #1
 338 00e8 0393     		str	r3, [sp, #12]
 339              	.L9:
 149:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     /* Disable only if enabled because this sentence in the manual:
 340              		.loc 2 149 0 is_stmt 0 discriminator 1
 341 00ea 019B     		ldr	r3, [sp, #4]
 342 00ec 1B6C     		ldr	r3, [r3, #64]
 343 00ee 9A68     		ldr	r2, [r3, #8]
 344 00f0 039B     		ldr	r3, [sp, #12]
 345 00f2 9A42     		cmp	r2, r3
 346 00f4 8CD2     		bcs	.L16
 178:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   }
 179:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   otgp->DAINTMSK = DAINTMSK_OEPM(0) | DAINTMSK_IEPM(0);
 347              		.loc 2 179 0 is_stmt 1
 348 00f6 029B     		ldr	r3, [sp, #8]
 349 00f8 4FF00112 		mov	r2, #65537
 350 00fc C3F81C28 		str	r2, [r3, #2076]
 180:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 351              		.loc 2 180 0
 352 0100 04B0     		add	sp, sp, #16
 353              		@ sp needed
 354 0102 7047     		bx	lr
 355              		.cfi_endproc
 356              	.LFE120:
 358 0104 AFF30080 		.section	.text.otg_rxfifo_flush,"ax",%progbits
 358      AFF30080 
 358      AFF30080 
 359              		.align	2
 360              		.p2align 4,,15
 361              		.thumb
 362              		.thumb_func
 364              	otg_rxfifo_flush:
 365              	.LFB121:
 181:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 182:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** static void otg_rxfifo_flush(USBDriver *usbp) {
 366              		.loc 2 182 0
 367              		.cfi_startproc
 368              		@ args = 0, pretend = 0, frame = 16
 369              		@ frame_needed = 0, uses_anonymous_args = 0
 370 0000 00B5     		push	{lr}
 371              		.cfi_def_cfa_offset 4
 372              		.cfi_offset 14, -4
 373 0002 85B0     		sub	sp, sp, #20
 374              		.cfi_def_cfa_offset 24
 375 0004 0190     		str	r0, [sp, #4]
 183:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   stm32_otg_t *otgp = usbp->otg;
 376              		.loc 2 183 0
 377 0006 019B     		ldr	r3, [sp, #4]
 378 0008 DB6B     		ldr	r3, [r3, #60]
 379 000a 0393     		str	r3, [sp, #12]
 184:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 185:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   otgp->GRSTCTL = GRSTCTL_RXFFLSH;
 380              		.loc 2 185 0
 381 000c 039B     		ldr	r3, [sp, #12]
 382 000e 1022     		movs	r2, #16
 383 0010 1A61     		str	r2, [r3, #16]
 186:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   while ((otgp->GRSTCTL & GRSTCTL_RXFFLSH) != 0)
 384              		.loc 2 186 0
 385 0012 00BF     		nop
 386              	.L18:
 387              		.loc 2 186 0 is_stmt 0 discriminator 1
 388 0014 039B     		ldr	r3, [sp, #12]
 389 0016 1B69     		ldr	r3, [r3, #16]
 390 0018 03F01003 		and	r3, r3, #16
 391 001c 002B     		cmp	r3, #0
 392 001e F9D1     		bne	.L18
 187:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     ;
 188:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   /* Wait for 3 PHY Clocks.*/
 189:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   halPolledDelay(12);
 393              		.loc 2 189 0 is_stmt 1
 394 0020 0C20     		movs	r0, #12
 395 0022 FFF7FEFF 		bl	halPolledDelay
 190:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 396              		.loc 2 190 0
 397 0026 05B0     		add	sp, sp, #20
 398              		@ sp needed
 399 0028 5DF804FB 		ldr	pc, [sp], #4
 400              		.cfi_endproc
 401              	.LFE121:
 403 002c AFF30080 		.section	.text.otg_txfifo_flush,"ax",%progbits
 404              		.align	2
 405              		.p2align 4,,15
 406              		.thumb
 407              		.thumb_func
 409              	otg_txfifo_flush:
 410              	.LFB122:
 191:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 192:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** static void otg_txfifo_flush(USBDriver *usbp, uint32_t fifo) {
 411              		.loc 2 192 0
 412              		.cfi_startproc
 413              		@ args = 0, pretend = 0, frame = 16
 414              		@ frame_needed = 0, uses_anonymous_args = 0
 415 0000 00B5     		push	{lr}
 416              		.cfi_def_cfa_offset 4
 417              		.cfi_offset 14, -4
 418 0002 85B0     		sub	sp, sp, #20
 419              		.cfi_def_cfa_offset 24
 420 0004 0190     		str	r0, [sp, #4]
 421 0006 0091     		str	r1, [sp]
 193:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   stm32_otg_t *otgp = usbp->otg;
 422              		.loc 2 193 0
 423 0008 019B     		ldr	r3, [sp, #4]
 424 000a DB6B     		ldr	r3, [r3, #60]
 425 000c 0393     		str	r3, [sp, #12]
 194:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 195:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   otgp->GRSTCTL = GRSTCTL_TXFNUM(fifo) | GRSTCTL_TXFFLSH;
 426              		.loc 2 195 0
 427 000e 009B     		ldr	r3, [sp]
 428 0010 9B01     		lsls	r3, r3, #6
 429 0012 43F02002 		orr	r2, r3, #32
 430 0016 039B     		ldr	r3, [sp, #12]
 431 0018 1A61     		str	r2, [r3, #16]
 196:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   while ((otgp->GRSTCTL & GRSTCTL_TXFFLSH) != 0)
 432              		.loc 2 196 0
 433 001a 00BF     		nop
 434              	.L20:
 435              		.loc 2 196 0 is_stmt 0 discriminator 1
 436 001c 039B     		ldr	r3, [sp, #12]
 437 001e 1B69     		ldr	r3, [r3, #16]
 438 0020 03F02003 		and	r3, r3, #32
 439 0024 002B     		cmp	r3, #0
 440 0026 F9D1     		bne	.L20
 197:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     ;
 198:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   /* Wait for 3 PHY Clocks.*/
 199:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   halPolledDelay(12);
 441              		.loc 2 199 0 is_stmt 1
 442 0028 0C20     		movs	r0, #12
 443 002a FFF7FEFF 		bl	halPolledDelay
 200:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 444              		.loc 2 200 0
 445 002e 05B0     		add	sp, sp, #20
 446              		@ sp needed
 447 0030 5DF804FB 		ldr	pc, [sp], #4
 448              		.cfi_endproc
 449              	.LFE122:
 451 0034 AFF30080 		.section	.text.otg_ram_reset,"ax",%progbits
 451      AFF30080 
 451      AFF30080 
 452              		.align	2
 453              		.p2align 4,,15
 454              		.thumb
 455              		.thumb_func
 457              	otg_ram_reset:
 458              	.LFB123:
 201:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 202:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /**
 203:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @brief   Resets the FIFO RAM memory allocator.
 204:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 205:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 206:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 207:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @notapi
 208:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  */
 209:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** static void otg_ram_reset(USBDriver *usbp) {
 459              		.loc 2 209 0
 460              		.cfi_startproc
 461              		@ args = 0, pretend = 0, frame = 8
 462              		@ frame_needed = 0, uses_anonymous_args = 0
 463              		@ link register save eliminated.
 464 0000 82B0     		sub	sp, sp, #8
 465              		.cfi_def_cfa_offset 8
 466 0002 0190     		str	r0, [sp, #4]
 210:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 211:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   usbp->pmnext = usbp->otgparams->rx_fifo_size;
 467              		.loc 2 211 0
 468 0004 019B     		ldr	r3, [sp, #4]
 469 0006 1B6C     		ldr	r3, [r3, #64]
 470 0008 1A68     		ldr	r2, [r3]
 471 000a 019B     		ldr	r3, [sp, #4]
 472 000c 5A64     		str	r2, [r3, #68]
 212:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 473              		.loc 2 212 0
 474 000e 02B0     		add	sp, sp, #8
 475              		@ sp needed
 476 0010 7047     		bx	lr
 477              		.cfi_endproc
 478              	.LFE123:
 480 0012 00BFAFF3 		.section	.rodata
 480      0080AFF3 
 480      0080AFF3 
 480      0080
 481              		.align	2
 482              	.LC0:
 483 0000 6F74675F 		.ascii	"otg_fifo_alloc(), #1\000"
 483      6669666F 
 483      5F616C6C 
 483      6F632829 
 483      2C202331 
 484              		.section	.text.otg_ram_alloc,"ax",%progbits
 485              		.align	2
 486              		.p2align 4,,15
 487              		.thumb
 488              		.thumb_func
 490              	otg_ram_alloc:
 491              	.LFB124:
 213:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 214:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /**
 215:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @brief   Allocates a block from the FIFO RAM memory.
 216:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 217:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 218:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] size      size of the packet buffer to allocate in words
 219:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 220:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @notapi
 221:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  */
 222:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** static uint32_t otg_ram_alloc(USBDriver *usbp, size_t size) {
 492              		.loc 2 222 0
 493              		.cfi_startproc
 494              		@ args = 0, pretend = 0, frame = 16
 495              		@ frame_needed = 0, uses_anonymous_args = 0
 496 0000 00B5     		push	{lr}
 497              		.cfi_def_cfa_offset 4
 498              		.cfi_offset 14, -4
 499 0002 85B0     		sub	sp, sp, #20
 500              		.cfi_def_cfa_offset 24
 501 0004 0190     		str	r0, [sp, #4]
 502 0006 0091     		str	r1, [sp]
 223:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   uint32_t next;
 224:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 225:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   next = usbp->pmnext;
 503              		.loc 2 225 0
 504 0008 019B     		ldr	r3, [sp, #4]
 505 000a 5B6C     		ldr	r3, [r3, #68]
 506 000c 0393     		str	r3, [sp, #12]
 226:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   usbp->pmnext += size;
 507              		.loc 2 226 0
 508 000e 019B     		ldr	r3, [sp, #4]
 509 0010 5A6C     		ldr	r2, [r3, #68]
 510 0012 009B     		ldr	r3, [sp]
 511 0014 1A44     		add	r2, r2, r3
 512 0016 019B     		ldr	r3, [sp, #4]
 513 0018 5A64     		str	r2, [r3, #68]
 227:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   chDbgAssert(usbp->pmnext <= usbp->otgparams->otg_ram_size,
 514              		.loc 2 227 0
 515 001a 019B     		ldr	r3, [sp, #4]
 516 001c 5A6C     		ldr	r2, [r3, #68]
 517 001e 019B     		ldr	r3, [sp, #4]
 518 0020 1B6C     		ldr	r3, [r3, #64]
 519 0022 5B68     		ldr	r3, [r3, #4]
 520 0024 9A42     		cmp	r2, r3
 521 0026 02D9     		bls	.L23
 522              		.loc 2 227 0 is_stmt 0 discriminator 1
 523 0028 0348     		ldr	r0, .L25
 524 002a FFF7FEFF 		bl	chDbgPanic
 525              	.L23:
 228:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****               "otg_fifo_alloc(), #1", "OTG FIFO memory overflow");
 229:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   return next;
 526              		.loc 2 229 0 is_stmt 1
 527 002e 039B     		ldr	r3, [sp, #12]
 230:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 528              		.loc 2 230 0
 529 0030 1846     		mov	r0, r3
 530 0032 05B0     		add	sp, sp, #20
 531              		@ sp needed
 532 0034 5DF804FB 		ldr	pc, [sp], #4
 533              	.L26:
 534              		.align	2
 535              	.L25:
 536 0038 00000000 		.word	.LC0
 537              		.cfi_endproc
 538              	.LFE124:
 540 003c AFF30080 		.section	.text.otg_do_push,"ax",%progbits
 541              		.align	2
 542              		.p2align 4,,15
 543              		.thumb
 544              		.thumb_func
 546              	otg_do_push:
 547              	.LFB125:
 231:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 232:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /**
 233:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @brief   Pushes a series of words into a FIFO.
 234:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 235:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] fifop     pointer to the FIFO register
 236:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] buf       pointer to the words buffer, not necessarily word
 237:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *                      aligned
 238:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] n         number of words to push
 239:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 240:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @return              A pointer after the last word pushed.
 241:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 242:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @notapi
 243:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  */
 244:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** static uint8_t *otg_do_push(volatile uint32_t *fifop, uint8_t *buf, size_t n) {
 548              		.loc 2 244 0
 549              		.cfi_startproc
 550              		@ args = 0, pretend = 0, frame = 16
 551              		@ frame_needed = 0, uses_anonymous_args = 0
 552              		@ link register save eliminated.
 553 0000 84B0     		sub	sp, sp, #16
 554              		.cfi_def_cfa_offset 16
 555 0002 0390     		str	r0, [sp, #12]
 556 0004 0291     		str	r1, [sp, #8]
 557 0006 0192     		str	r2, [sp, #4]
 245:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 246:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   while (n > 0) {
 558              		.loc 2 246 0
 559 0008 09E0     		b	.L28
 560              	.L29:
 247:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     /* Note, this line relies on the Cortex-M3/M4 ability to perform
 248:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****        unaligned word accesses and on the LSB-first memory organization.*/
 249:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     *fifop = *((uint32_t *)buf);
 561              		.loc 2 249 0
 562 000a 029B     		ldr	r3, [sp, #8]
 563 000c 1A68     		ldr	r2, [r3]
 564 000e 039B     		ldr	r3, [sp, #12]
 565 0010 1A60     		str	r2, [r3]
 250:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     buf += 4;
 566              		.loc 2 250 0
 567 0012 029B     		ldr	r3, [sp, #8]
 568 0014 0433     		adds	r3, r3, #4
 569 0016 0293     		str	r3, [sp, #8]
 251:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     n--;
 570              		.loc 2 251 0
 571 0018 019B     		ldr	r3, [sp, #4]
 572 001a 013B     		subs	r3, r3, #1
 573 001c 0193     		str	r3, [sp, #4]
 574              	.L28:
 246:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     /* Note, this line relies on the Cortex-M3/M4 ability to perform
 575              		.loc 2 246 0 discriminator 1
 576 001e 019B     		ldr	r3, [sp, #4]
 577 0020 002B     		cmp	r3, #0
 578 0022 F2D1     		bne	.L29
 252:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   }
 253:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   return buf;
 579              		.loc 2 253 0
 580 0024 029B     		ldr	r3, [sp, #8]
 254:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 581              		.loc 2 254 0
 582 0026 1846     		mov	r0, r3
 583 0028 04B0     		add	sp, sp, #16
 584              		@ sp needed
 585 002a 7047     		bx	lr
 586              		.cfi_endproc
 587              	.LFE125:
 589 002c AFF30080 		.section	.text.otg_fifo_write_from_buffer,"ax",%progbits
 590              		.align	2
 591              		.p2align 4,,15
 592              		.thumb
 593              		.thumb_func
 595              	otg_fifo_write_from_buffer:
 596              	.LFB126:
 255:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 256:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /**
 257:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @brief   Writes to a TX FIFO.
 258:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 259:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] fifop     pointer to the FIFO register
 260:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] buf       buffer where to copy the endpoint data
 261:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] n         maximum number of bytes to copy
 262:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 263:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @notapi
 264:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  */
 265:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** static void otg_fifo_write_from_buffer(volatile uint32_t *fifop,
 266:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                                        const uint8_t *buf,
 267:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                                        size_t n) {
 597              		.loc 2 267 0
 598              		.cfi_startproc
 599              		@ args = 0, pretend = 0, frame = 16
 600              		@ frame_needed = 0, uses_anonymous_args = 0
 601 0000 00B5     		push	{lr}
 602              		.cfi_def_cfa_offset 4
 603              		.cfi_offset 14, -4
 604 0002 85B0     		sub	sp, sp, #20
 605              		.cfi_def_cfa_offset 24
 606 0004 0390     		str	r0, [sp, #12]
 607 0006 0291     		str	r1, [sp, #8]
 608 0008 0192     		str	r2, [sp, #4]
 268:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 269:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   otg_do_push(fifop, (uint8_t *)buf, (n + 3) / 4);
 609              		.loc 2 269 0
 610 000a 019B     		ldr	r3, [sp, #4]
 611 000c 0333     		adds	r3, r3, #3
 612 000e 9B08     		lsrs	r3, r3, #2
 613 0010 0398     		ldr	r0, [sp, #12]
 614 0012 0299     		ldr	r1, [sp, #8]
 615 0014 1A46     		mov	r2, r3
 616 0016 FFF7FEFF 		bl	otg_do_push
 270:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 617              		.loc 2 270 0
 618 001a 05B0     		add	sp, sp, #20
 619              		@ sp needed
 620 001c 5DF804FB 		ldr	pc, [sp], #4
 621              		.cfi_endproc
 622              	.LFE126:
 624              		.section	.text.otg_fifo_write_from_queue,"ax",%progbits
 625              		.align	2
 626              		.p2align 4,,15
 627              		.thumb
 628              		.thumb_func
 630              	otg_fifo_write_from_queue:
 631              	.LFB127:
 271:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 272:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /**
 273:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @brief   Writes to a TX FIFO fetching data from a queue.
 274:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 275:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] fifop     pointer to the FIFO register
 276:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] oqp       pointer to an @p OutputQueue object
 277:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] n         maximum number of bytes to copy
 278:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 279:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @notapi
 280:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  */
 281:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** static void otg_fifo_write_from_queue(volatile uint32_t *fifop,
 282:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                                       OutputQueue *oqp,
 283:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                                       size_t n) {
 632              		.loc 2 283 0
 633              		.cfi_startproc
 634              		@ args = 0, pretend = 0, frame = 40
 635              		@ frame_needed = 0, uses_anonymous_args = 0
 636 0000 00B5     		push	{lr}
 637              		.cfi_def_cfa_offset 4
 638              		.cfi_offset 14, -4
 639 0002 8BB0     		sub	sp, sp, #44
 640              		.cfi_def_cfa_offset 48
 641 0004 0390     		str	r0, [sp, #12]
 642 0006 0291     		str	r1, [sp, #8]
 643 0008 0192     		str	r2, [sp, #4]
 284:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   size_t ntogo;
 285:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 286:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   ntogo = n;
 644              		.loc 2 286 0
 645 000a 019B     		ldr	r3, [sp, #4]
 646 000c 0993     		str	r3, [sp, #36]
 287:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   while (ntogo > 0) {
 647              		.loc 2 287 0
 648 000e 60E0     		b	.L33
 649              	.L42:
 650              	.LBB2:
 288:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     uint32_t w, i;
 289:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     size_t nw = ntogo / 4;
 651              		.loc 2 289 0
 652 0010 099B     		ldr	r3, [sp, #36]
 653 0012 9B08     		lsrs	r3, r3, #2
 654 0014 0693     		str	r3, [sp, #24]
 290:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 291:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     if (nw > 0) {
 655              		.loc 2 291 0
 656 0016 069B     		ldr	r3, [sp, #24]
 657 0018 002B     		cmp	r3, #0
 658 001a 2AD0     		beq	.L34
 659              	.LBB3:
 292:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       size_t streak;
 293:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       uint32_t nw2end = (oqp->q_top - oqp->q_rdptr) / 4;
 660              		.loc 2 293 0
 661 001c 029B     		ldr	r3, [sp, #8]
 662 001e 1B69     		ldr	r3, [r3, #16]
 663 0020 1A46     		mov	r2, r3
 664 0022 029B     		ldr	r3, [sp, #8]
 665 0024 9B69     		ldr	r3, [r3, #24]
 666 0026 D31A     		subs	r3, r2, r3
 667 0028 002B     		cmp	r3, #0
 668 002a 00DA     		bge	.L35
 669 002c 0333     		adds	r3, r3, #3
 670              	.L35:
 671 002e 9B10     		asrs	r3, r3, #2
 672 0030 0593     		str	r3, [sp, #20]
 294:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 295:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       ntogo -= (streak = nw <= nw2end ? nw : nw2end) * 4;
 673              		.loc 2 295 0
 674 0032 069A     		ldr	r2, [sp, #24]
 675 0034 059B     		ldr	r3, [sp, #20]
 676 0036 9A42     		cmp	r2, r3
 677 0038 38BF     		it	cc
 678 003a 1346     		movcc	r3, r2
 679 003c 0493     		str	r3, [sp, #16]
 680 003e 049B     		ldr	r3, [sp, #16]
 681 0040 9B00     		lsls	r3, r3, #2
 682 0042 099A     		ldr	r2, [sp, #36]
 683 0044 D31A     		subs	r3, r2, r3
 684 0046 0993     		str	r3, [sp, #36]
 296:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       oqp->q_rdptr = otg_do_push(fifop, oqp->q_rdptr, streak);
 685              		.loc 2 296 0
 686 0048 029B     		ldr	r3, [sp, #8]
 687 004a 9B69     		ldr	r3, [r3, #24]
 688 004c 0398     		ldr	r0, [sp, #12]
 689 004e 1946     		mov	r1, r3
 690 0050 049A     		ldr	r2, [sp, #16]
 691 0052 FFF7FEFF 		bl	otg_do_push
 692 0056 0246     		mov	r2, r0
 693 0058 029B     		ldr	r3, [sp, #8]
 694 005a 9A61     		str	r2, [r3, #24]
 297:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       if (oqp->q_rdptr >= oqp->q_top) {
 695              		.loc 2 297 0
 696 005c 029B     		ldr	r3, [sp, #8]
 697 005e 9A69     		ldr	r2, [r3, #24]
 698 0060 029B     		ldr	r3, [sp, #8]
 699 0062 1B69     		ldr	r3, [r3, #16]
 700 0064 9A42     		cmp	r2, r3
 701 0066 04D3     		bcc	.L34
 298:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****         oqp->q_rdptr = oqp->q_buffer;
 702              		.loc 2 298 0
 703 0068 029B     		ldr	r3, [sp, #8]
 704 006a DA68     		ldr	r2, [r3, #12]
 705 006c 029B     		ldr	r3, [sp, #8]
 706 006e 9A61     		str	r2, [r3, #24]
 299:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****         continue;
 707              		.loc 2 299 0
 708 0070 2FE0     		b	.L33
 709              	.L34:
 710              	.LBE3:
 300:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       }
 301:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     }
 302:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 303:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     /* If this condition is not satisfied then there is a word lying across
 304:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****        queue circular buffer boundary or there are some remaining bytes.*/
 305:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     if (ntogo <= 0)
 711              		.loc 2 305 0
 712 0072 099B     		ldr	r3, [sp, #36]
 713 0074 002B     		cmp	r3, #0
 714 0076 00D1     		bne	.L36
 306:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       break;
 715              		.loc 2 306 0
 716 0078 2EE0     		b	.L37
 717              	.L36:
 307:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 308:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     /* One byte at time.*/
 309:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     w = 0;
 718              		.loc 2 309 0
 719 007a 0023     		movs	r3, #0
 720 007c 0893     		str	r3, [sp, #32]
 310:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     i = 0;
 721              		.loc 2 310 0
 722 007e 0023     		movs	r3, #0
 723 0080 0793     		str	r3, [sp, #28]
 311:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     while ((ntogo > 0) && (i < 4)) {
 724              		.loc 2 311 0
 725 0082 1DE0     		b	.L38
 726              	.L41:
 312:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       w |= (uint32_t)*oqp->q_rdptr++ << (i * 8);
 727              		.loc 2 312 0
 728 0084 029B     		ldr	r3, [sp, #8]
 729 0086 9B69     		ldr	r3, [r3, #24]
 730 0088 591C     		adds	r1, r3, #1
 731 008a 029A     		ldr	r2, [sp, #8]
 732 008c 9161     		str	r1, [r2, #24]
 733 008e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 734 0090 1A46     		mov	r2, r3
 735 0092 079B     		ldr	r3, [sp, #28]
 736 0094 DB00     		lsls	r3, r3, #3
 737 0096 02FA03F3 		lsl	r3, r2, r3
 738 009a 089A     		ldr	r2, [sp, #32]
 739 009c 1343     		orrs	r3, r3, r2
 740 009e 0893     		str	r3, [sp, #32]
 313:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       if (oqp->q_rdptr >= oqp->q_top)
 741              		.loc 2 313 0
 742 00a0 029B     		ldr	r3, [sp, #8]
 743 00a2 9A69     		ldr	r2, [r3, #24]
 744 00a4 029B     		ldr	r3, [sp, #8]
 745 00a6 1B69     		ldr	r3, [r3, #16]
 746 00a8 9A42     		cmp	r2, r3
 747 00aa 03D3     		bcc	.L39
 314:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****         oqp->q_rdptr = oqp->q_buffer;
 748              		.loc 2 314 0
 749 00ac 029B     		ldr	r3, [sp, #8]
 750 00ae DA68     		ldr	r2, [r3, #12]
 751 00b0 029B     		ldr	r3, [sp, #8]
 752 00b2 9A61     		str	r2, [r3, #24]
 753              	.L39:
 315:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       ntogo--;
 754              		.loc 2 315 0
 755 00b4 099B     		ldr	r3, [sp, #36]
 756 00b6 013B     		subs	r3, r3, #1
 757 00b8 0993     		str	r3, [sp, #36]
 316:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       i++;
 758              		.loc 2 316 0
 759 00ba 079B     		ldr	r3, [sp, #28]
 760 00bc 0133     		adds	r3, r3, #1
 761 00be 0793     		str	r3, [sp, #28]
 762              	.L38:
 311:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       w |= (uint32_t)*oqp->q_rdptr++ << (i * 8);
 763              		.loc 2 311 0 discriminator 1
 764 00c0 099B     		ldr	r3, [sp, #36]
 765 00c2 002B     		cmp	r3, #0
 766 00c4 02D0     		beq	.L40
 311:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       w |= (uint32_t)*oqp->q_rdptr++ << (i * 8);
 767              		.loc 2 311 0 is_stmt 0 discriminator 2
 768 00c6 079B     		ldr	r3, [sp, #28]
 769 00c8 032B     		cmp	r3, #3
 770 00ca DBD9     		bls	.L41
 771              	.L40:
 317:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     }
 318:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     *fifop = w;
 772              		.loc 2 318 0 is_stmt 1
 773 00cc 039B     		ldr	r3, [sp, #12]
 774 00ce 089A     		ldr	r2, [sp, #32]
 775 00d0 1A60     		str	r2, [r3]
 776              	.L33:
 777              	.LBE2:
 287:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     uint32_t w, i;
 778              		.loc 2 287 0 discriminator 1
 779 00d2 099B     		ldr	r3, [sp, #36]
 780 00d4 002B     		cmp	r3, #0
 781 00d6 9BD1     		bne	.L42
 782              	.L37:
 783              	.LBB4:
 319:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   }
 320:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 321:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   /* Updating queue.*/
 322:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   chSysLock();
 784              		.loc 2 322 0
 785 00d8 2023     		movs	r3, #32
 786              	@ 322 "/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c" 1
 787 00da 83F31188 		msr     BASEPRI, r3
 788              	@ 0 "" 2
 789              		.thumb
 790              	.LBE4:
 791 00de FFF7FEFF 		bl	dbg_check_lock
 323:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   oqp->q_counter += n;
 792              		.loc 2 323 0
 793 00e2 029B     		ldr	r3, [sp, #8]
 794 00e4 9A68     		ldr	r2, [r3, #8]
 795 00e6 019B     		ldr	r3, [sp, #4]
 796 00e8 1A44     		add	r2, r2, r3
 797 00ea 029B     		ldr	r3, [sp, #8]
 798 00ec 9A60     		str	r2, [r3, #8]
 324:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   while (notempty(&oqp->q_waiting))
 799              		.loc 2 324 0
 800 00ee 0AE0     		b	.L43
 801              	.L44:
 325:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     chSchReadyI(fifo_remove(&oqp->q_waiting))->p_u.rdymsg = Q_OK;
 802              		.loc 2 325 0
 803 00f0 029B     		ldr	r3, [sp, #8]
 804 00f2 1846     		mov	r0, r3
 805 00f4 FFF7FEFF 		bl	fifo_remove
 806 00f8 0346     		mov	r3, r0
 807 00fa 1846     		mov	r0, r3
 808 00fc FFF7FEFF 		bl	chSchReadyI
 809 0100 0346     		mov	r3, r0
 810 0102 0022     		movs	r2, #0
 811 0104 9A62     		str	r2, [r3, #40]
 812              	.L43:
 324:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   while (notempty(&oqp->q_waiting))
 813              		.loc 2 324 0 discriminator 1
 814 0106 029B     		ldr	r3, [sp, #8]
 815 0108 1A68     		ldr	r2, [r3]
 816 010a 029B     		ldr	r3, [sp, #8]
 817 010c 9A42     		cmp	r2, r3
 818 010e EFD1     		bne	.L44
 326:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   chSchRescheduleS();
 819              		.loc 2 326 0
 820 0110 FFF7FEFF 		bl	chSchRescheduleS
 327:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   chSysUnlock();
 821              		.loc 2 327 0
 822 0114 FFF7FEFF 		bl	dbg_check_unlock
 823              	.LBB5:
 824 0118 0023     		movs	r3, #0
 825              	@ 327 "/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c" 1
 826 011a 83F31188 		msr     BASEPRI, r3
 827              	@ 0 "" 2
 828              		.thumb
 829              	.LBE5:
 328:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 830              		.loc 2 328 0
 831 011e 0BB0     		add	sp, sp, #44
 832              		@ sp needed
 833 0120 5DF804FB 		ldr	pc, [sp], #4
 834              		.cfi_endproc
 835              	.LFE127:
 837 0124 AFF30080 		.section	.text.otg_do_pop,"ax",%progbits
 837      AFF30080 
 837      AFF30080 
 838              		.align	2
 839              		.p2align 4,,15
 840              		.thumb
 841              		.thumb_func
 843              	otg_do_pop:
 844              	.LFB128:
 329:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 330:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /**
 331:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @brief   Pops a series of words from a FIFO.
 332:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 333:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] fifop     pointer to the FIFO register
 334:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] buf       pointer to the words buffer, not necessarily word
 335:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *                      aligned
 336:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] n         number of words to push
 337:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 338:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @return              A pointer after the last word pushed.
 339:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 340:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @notapi
 341:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  */
 342:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** static uint8_t *otg_do_pop(volatile uint32_t *fifop, uint8_t *buf, size_t n) {
 845              		.loc 2 342 0
 846              		.cfi_startproc
 847              		@ args = 0, pretend = 0, frame = 24
 848              		@ frame_needed = 0, uses_anonymous_args = 0
 849              		@ link register save eliminated.
 850 0000 86B0     		sub	sp, sp, #24
 851              		.cfi_def_cfa_offset 24
 852 0002 0390     		str	r0, [sp, #12]
 853 0004 0291     		str	r1, [sp, #8]
 854 0006 0192     		str	r2, [sp, #4]
 343:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 344:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   while (n > 0) {
 855              		.loc 2 344 0
 856 0008 0BE0     		b	.L46
 857              	.L47:
 858              	.LBB6:
 345:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     uint32_t w = *fifop;
 859              		.loc 2 345 0
 860 000a 039B     		ldr	r3, [sp, #12]
 861 000c 1B68     		ldr	r3, [r3]
 862 000e 0593     		str	r3, [sp, #20]
 346:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     /* Note, this line relies on the Cortex-M3/M4 ability to perform
 347:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****        unaligned word accesses and on the LSB-first memory organization.*/
 348:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     *((uint32_t *)buf) = w;
 863              		.loc 2 348 0
 864 0010 029B     		ldr	r3, [sp, #8]
 865 0012 059A     		ldr	r2, [sp, #20]
 866 0014 1A60     		str	r2, [r3]
 349:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     buf += 4;
 867              		.loc 2 349 0
 868 0016 029B     		ldr	r3, [sp, #8]
 869 0018 0433     		adds	r3, r3, #4
 870 001a 0293     		str	r3, [sp, #8]
 350:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     n--;
 871              		.loc 2 350 0
 872 001c 019B     		ldr	r3, [sp, #4]
 873 001e 013B     		subs	r3, r3, #1
 874 0020 0193     		str	r3, [sp, #4]
 875              	.L46:
 876              	.LBE6:
 344:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     uint32_t w = *fifop;
 877              		.loc 2 344 0 discriminator 1
 878 0022 019B     		ldr	r3, [sp, #4]
 879 0024 002B     		cmp	r3, #0
 880 0026 F0D1     		bne	.L47
 351:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   }
 352:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   return buf;
 881              		.loc 2 352 0
 882 0028 029B     		ldr	r3, [sp, #8]
 353:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 883              		.loc 2 353 0
 884 002a 1846     		mov	r0, r3
 885 002c 06B0     		add	sp, sp, #24
 886              		@ sp needed
 887 002e 7047     		bx	lr
 888              		.cfi_endproc
 889              	.LFE128:
 891              		.section	.text.otg_fifo_read_to_buffer,"ax",%progbits
 892              		.align	2
 893              		.p2align 4,,15
 894              		.thumb
 895              		.thumb_func
 897              	otg_fifo_read_to_buffer:
 898              	.LFB129:
 354:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 355:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /**
 356:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @brief   Reads a packet from the RXFIFO.
 357:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 358:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] fifop     pointer to the FIFO register
 359:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[out] buf      buffer where to copy the endpoint data
 360:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] n         number of bytes to pull from the FIFO
 361:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] max       number of bytes to copy into the buffer
 362:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 363:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @notapi
 364:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  */
 365:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** static void otg_fifo_read_to_buffer(volatile uint32_t *fifop,
 366:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                                     uint8_t *buf,
 367:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                                     size_t n,
 368:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                                     size_t max) {
 899              		.loc 2 368 0
 900              		.cfi_startproc
 901              		@ args = 0, pretend = 0, frame = 24
 902              		@ frame_needed = 0, uses_anonymous_args = 0
 903              		@ link register save eliminated.
 904 0000 86B0     		sub	sp, sp, #24
 905              		.cfi_def_cfa_offset 24
 906 0002 0390     		str	r0, [sp, #12]
 907 0004 0291     		str	r1, [sp, #8]
 908 0006 0192     		str	r2, [sp, #4]
 909 0008 0093     		str	r3, [sp]
 369:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 370:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   n = (n + 3) / 4;
 910              		.loc 2 370 0
 911 000a 019B     		ldr	r3, [sp, #4]
 912 000c 0333     		adds	r3, r3, #3
 913 000e 9B08     		lsrs	r3, r3, #2
 914 0010 0193     		str	r3, [sp, #4]
 371:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   max = (max + 3) / 4;
 915              		.loc 2 371 0
 916 0012 009B     		ldr	r3, [sp]
 917 0014 0333     		adds	r3, r3, #3
 918 0016 9B08     		lsrs	r3, r3, #2
 919 0018 0093     		str	r3, [sp]
 372:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   while (n) {
 920              		.loc 2 372 0
 921 001a 11E0     		b	.L50
 922              	.L52:
 923              	.LBB7:
 373:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     uint32_t w = *fifop;
 924              		.loc 2 373 0
 925 001c 039B     		ldr	r3, [sp, #12]
 926 001e 1B68     		ldr	r3, [r3]
 927 0020 0593     		str	r3, [sp, #20]
 374:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     if (max) {
 928              		.loc 2 374 0
 929 0022 009B     		ldr	r3, [sp]
 930 0024 002B     		cmp	r3, #0
 931 0026 08D0     		beq	.L51
 375:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       /* Note, this line relies on the Cortex-M3/M4 ability to perform
 376:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****          unaligned word accesses and on the LSB-first memory organization.*/
 377:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       *((uint32_t *)buf) = w;
 932              		.loc 2 377 0
 933 0028 029B     		ldr	r3, [sp, #8]
 934 002a 059A     		ldr	r2, [sp, #20]
 935 002c 1A60     		str	r2, [r3]
 378:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       buf += 4;
 936              		.loc 2 378 0
 937 002e 029B     		ldr	r3, [sp, #8]
 938 0030 0433     		adds	r3, r3, #4
 939 0032 0293     		str	r3, [sp, #8]
 379:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       max--;
 940              		.loc 2 379 0
 941 0034 009B     		ldr	r3, [sp]
 942 0036 013B     		subs	r3, r3, #1
 943 0038 0093     		str	r3, [sp]
 944              	.L51:
 380:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     }
 381:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     n--;
 945              		.loc 2 381 0
 946 003a 019B     		ldr	r3, [sp, #4]
 947 003c 013B     		subs	r3, r3, #1
 948 003e 0193     		str	r3, [sp, #4]
 949              	.L50:
 950              	.LBE7:
 372:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     uint32_t w = *fifop;
 951              		.loc 2 372 0 discriminator 1
 952 0040 019B     		ldr	r3, [sp, #4]
 953 0042 002B     		cmp	r3, #0
 954 0044 EAD1     		bne	.L52
 382:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   }
 383:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 955              		.loc 2 383 0
 956 0046 06B0     		add	sp, sp, #24
 957              		@ sp needed
 958 0048 7047     		bx	lr
 959              		.cfi_endproc
 960              	.LFE129:
 962 004a 00BFAFF3 		.section	.text.otg_fifo_read_to_queue,"ax",%progbits
 962      0080
 963              		.align	2
 964              		.p2align 4,,15
 965              		.thumb
 966              		.thumb_func
 968              	otg_fifo_read_to_queue:
 969              	.LFB130:
 384:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 385:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /**
 386:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @brief   Reads a packet from the RXFIFO.
 387:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 388:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] fifop     pointer to the FIFO register
 389:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] iqp       pointer to an @p InputQueue object
 390:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] n         number of bytes to pull from the FIFO
 391:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 392:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @notapi
 393:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  */
 394:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** static void otg_fifo_read_to_queue(volatile uint32_t *fifop,
 395:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                                    InputQueue *iqp,
 396:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                                    size_t n) {
 970              		.loc 2 396 0
 971              		.cfi_startproc
 972              		@ args = 0, pretend = 0, frame = 40
 973              		@ frame_needed = 0, uses_anonymous_args = 0
 974 0000 00B5     		push	{lr}
 975              		.cfi_def_cfa_offset 4
 976              		.cfi_offset 14, -4
 977 0002 8BB0     		sub	sp, sp, #44
 978              		.cfi_def_cfa_offset 48
 979 0004 0390     		str	r0, [sp, #12]
 980 0006 0291     		str	r1, [sp, #8]
 981 0008 0192     		str	r2, [sp, #4]
 397:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   size_t ntogo;
 398:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 399:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   ntogo = n;
 982              		.loc 2 399 0
 983 000a 019B     		ldr	r3, [sp, #4]
 984 000c 0993     		str	r3, [sp, #36]
 400:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   while (ntogo > 0) {
 985              		.loc 2 400 0
 986 000e 53E0     		b	.L54
 987              	.L61:
 988              	.LBB8:
 401:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     uint32_t w, i;
 402:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     size_t nw = ntogo / 4;
 989              		.loc 2 402 0
 990 0010 099B     		ldr	r3, [sp, #36]
 991 0012 9B08     		lsrs	r3, r3, #2
 992 0014 0793     		str	r3, [sp, #28]
 403:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 404:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     if (nw > 0) {
 993              		.loc 2 404 0
 994 0016 079B     		ldr	r3, [sp, #28]
 995 0018 002B     		cmp	r3, #0
 996 001a 21D0     		beq	.L55
 997              	.LBB9:
 405:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       size_t streak;
 406:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       uint32_t nw2end = (iqp->q_wrptr - iqp->q_wrptr) / 4;
 998              		.loc 2 406 0
 999 001c 0023     		movs	r3, #0
 1000 001e 0693     		str	r3, [sp, #24]
 407:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 408:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       ntogo -= (streak = nw <= nw2end ? nw : nw2end) * 4;
 1001              		.loc 2 408 0
 1002 0020 079A     		ldr	r2, [sp, #28]
 1003 0022 069B     		ldr	r3, [sp, #24]
 1004 0024 9A42     		cmp	r2, r3
 1005 0026 38BF     		it	cc
 1006 0028 1346     		movcc	r3, r2
 1007 002a 0593     		str	r3, [sp, #20]
 1008 002c 059B     		ldr	r3, [sp, #20]
 1009 002e 9B00     		lsls	r3, r3, #2
 1010 0030 099A     		ldr	r2, [sp, #36]
 1011 0032 D31A     		subs	r3, r2, r3
 1012 0034 0993     		str	r3, [sp, #36]
 409:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       iqp->q_wrptr = otg_do_pop(fifop, iqp->q_wrptr, streak);
 1013              		.loc 2 409 0
 1014 0036 029B     		ldr	r3, [sp, #8]
 1015 0038 5B69     		ldr	r3, [r3, #20]
 1016 003a 0398     		ldr	r0, [sp, #12]
 1017 003c 1946     		mov	r1, r3
 1018 003e 059A     		ldr	r2, [sp, #20]
 1019 0040 FFF7FEFF 		bl	otg_do_pop
 1020 0044 0246     		mov	r2, r0
 1021 0046 029B     		ldr	r3, [sp, #8]
 1022 0048 5A61     		str	r2, [r3, #20]
 410:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       if (iqp->q_wrptr >= iqp->q_top) {
 1023              		.loc 2 410 0
 1024 004a 029B     		ldr	r3, [sp, #8]
 1025 004c 5A69     		ldr	r2, [r3, #20]
 1026 004e 029B     		ldr	r3, [sp, #8]
 1027 0050 1B69     		ldr	r3, [r3, #16]
 1028 0052 9A42     		cmp	r2, r3
 1029 0054 04D3     		bcc	.L55
 411:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****         iqp->q_wrptr = iqp->q_buffer;
 1030              		.loc 2 411 0
 1031 0056 029B     		ldr	r3, [sp, #8]
 1032 0058 DA68     		ldr	r2, [r3, #12]
 1033 005a 029B     		ldr	r3, [sp, #8]
 1034 005c 5A61     		str	r2, [r3, #20]
 412:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****         continue;
 1035              		.loc 2 412 0
 1036 005e 2BE0     		b	.L54
 1037              	.L55:
 1038              	.LBE9:
 413:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       }
 414:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     }
 415:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 416:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     /* If this condition is not satisfied then there is a word lying across
 417:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****        queue circular buffer boundary or there are some remaining bytes.*/
 418:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     if (ntogo <= 0)
 1039              		.loc 2 418 0
 1040 0060 099B     		ldr	r3, [sp, #36]
 1041 0062 002B     		cmp	r3, #0
 1042 0064 00D1     		bne	.L56
 419:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       break;
 1043              		.loc 2 419 0
 1044 0066 2AE0     		b	.L57
 1045              	.L56:
 420:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 421:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     /* One byte at time.*/
 422:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     w = *fifop;
 1046              		.loc 2 422 0
 1047 0068 039B     		ldr	r3, [sp, #12]
 1048 006a 1B68     		ldr	r3, [r3]
 1049 006c 0493     		str	r3, [sp, #16]
 423:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     i = 0;
 1050              		.loc 2 423 0
 1051 006e 0023     		movs	r3, #0
 1052 0070 0893     		str	r3, [sp, #32]
 424:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     while ((ntogo > 0) && (i < 4)) {
 1053              		.loc 2 424 0
 1054 0072 1BE0     		b	.L58
 1055              	.L60:
 425:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       *iqp->q_wrptr++ = (uint8_t)(w >> (i * 8));
 1056              		.loc 2 425 0
 1057 0074 029B     		ldr	r3, [sp, #8]
 1058 0076 5B69     		ldr	r3, [r3, #20]
 1059 0078 591C     		adds	r1, r3, #1
 1060 007a 029A     		ldr	r2, [sp, #8]
 1061 007c 5161     		str	r1, [r2, #20]
 1062 007e 089A     		ldr	r2, [sp, #32]
 1063 0080 D200     		lsls	r2, r2, #3
 1064 0082 0499     		ldr	r1, [sp, #16]
 1065 0084 21FA02F2 		lsr	r2, r1, r2
 1066 0088 D2B2     		uxtb	r2, r2
 1067 008a 1A70     		strb	r2, [r3]
 426:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       if (iqp->q_wrptr >= iqp->q_top)
 1068              		.loc 2 426 0
 1069 008c 029B     		ldr	r3, [sp, #8]
 1070 008e 5A69     		ldr	r2, [r3, #20]
 1071 0090 029B     		ldr	r3, [sp, #8]
 1072 0092 1B69     		ldr	r3, [r3, #16]
 1073 0094 9A42     		cmp	r2, r3
 1074 0096 03D3     		bcc	.L59
 427:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****         iqp->q_wrptr = iqp->q_buffer;
 1075              		.loc 2 427 0
 1076 0098 029B     		ldr	r3, [sp, #8]
 1077 009a DA68     		ldr	r2, [r3, #12]
 1078 009c 029B     		ldr	r3, [sp, #8]
 1079 009e 5A61     		str	r2, [r3, #20]
 1080              	.L59:
 428:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       ntogo--;
 1081              		.loc 2 428 0
 1082 00a0 099B     		ldr	r3, [sp, #36]
 1083 00a2 013B     		subs	r3, r3, #1
 1084 00a4 0993     		str	r3, [sp, #36]
 429:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       i++;
 1085              		.loc 2 429 0
 1086 00a6 089B     		ldr	r3, [sp, #32]
 1087 00a8 0133     		adds	r3, r3, #1
 1088 00aa 0893     		str	r3, [sp, #32]
 1089              	.L58:
 424:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       *iqp->q_wrptr++ = (uint8_t)(w >> (i * 8));
 1090              		.loc 2 424 0 discriminator 1
 1091 00ac 099B     		ldr	r3, [sp, #36]
 1092 00ae 002B     		cmp	r3, #0
 1093 00b0 02D0     		beq	.L54
 424:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       *iqp->q_wrptr++ = (uint8_t)(w >> (i * 8));
 1094              		.loc 2 424 0 is_stmt 0 discriminator 2
 1095 00b2 089B     		ldr	r3, [sp, #32]
 1096 00b4 032B     		cmp	r3, #3
 1097 00b6 DDD9     		bls	.L60
 1098              	.L54:
 1099              	.LBE8:
 400:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     uint32_t w, i;
 1100              		.loc 2 400 0 is_stmt 1 discriminator 1
 1101 00b8 099B     		ldr	r3, [sp, #36]
 1102 00ba 002B     		cmp	r3, #0
 1103 00bc A8D1     		bne	.L61
 1104              	.L57:
 1105              	.LBB10:
 430:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     }
 431:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   }
 432:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 433:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   /* Updating queue.*/
 434:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   chSysLock();
 1106              		.loc 2 434 0
 1107 00be 2023     		movs	r3, #32
 1108              	@ 434 "/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c" 1
 1109 00c0 83F31188 		msr     BASEPRI, r3
 1110              	@ 0 "" 2
 1111              		.thumb
 1112              	.LBE10:
 1113 00c4 FFF7FEFF 		bl	dbg_check_lock
 435:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   iqp->q_counter += n;
 1114              		.loc 2 435 0
 1115 00c8 029B     		ldr	r3, [sp, #8]
 1116 00ca 9A68     		ldr	r2, [r3, #8]
 1117 00cc 019B     		ldr	r3, [sp, #4]
 1118 00ce 1A44     		add	r2, r2, r3
 1119 00d0 029B     		ldr	r3, [sp, #8]
 1120 00d2 9A60     		str	r2, [r3, #8]
 436:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   while (notempty(&iqp->q_waiting))
 1121              		.loc 2 436 0
 1122 00d4 0AE0     		b	.L62
 1123              	.L63:
 437:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     chSchReadyI(fifo_remove(&iqp->q_waiting))->p_u.rdymsg = Q_OK;
 1124              		.loc 2 437 0
 1125 00d6 029B     		ldr	r3, [sp, #8]
 1126 00d8 1846     		mov	r0, r3
 1127 00da FFF7FEFF 		bl	fifo_remove
 1128 00de 0346     		mov	r3, r0
 1129 00e0 1846     		mov	r0, r3
 1130 00e2 FFF7FEFF 		bl	chSchReadyI
 1131 00e6 0346     		mov	r3, r0
 1132 00e8 0022     		movs	r2, #0
 1133 00ea 9A62     		str	r2, [r3, #40]
 1134              	.L62:
 436:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   while (notempty(&iqp->q_waiting))
 1135              		.loc 2 436 0 discriminator 1
 1136 00ec 029B     		ldr	r3, [sp, #8]
 1137 00ee 1A68     		ldr	r2, [r3]
 1138 00f0 029B     		ldr	r3, [sp, #8]
 1139 00f2 9A42     		cmp	r2, r3
 1140 00f4 EFD1     		bne	.L63
 438:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   chSchRescheduleS();
 1141              		.loc 2 438 0
 1142 00f6 FFF7FEFF 		bl	chSchRescheduleS
 439:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   chSysUnlock();
 1143              		.loc 2 439 0
 1144 00fa FFF7FEFF 		bl	dbg_check_unlock
 1145              	.LBB11:
 1146 00fe 0023     		movs	r3, #0
 1147              	@ 439 "/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c" 1
 1148 0100 83F31188 		msr     BASEPRI, r3
 1149              	@ 0 "" 2
 1150              		.thumb
 1151              	.LBE11:
 440:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 1152              		.loc 2 440 0
 1153 0104 0BB0     		add	sp, sp, #44
 1154              		@ sp needed
 1155 0106 5DF804FB 		ldr	pc, [sp], #4
 1156              		.cfi_endproc
 1157              	.LFE130:
 1159 010a 00BFAFF3 		.section	.text.otg_rxfifo_handler,"ax",%progbits
 1159      0080
 1160              		.align	2
 1161              		.p2align 4,,15
 1162              		.thumb
 1163              		.thumb_func
 1165              	otg_rxfifo_handler:
 1166              	.LFB131:
 441:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 442:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /**
 443:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @brief   Incoming packets handler.
 444:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 445:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 446:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 447:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @notapi
 448:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  */
 449:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** static void otg_rxfifo_handler(USBDriver *usbp) {
 1167              		.loc 2 449 0
 1168              		.cfi_startproc
 1169              		@ args = 0, pretend = 0, frame = 24
 1170              		@ frame_needed = 0, uses_anonymous_args = 0
 1171 0000 10B5     		push	{r4, lr}
 1172              		.cfi_def_cfa_offset 8
 1173              		.cfi_offset 4, -8
 1174              		.cfi_offset 14, -4
 1175 0002 86B0     		sub	sp, sp, #24
 1176              		.cfi_def_cfa_offset 32
 1177 0004 0190     		str	r0, [sp, #4]
 450:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   uint32_t sts, cnt, ep;
 451:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 452:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   sts = usbp->otg->GRXSTSP;
 1178              		.loc 2 452 0
 1179 0006 019B     		ldr	r3, [sp, #4]
 1180 0008 DB6B     		ldr	r3, [r3, #60]
 1181 000a 1B6A     		ldr	r3, [r3, #32]
 1182 000c 0593     		str	r3, [sp, #20]
 453:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   switch (sts & GRXSTSP_PKTSTS_MASK) {
 1183              		.loc 2 453 0
 1184 000e 059B     		ldr	r3, [sp, #20]
 1185 0010 03F4F013 		and	r3, r3, #1966080
 1186 0014 B3F5002F 		cmp	r3, #524288
 1187 0018 00F08780 		beq	.L71
 1188 001c B3F5402F 		cmp	r3, #786432
 1189 0020 03D0     		beq	.L67
 1190 0022 B3F5802F 		cmp	r3, #262144
 1191 0026 1BD0     		beq	.L68
 1192 0028 80E0     		b	.L64
 1193              	.L67:
 454:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   case GRXSTSP_SETUP_COMP:
 455:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     break;
 456:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   case GRXSTSP_SETUP_DATA:
 457:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     cnt = (sts & GRXSTSP_BCNT_MASK) >> GRXSTSP_BCNT_OFF;
 1194              		.loc 2 457 0
 1195 002a 059A     		ldr	r2, [sp, #20]
 1196 002c 47F6F073 		movw	r3, #32752
 1197 0030 1340     		ands	r3, r3, r2
 1198 0032 1B09     		lsrs	r3, r3, #4
 1199 0034 0493     		str	r3, [sp, #16]
 458:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     ep  = (sts & GRXSTSP_EPNUM_MASK) >> GRXSTSP_EPNUM_OFF;
 1200              		.loc 2 458 0
 1201 0036 059B     		ldr	r3, [sp, #20]
 1202 0038 03F00F03 		and	r3, r3, #15
 1203 003c 0393     		str	r3, [sp, #12]
 459:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otg_fifo_read_to_buffer(usbp->otg->FIFO[0], usbp->epc[ep]->setup_buf,
 1204              		.loc 2 459 0
 1205 003e 019B     		ldr	r3, [sp, #4]
 1206 0040 DB6B     		ldr	r3, [r3, #60]
 1207 0042 03F58052 		add	r2, r3, #4096
 1208 0046 019B     		ldr	r3, [sp, #4]
 1209 0048 0399     		ldr	r1, [sp, #12]
 1210 004a 0431     		adds	r1, r1, #4
 1211 004c 53F82130 		ldr	r3, [r3, r1, lsl #2]
 1212 0050 1B6A     		ldr	r3, [r3, #32]
 1213 0052 1046     		mov	r0, r2
 1214 0054 1946     		mov	r1, r3
 1215 0056 049A     		ldr	r2, [sp, #16]
 1216 0058 0823     		movs	r3, #8
 1217 005a FFF7FEFF 		bl	otg_fifo_read_to_buffer
 460:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                             cnt, 8);
 461:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     break;
 1218              		.loc 2 461 0
 1219 005e 65E0     		b	.L64
 1220              	.L68:
 462:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   case GRXSTSP_OUT_DATA:
 463:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     cnt = (sts & GRXSTSP_BCNT_MASK) >> GRXSTSP_BCNT_OFF;
 1221              		.loc 2 463 0
 1222 0060 059A     		ldr	r2, [sp, #20]
 1223 0062 47F6F073 		movw	r3, #32752
 1224 0066 1340     		ands	r3, r3, r2
 1225 0068 1B09     		lsrs	r3, r3, #4
 1226 006a 0493     		str	r3, [sp, #16]
 464:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     ep  = (sts & GRXSTSP_EPNUM_MASK) >> GRXSTSP_EPNUM_OFF;
 1227              		.loc 2 464 0
 1228 006c 059B     		ldr	r3, [sp, #20]
 1229 006e 03F00F03 		and	r3, r3, #15
 1230 0072 0393     		str	r3, [sp, #12]
 465:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     if (usbp->epc[ep]->out_state->rxqueued) {
 1231              		.loc 2 465 0
 1232 0074 019B     		ldr	r3, [sp, #4]
 1233 0076 039A     		ldr	r2, [sp, #12]
 1234 0078 0432     		adds	r2, r2, #4
 1235 007a 53F82230 		ldr	r3, [r3, r2, lsl #2]
 1236 007e 9B69     		ldr	r3, [r3, #24]
 1237 0080 1B68     		ldr	r3, [r3]
 1238 0082 002B     		cmp	r3, #0
 1239 0084 10D0     		beq	.L69
 466:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       /* Queue associated.*/
 467:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       otg_fifo_read_to_queue(usbp->otg->FIFO[0],
 1240              		.loc 2 467 0
 1241 0086 019B     		ldr	r3, [sp, #4]
 1242 0088 DB6B     		ldr	r3, [r3, #60]
 1243 008a 03F58052 		add	r2, r3, #4096
 468:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                              usbp->epc[ep]->out_state->mode.queue.rxqueue,
 1244              		.loc 2 468 0
 1245 008e 019B     		ldr	r3, [sp, #4]
 1246 0090 0399     		ldr	r1, [sp, #12]
 1247 0092 0431     		adds	r1, r1, #4
 1248 0094 53F82130 		ldr	r3, [r3, r1, lsl #2]
 1249 0098 9B69     		ldr	r3, [r3, #24]
 467:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                              usbp->epc[ep]->out_state->mode.queue.rxqueue,
 1250              		.loc 2 467 0
 1251 009a DB68     		ldr	r3, [r3, #12]
 1252 009c 1046     		mov	r0, r2
 1253 009e 1946     		mov	r1, r3
 1254 00a0 049A     		ldr	r2, [sp, #16]
 1255 00a2 FFF7FEFF 		bl	otg_fifo_read_to_queue
 1256 00a6 2EE0     		b	.L70
 1257              	.L69:
 469:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                              cnt);
 470:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     }
 471:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     else {
 472:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       otg_fifo_read_to_buffer(usbp->otg->FIFO[0],
 1258              		.loc 2 472 0
 1259 00a8 019B     		ldr	r3, [sp, #4]
 1260 00aa DB6B     		ldr	r3, [r3, #60]
 1261 00ac 03F58051 		add	r1, r3, #4096
 473:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                               usbp->epc[ep]->out_state->mode.linear.rxbuf,
 1262              		.loc 2 473 0
 1263 00b0 019B     		ldr	r3, [sp, #4]
 1264 00b2 039A     		ldr	r2, [sp, #12]
 1265 00b4 0432     		adds	r2, r2, #4
 1266 00b6 53F82230 		ldr	r3, [r3, r2, lsl #2]
 1267 00ba 9B69     		ldr	r3, [r3, #24]
 472:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                               usbp->epc[ep]->out_state->mode.linear.rxbuf,
 1268              		.loc 2 472 0
 1269 00bc DA68     		ldr	r2, [r3, #12]
 474:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                               cnt,
 475:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                               usbp->epc[ep]->out_state->rxsize -
 1270              		.loc 2 475 0
 1271 00be 019B     		ldr	r3, [sp, #4]
 1272 00c0 0398     		ldr	r0, [sp, #12]
 1273 00c2 0430     		adds	r0, r0, #4
 1274 00c4 53F82030 		ldr	r3, [r3, r0, lsl #2]
 1275 00c8 9B69     		ldr	r3, [r3, #24]
 1276 00ca 5868     		ldr	r0, [r3, #4]
 476:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                               usbp->epc[ep]->out_state->rxcnt);
 1277              		.loc 2 476 0
 1278 00cc 019B     		ldr	r3, [sp, #4]
 1279 00ce 039C     		ldr	r4, [sp, #12]
 1280 00d0 0434     		adds	r4, r4, #4
 1281 00d2 53F82430 		ldr	r3, [r3, r4, lsl #2]
 1282 00d6 9B69     		ldr	r3, [r3, #24]
 1283 00d8 9B68     		ldr	r3, [r3, #8]
 472:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                               usbp->epc[ep]->out_state->mode.linear.rxbuf,
 1284              		.loc 2 472 0
 1285 00da C31A     		subs	r3, r0, r3
 1286 00dc 0846     		mov	r0, r1
 1287 00de 1146     		mov	r1, r2
 1288 00e0 049A     		ldr	r2, [sp, #16]
 1289 00e2 FFF7FEFF 		bl	otg_fifo_read_to_buffer
 477:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       usbp->epc[ep]->out_state->mode.linear.rxbuf += cnt;
 1290              		.loc 2 477 0
 1291 00e6 019B     		ldr	r3, [sp, #4]
 1292 00e8 039A     		ldr	r2, [sp, #12]
 1293 00ea 0432     		adds	r2, r2, #4
 1294 00ec 53F82230 		ldr	r3, [r3, r2, lsl #2]
 1295 00f0 9B69     		ldr	r3, [r3, #24]
 1296 00f2 019A     		ldr	r2, [sp, #4]
 1297 00f4 0399     		ldr	r1, [sp, #12]
 1298 00f6 0431     		adds	r1, r1, #4
 1299 00f8 52F82120 		ldr	r2, [r2, r1, lsl #2]
 1300 00fc 9269     		ldr	r2, [r2, #24]
 1301 00fe D168     		ldr	r1, [r2, #12]
 1302 0100 049A     		ldr	r2, [sp, #16]
 1303 0102 0A44     		add	r2, r2, r1
 1304 0104 DA60     		str	r2, [r3, #12]
 1305              	.L70:
 478:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     }
 479:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     usbp->epc[ep]->out_state->rxcnt += cnt;
 1306              		.loc 2 479 0
 1307 0106 019B     		ldr	r3, [sp, #4]
 1308 0108 039A     		ldr	r2, [sp, #12]
 1309 010a 0432     		adds	r2, r2, #4
 1310 010c 53F82230 		ldr	r3, [r3, r2, lsl #2]
 1311 0110 9B69     		ldr	r3, [r3, #24]
 1312 0112 019A     		ldr	r2, [sp, #4]
 1313 0114 0399     		ldr	r1, [sp, #12]
 1314 0116 0431     		adds	r1, r1, #4
 1315 0118 52F82120 		ldr	r2, [r2, r1, lsl #2]
 1316 011c 9269     		ldr	r2, [r2, #24]
 1317 011e 9168     		ldr	r1, [r2, #8]
 1318 0120 049A     		ldr	r2, [sp, #16]
 1319 0122 0A44     		add	r2, r2, r1
 1320 0124 9A60     		str	r2, [r3, #8]
 480:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     break;
 1321              		.loc 2 480 0
 1322 0126 00BF     		nop
 1323 0128 00E0     		b	.L64
 1324              	.L71:
 455:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   case GRXSTSP_SETUP_DATA:
 1325              		.loc 2 455 0
 1326 012a 00BF     		nop
 1327              	.L64:
 481:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   case GRXSTSP_OUT_GLOBAL_NAK:
 482:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   case GRXSTSP_OUT_COMP:
 483:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   default:
 484:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     ;
 485:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   }
 486:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 1328              		.loc 2 486 0
 1329 012c 06B0     		add	sp, sp, #24
 1330              		@ sp needed
 1331 012e 10BD     		pop	{r4, pc}
 1332              		.cfi_endproc
 1333              	.LFE131:
 1335              		.section	.text.otg_txfifo_handler,"ax",%progbits
 1336              		.align	2
 1337              		.p2align 4,,15
 1338              		.thumb
 1339              		.thumb_func
 1341              	otg_txfifo_handler:
 1342              	.LFB132:
 487:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 488:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /**
 489:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @brief   Outgoing packets handler.
 490:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 491:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 492:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] ep        endpoint number
 493:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 494:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @notapi
 495:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  */
 496:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** static bool_t otg_txfifo_handler(USBDriver *usbp, usbep_t ep) {
 1343              		.loc 2 496 0
 1344              		.cfi_startproc
 1345              		@ args = 0, pretend = 0, frame = 16
 1346              		@ frame_needed = 0, uses_anonymous_args = 0
 1347 0000 00B5     		push	{lr}
 1348              		.cfi_def_cfa_offset 4
 1349              		.cfi_offset 14, -4
 1350 0002 85B0     		sub	sp, sp, #20
 1351              		.cfi_def_cfa_offset 24
 1352 0004 0190     		str	r0, [sp, #4]
 1353 0006 0B46     		mov	r3, r1
 1354 0008 8DF80330 		strb	r3, [sp, #3]
 1355              	.L79:
 1356              	.LBB12:
 497:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 498:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   /* The TXFIFO is filled until there is space and data to be transmitted.*/
 499:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   while (TRUE) {
 500:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     uint32_t n;
 501:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 502:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     /* Transaction end condition.*/
 503:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     if (usbp->epc[ep]->in_state->txcnt >= usbp->epc[ep]->in_state->txsize)
 1357              		.loc 2 503 0
 1358 000c 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 1359 0010 019B     		ldr	r3, [sp, #4]
 1360 0012 0432     		adds	r2, r2, #4
 1361 0014 53F82230 		ldr	r3, [r3, r2, lsl #2]
 1362 0018 5B69     		ldr	r3, [r3, #20]
 1363 001a 9A68     		ldr	r2, [r3, #8]
 1364 001c 9DF80310 		ldrb	r1, [sp, #3]	@ zero_extendqisi2
 1365 0020 019B     		ldr	r3, [sp, #4]
 1366 0022 0431     		adds	r1, r1, #4
 1367 0024 53F82130 		ldr	r3, [r3, r1, lsl #2]
 1368 0028 5B69     		ldr	r3, [r3, #20]
 1369 002a 5B68     		ldr	r3, [r3, #4]
 1370 002c 9A42     		cmp	r2, r3
 1371 002e 01D3     		bcc	.L73
 504:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       return TRUE;
 1372              		.loc 2 504 0
 1373 0030 0123     		movs	r3, #1
 1374 0032 8CE0     		b	.L74
 1375              	.L73:
 505:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 506:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     /* Number of bytes remaining in current transaction.*/
 507:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     n = usbp->epc[ep]->in_state->txsize - usbp->epc[ep]->in_state->txcnt;
 1376              		.loc 2 507 0
 1377 0034 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 1378 0038 019B     		ldr	r3, [sp, #4]
 1379 003a 0432     		adds	r2, r2, #4
 1380 003c 53F82230 		ldr	r3, [r3, r2, lsl #2]
 1381 0040 5B69     		ldr	r3, [r3, #20]
 1382 0042 5A68     		ldr	r2, [r3, #4]
 1383 0044 9DF80310 		ldrb	r1, [sp, #3]	@ zero_extendqisi2
 1384 0048 019B     		ldr	r3, [sp, #4]
 1385 004a 0431     		adds	r1, r1, #4
 1386 004c 53F82130 		ldr	r3, [r3, r1, lsl #2]
 1387 0050 5B69     		ldr	r3, [r3, #20]
 1388 0052 9B68     		ldr	r3, [r3, #8]
 1389 0054 D31A     		subs	r3, r2, r3
 1390 0056 0393     		str	r3, [sp, #12]
 508:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     if (n > usbp->epc[ep]->in_maxsize)
 1391              		.loc 2 508 0
 1392 0058 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 1393 005c 019B     		ldr	r3, [sp, #4]
 1394 005e 0432     		adds	r2, r2, #4
 1395 0060 53F82230 		ldr	r3, [r3, r2, lsl #2]
 1396 0064 1B8A     		ldrh	r3, [r3, #16]
 1397 0066 1A46     		mov	r2, r3
 1398 0068 039B     		ldr	r3, [sp, #12]
 1399 006a 9A42     		cmp	r2, r3
 1400 006c 07D2     		bcs	.L75
 509:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       n = usbp->epc[ep]->in_maxsize;
 1401              		.loc 2 509 0
 1402 006e 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 1403 0072 019B     		ldr	r3, [sp, #4]
 1404 0074 0432     		adds	r2, r2, #4
 1405 0076 53F82230 		ldr	r3, [r3, r2, lsl #2]
 1406 007a 1B8A     		ldrh	r3, [r3, #16]
 1407 007c 0393     		str	r3, [sp, #12]
 1408              	.L75:
 510:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 511:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     /* Checks if in the TXFIFO there is enough space to accommodate the
 512:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****        next packet.*/
 513:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     if (((usbp->otg->ie[ep].DTXFSTS & DTXFSTS_INEPTFSAV_MASK) * 4) < n)
 1409              		.loc 2 513 0
 1410 007e 019B     		ldr	r3, [sp, #4]
 1411 0080 DA6B     		ldr	r2, [r3, #60]
 1412 0082 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 1413 0086 5B01     		lsls	r3, r3, #5
 1414 0088 1344     		add	r3, r3, r2
 1415 008a 03F61813 		addw	r3, r3, #2328
 1416 008e 1B68     		ldr	r3, [r3]
 1417 0090 9BB2     		uxth	r3, r3
 1418 0092 9A00     		lsls	r2, r3, #2
 1419 0094 039B     		ldr	r3, [sp, #12]
 1420 0096 9A42     		cmp	r2, r3
 1421 0098 01D2     		bcs	.L76
 514:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       return FALSE;
 1422              		.loc 2 514 0
 1423 009a 0023     		movs	r3, #0
 1424 009c 57E0     		b	.L74
 1425              	.L76:
 515:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 516:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #if STM32_USB_OTGFIFO_FILL_BASEPRI
 517:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     __set_BASEPRI(CORTEX_PRIORITY_MASK(STM32_USB_OTGFIFO_FILL_BASEPRI));
 518:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #endif
 519:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     /* Handles the two cases: linear buffer or queue.*/
 520:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     if (usbp->epc[ep]->in_state->txqueued) {
 1426              		.loc 2 520 0
 1427 009e 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 1428 00a2 019B     		ldr	r3, [sp, #4]
 1429 00a4 0432     		adds	r2, r2, #4
 1430 00a6 53F82230 		ldr	r3, [r3, r2, lsl #2]
 1431 00aa 5B69     		ldr	r3, [r3, #20]
 1432 00ac 1B68     		ldr	r3, [r3]
 1433 00ae 002B     		cmp	r3, #0
 1434 00b0 14D0     		beq	.L77
 521:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       /* Queue associated.*/
 522:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       otg_fifo_write_from_queue(usbp->otg->FIFO[ep],
 1435              		.loc 2 522 0
 1436 00b2 019B     		ldr	r3, [sp, #4]
 1437 00b4 DA6B     		ldr	r2, [r3, #60]
 1438 00b6 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 1439 00ba 0133     		adds	r3, r3, #1
 1440 00bc 1B03     		lsls	r3, r3, #12
 1441 00be 1A44     		add	r2, r2, r3
 523:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                                 usbp->epc[ep]->in_state->mode.queue.txqueue,
 1442              		.loc 2 523 0
 1443 00c0 9DF80310 		ldrb	r1, [sp, #3]	@ zero_extendqisi2
 1444 00c4 019B     		ldr	r3, [sp, #4]
 1445 00c6 0431     		adds	r1, r1, #4
 1446 00c8 53F82130 		ldr	r3, [r3, r1, lsl #2]
 1447 00cc 5B69     		ldr	r3, [r3, #20]
 522:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                                 usbp->epc[ep]->in_state->mode.queue.txqueue,
 1448              		.loc 2 522 0
 1449 00ce DB68     		ldr	r3, [r3, #12]
 1450 00d0 1046     		mov	r0, r2
 1451 00d2 1946     		mov	r1, r3
 1452 00d4 039A     		ldr	r2, [sp, #12]
 1453 00d6 FFF7FEFF 		bl	otg_fifo_write_from_queue
 1454 00da 25E0     		b	.L78
 1455              	.L77:
 524:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                                 n);
 525:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     }
 526:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     else {
 527:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       /* Linear buffer associated.*/
 528:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       otg_fifo_write_from_buffer(usbp->otg->FIFO[ep],
 1456              		.loc 2 528 0
 1457 00dc 019B     		ldr	r3, [sp, #4]
 1458 00de DA6B     		ldr	r2, [r3, #60]
 1459 00e0 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 1460 00e4 0133     		adds	r3, r3, #1
 1461 00e6 1B03     		lsls	r3, r3, #12
 1462 00e8 1A44     		add	r2, r2, r3
 529:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                                  usbp->epc[ep]->in_state->mode.linear.txbuf,
 1463              		.loc 2 529 0
 1464 00ea 9DF80310 		ldrb	r1, [sp, #3]	@ zero_extendqisi2
 1465 00ee 019B     		ldr	r3, [sp, #4]
 1466 00f0 0431     		adds	r1, r1, #4
 1467 00f2 53F82130 		ldr	r3, [r3, r1, lsl #2]
 1468 00f6 5B69     		ldr	r3, [r3, #20]
 528:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                                  usbp->epc[ep]->in_state->mode.linear.txbuf,
 1469              		.loc 2 528 0
 1470 00f8 DB68     		ldr	r3, [r3, #12]
 1471 00fa 1046     		mov	r0, r2
 1472 00fc 1946     		mov	r1, r3
 1473 00fe 039A     		ldr	r2, [sp, #12]
 1474 0100 FFF7FEFF 		bl	otg_fifo_write_from_buffer
 530:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                                  n);
 531:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       usbp->epc[ep]->in_state->mode.linear.txbuf += n;
 1475              		.loc 2 531 0
 1476 0104 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 1477 0108 019B     		ldr	r3, [sp, #4]
 1478 010a 0432     		adds	r2, r2, #4
 1479 010c 53F82230 		ldr	r3, [r3, r2, lsl #2]
 1480 0110 5B69     		ldr	r3, [r3, #20]
 1481 0112 9DF80310 		ldrb	r1, [sp, #3]	@ zero_extendqisi2
 1482 0116 019A     		ldr	r2, [sp, #4]
 1483 0118 0431     		adds	r1, r1, #4
 1484 011a 52F82120 		ldr	r2, [r2, r1, lsl #2]
 1485 011e 5269     		ldr	r2, [r2, #20]
 1486 0120 D168     		ldr	r1, [r2, #12]
 1487 0122 039A     		ldr	r2, [sp, #12]
 1488 0124 0A44     		add	r2, r2, r1
 1489 0126 DA60     		str	r2, [r3, #12]
 1490              	.L78:
 532:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     }
 533:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     usbp->epc[ep]->in_state->txcnt += n;
 1491              		.loc 2 533 0
 1492 0128 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 1493 012c 019B     		ldr	r3, [sp, #4]
 1494 012e 0432     		adds	r2, r2, #4
 1495 0130 53F82230 		ldr	r3, [r3, r2, lsl #2]
 1496 0134 5B69     		ldr	r3, [r3, #20]
 1497 0136 9DF80310 		ldrb	r1, [sp, #3]	@ zero_extendqisi2
 1498 013a 019A     		ldr	r2, [sp, #4]
 1499 013c 0431     		adds	r1, r1, #4
 1500 013e 52F82120 		ldr	r2, [r2, r1, lsl #2]
 1501 0142 5269     		ldr	r2, [r2, #20]
 1502 0144 9168     		ldr	r1, [r2, #8]
 1503 0146 039A     		ldr	r2, [sp, #12]
 1504 0148 0A44     		add	r2, r2, r1
 1505 014a 9A60     		str	r2, [r3, #8]
 1506              	.LBE12:
 534:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   }
 1507              		.loc 2 534 0
 1508 014c 5EE7     		b	.L79
 1509              	.L74:
 535:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #if STM32_USB_OTGFIFO_FILL_BASEPRI
 536:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   __set_BASEPRI(0);
 537:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #endif
 538:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 1510              		.loc 2 538 0
 1511 014e 1846     		mov	r0, r3
 1512 0150 05B0     		add	sp, sp, #20
 1513              		@ sp needed
 1514 0152 5DF804FB 		ldr	pc, [sp], #4
 1515              		.cfi_endproc
 1516              	.LFE132:
 1518 0156 00BFAFF3 		.section	.text.otg_epin_handler,"ax",%progbits
 1518      0080AFF3 
 1518      0080
 1519              		.align	2
 1520              		.p2align 4,,15
 1521              		.thumb
 1522              		.thumb_func
 1524              	otg_epin_handler:
 1525              	.LFB133:
 539:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 540:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /**
 541:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @brief   Generic endpoint IN handler.
 542:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 543:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 544:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] ep        endpoint number
 545:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 546:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @notapi
 547:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  */
 548:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** static void otg_epin_handler(USBDriver *usbp, usbep_t ep) {
 1526              		.loc 2 548 0
 1527              		.cfi_startproc
 1528              		@ args = 0, pretend = 0, frame = 16
 1529              		@ frame_needed = 0, uses_anonymous_args = 0
 1530 0000 00B5     		push	{lr}
 1531              		.cfi_def_cfa_offset 4
 1532              		.cfi_offset 14, -4
 1533 0002 85B0     		sub	sp, sp, #20
 1534              		.cfi_def_cfa_offset 24
 1535 0004 0190     		str	r0, [sp, #4]
 1536 0006 0B46     		mov	r3, r1
 1537 0008 8DF80330 		strb	r3, [sp, #3]
 549:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   stm32_otg_t *otgp = usbp->otg;
 1538              		.loc 2 549 0
 1539 000c 019B     		ldr	r3, [sp, #4]
 1540 000e DB6B     		ldr	r3, [r3, #60]
 1541 0010 0393     		str	r3, [sp, #12]
 550:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   uint32_t epint = otgp->ie[ep].DIEPINT;
 1542              		.loc 2 550 0
 1543 0012 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 1544 0016 039A     		ldr	r2, [sp, #12]
 1545 0018 5B01     		lsls	r3, r3, #5
 1546 001a 1344     		add	r3, r3, r2
 1547 001c 03F60813 		addw	r3, r3, #2312
 1548 0020 1B68     		ldr	r3, [r3]
 1549 0022 0293     		str	r3, [sp, #8]
 551:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 552:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   otgp->ie[ep].DIEPINT = 0xFFFFFFFF;
 1550              		.loc 2 552 0
 1551 0024 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 1552 0028 039A     		ldr	r2, [sp, #12]
 1553 002a 5B01     		lsls	r3, r3, #5
 1554 002c 1344     		add	r3, r3, r2
 1555 002e 03F60813 		addw	r3, r3, #2312
 1556 0032 4FF0FF32 		mov	r2, #-1
 1557 0036 1A60     		str	r2, [r3]
 553:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 554:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   if (epint & DIEPINT_TOC) {
 555:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     /* Timeouts not handled yet, not sure how to handle.*/
 556:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   }
 557:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   if ((epint & DIEPINT_XFRC) && (otgp->DIEPMSK & DIEPMSK_XFRCM)) {
 1558              		.loc 2 557 0
 1559 0038 029B     		ldr	r3, [sp, #8]
 1560 003a 03F00103 		and	r3, r3, #1
 1561 003e 002B     		cmp	r3, #0
 1562 0040 22D0     		beq	.L81
 1563              		.loc 2 557 0 is_stmt 0 discriminator 1
 1564 0042 039B     		ldr	r3, [sp, #12]
 1565 0044 D3F81038 		ldr	r3, [r3, #2064]
 1566 0048 03F00103 		and	r3, r3, #1
 1567 004c 002B     		cmp	r3, #0
 1568 004e 1BD0     		beq	.L81
 558:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     /* Transmit transfer complete.*/
 559:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     _usb_isr_invoke_in_cb(usbp, ep);
 1569              		.loc 2 559 0 is_stmt 1
 1570 0050 019B     		ldr	r3, [sp, #4]
 1571 0052 9B89     		ldrh	r3, [r3, #12]
 1572 0054 9AB2     		uxth	r2, r3
 1573 0056 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 1574 005a 0121     		movs	r1, #1
 1575 005c 01FA03F3 		lsl	r3, r1, r3
 1576 0060 9BB2     		uxth	r3, r3
 1577 0062 DB43     		mvns	r3, r3
 1578 0064 9BB2     		uxth	r3, r3
 1579 0066 1340     		ands	r3, r3, r2
 1580 0068 9BB2     		uxth	r3, r3
 1581 006a 9AB2     		uxth	r2, r3
 1582 006c 019B     		ldr	r3, [sp, #4]
 1583 006e 9A81     		strh	r2, [r3, #12]	@ movhi
 1584 0070 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 1585 0074 019B     		ldr	r3, [sp, #4]
 1586 0076 0432     		adds	r2, r2, #4
 1587 0078 53F82230 		ldr	r3, [r3, r2, lsl #2]
 1588 007c 9B68     		ldr	r3, [r3, #8]
 1589 007e 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 1590 0082 0198     		ldr	r0, [sp, #4]
 1591 0084 1146     		mov	r1, r2
 1592 0086 9847     		blx	r3
 1593              	.L81:
 560:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   }
 561:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   if ((epint & DIEPINT_TXFE) &&
 1594              		.loc 2 561 0
 1595 0088 029B     		ldr	r3, [sp, #8]
 1596 008a 03F08003 		and	r3, r3, #128
 1597 008e 002B     		cmp	r3, #0
 1598 0090 2ED0     		beq	.L80
 562:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       (otgp->DIEPEMPMSK & DIEPEMPMSK_INEPTXFEM(ep))) {
 1599              		.loc 2 562 0 discriminator 1
 1600 0092 039B     		ldr	r3, [sp, #12]
 1601 0094 D3F83428 		ldr	r2, [r3, #2100]
 1602 0098 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 1603 009c 0121     		movs	r1, #1
 1604 009e 01FA03F3 		lsl	r3, r1, r3
 1605 00a2 1340     		ands	r3, r3, r2
 561:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       (otgp->DIEPEMPMSK & DIEPEMPMSK_INEPTXFEM(ep))) {
 1606              		.loc 2 561 0 discriminator 1
 1607 00a4 002B     		cmp	r3, #0
 1608 00a6 23D0     		beq	.L80
 1609              	.LBB13:
 563:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     /* The thread is made ready, it will be scheduled on ISR exit.*/
 564:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     chSysLockFromIsr();
 1610              		.loc 2 564 0
 1611 00a8 2023     		movs	r3, #32
 1612              	@ 564 "/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c" 1
 1613 00aa 83F31188 		msr     BASEPRI, r3
 1614              	@ 0 "" 2
 1615              		.thumb
 1616              	.LBE13:
 1617 00ae FFF7FEFF 		bl	dbg_check_lock_from_isr
 565:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     usbp->txpending |= (1 << ep);
 1618              		.loc 2 565 0
 1619 00b2 019B     		ldr	r3, [sp, #4]
 1620 00b4 9A6C     		ldr	r2, [r3, #72]
 1621 00b6 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 1622 00ba 0121     		movs	r1, #1
 1623 00bc 01FA03F3 		lsl	r3, r1, r3
 1624 00c0 1A43     		orrs	r2, r2, r3
 1625 00c2 019B     		ldr	r3, [sp, #4]
 1626 00c4 9A64     		str	r2, [r3, #72]
 566:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otgp->DIEPEMPMSK &= ~(1 << ep);
 1627              		.loc 2 566 0
 1628 00c6 039B     		ldr	r3, [sp, #12]
 1629 00c8 D3F83428 		ldr	r2, [r3, #2100]
 1630 00cc 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 1631 00d0 0121     		movs	r1, #1
 1632 00d2 01FA03F3 		lsl	r3, r1, r3
 1633 00d6 DB43     		mvns	r3, r3
 1634 00d8 1A40     		ands	r2, r2, r3
 1635 00da 039B     		ldr	r3, [sp, #12]
 1636 00dc C3F83428 		str	r2, [r3, #2100]
 567:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     usb_lld_wakeup_pump(usbp);
 1637              		.loc 2 567 0
 1638 00e0 0198     		ldr	r0, [sp, #4]
 1639 00e2 FFF7FEFF 		bl	usb_lld_wakeup_pump
 568:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     chSysUnlockFromIsr();
 1640              		.loc 2 568 0
 1641 00e6 FFF7FEFF 		bl	dbg_check_unlock_from_isr
 1642              	.LBB14:
 1643 00ea 0023     		movs	r3, #0
 1644              	@ 568 "/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c" 1
 1645 00ec 83F31188 		msr     BASEPRI, r3
 1646              	@ 0 "" 2
 1647              		.thumb
 1648              	.L80:
 1649              	.LBE14:
 569:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   }
 570:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 1650              		.loc 2 570 0
 1651 00f0 05B0     		add	sp, sp, #20
 1652              		@ sp needed
 1653 00f2 5DF804FB 		ldr	pc, [sp], #4
 1654              		.cfi_endproc
 1655              	.LFE133:
 1657 00f6 00BFAFF3 		.section	.text.otg_epout_handler,"ax",%progbits
 1657      0080AFF3 
 1657      0080
 1658              		.align	2
 1659              		.p2align 4,,15
 1660              		.thumb
 1661              		.thumb_func
 1663              	otg_epout_handler:
 1664              	.LFB134:
 571:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 572:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /**
 573:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @brief   Generic endpoint OUT handler.
 574:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 575:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 576:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] ep        endpoint number
 577:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 578:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @notapi
 579:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  */
 580:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** static void otg_epout_handler(USBDriver *usbp, usbep_t ep) {
 1665              		.loc 2 580 0
 1666              		.cfi_startproc
 1667              		@ args = 0, pretend = 0, frame = 16
 1668              		@ frame_needed = 0, uses_anonymous_args = 0
 1669 0000 00B5     		push	{lr}
 1670              		.cfi_def_cfa_offset 4
 1671              		.cfi_offset 14, -4
 1672 0002 85B0     		sub	sp, sp, #20
 1673              		.cfi_def_cfa_offset 24
 1674 0004 0190     		str	r0, [sp, #4]
 1675 0006 0B46     		mov	r3, r1
 1676 0008 8DF80330 		strb	r3, [sp, #3]
 581:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   stm32_otg_t *otgp = usbp->otg;
 1677              		.loc 2 581 0
 1678 000c 019B     		ldr	r3, [sp, #4]
 1679 000e DB6B     		ldr	r3, [r3, #60]
 1680 0010 0393     		str	r3, [sp, #12]
 582:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   uint32_t epint = otgp->oe[ep].DOEPINT;
 1681              		.loc 2 582 0
 1682 0012 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 1683 0016 039A     		ldr	r2, [sp, #12]
 1684 0018 5B01     		lsls	r3, r3, #5
 1685 001a 1344     		add	r3, r3, r2
 1686 001c 03F60833 		addw	r3, r3, #2824
 1687 0020 1B68     		ldr	r3, [r3]
 1688 0022 0293     		str	r3, [sp, #8]
 583:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 584:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   /* Resets all EP IRQ sources.*/
 585:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   otgp->oe[ep].DOEPINT = 0xFFFFFFFF;
 1689              		.loc 2 585 0
 1690 0024 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 1691 0028 039A     		ldr	r2, [sp, #12]
 1692 002a 5B01     		lsls	r3, r3, #5
 1693 002c 1344     		add	r3, r3, r2
 1694 002e 03F60833 		addw	r3, r3, #2824
 1695 0032 4FF0FF32 		mov	r2, #-1
 1696 0036 1A60     		str	r2, [r3]
 586:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 587:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   if ((epint & DOEPINT_STUP) && (otgp->DOEPMSK & DOEPMSK_STUPM)) {
 1697              		.loc 2 587 0
 1698 0038 029B     		ldr	r3, [sp, #8]
 1699 003a 03F00803 		and	r3, r3, #8
 1700 003e 002B     		cmp	r3, #0
 1701 0040 12D0     		beq	.L84
 1702              		.loc 2 587 0 is_stmt 0 discriminator 1
 1703 0042 039B     		ldr	r3, [sp, #12]
 1704 0044 D3F81438 		ldr	r3, [r3, #2068]
 1705 0048 03F00803 		and	r3, r3, #8
 1706 004c 002B     		cmp	r3, #0
 1707 004e 0BD0     		beq	.L84
 588:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     /* Setup packets handling, setup packets are handled using a
 589:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****        specific callback.*/
 590:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     _usb_isr_invoke_setup_cb(usbp, ep);
 1708              		.loc 2 590 0 is_stmt 1
 1709 0050 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 1710 0054 019B     		ldr	r3, [sp, #4]
 1711 0056 0432     		adds	r2, r2, #4
 1712 0058 53F82230 		ldr	r3, [r3, r2, lsl #2]
 1713 005c 5B68     		ldr	r3, [r3, #4]
 1714 005e 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 1715 0062 0198     		ldr	r0, [sp, #4]
 1716 0064 1146     		mov	r1, r2
 1717 0066 9847     		blx	r3
 1718              	.L84:
 591:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 592:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   }
 593:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   if ((epint & DOEPINT_XFRC) && (otgp->DOEPMSK & DOEPMSK_XFRCM)) {
 1719              		.loc 2 593 0
 1720 0068 029B     		ldr	r3, [sp, #8]
 1721 006a 03F00103 		and	r3, r3, #1
 1722 006e 002B     		cmp	r3, #0
 1723 0070 22D0     		beq	.L83
 1724              		.loc 2 593 0 is_stmt 0 discriminator 1
 1725 0072 039B     		ldr	r3, [sp, #12]
 1726 0074 D3F81438 		ldr	r3, [r3, #2068]
 1727 0078 03F00103 		and	r3, r3, #1
 1728 007c 002B     		cmp	r3, #0
 1729 007e 1BD0     		beq	.L83
 594:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     /* Receive transfer complete.*/
 595:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     _usb_isr_invoke_out_cb(usbp, ep);
 1730              		.loc 2 595 0 is_stmt 1
 1731 0080 019B     		ldr	r3, [sp, #4]
 1732 0082 DB89     		ldrh	r3, [r3, #14]
 1733 0084 9AB2     		uxth	r2, r3
 1734 0086 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 1735 008a 0121     		movs	r1, #1
 1736 008c 01FA03F3 		lsl	r3, r1, r3
 1737 0090 9BB2     		uxth	r3, r3
 1738 0092 DB43     		mvns	r3, r3
 1739 0094 9BB2     		uxth	r3, r3
 1740 0096 1340     		ands	r3, r3, r2
 1741 0098 9BB2     		uxth	r3, r3
 1742 009a 9AB2     		uxth	r2, r3
 1743 009c 019B     		ldr	r3, [sp, #4]
 1744 009e DA81     		strh	r2, [r3, #14]	@ movhi
 1745 00a0 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 1746 00a4 019B     		ldr	r3, [sp, #4]
 1747 00a6 0432     		adds	r2, r2, #4
 1748 00a8 53F82230 		ldr	r3, [r3, r2, lsl #2]
 1749 00ac DB68     		ldr	r3, [r3, #12]
 1750 00ae 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 1751 00b2 0198     		ldr	r0, [sp, #4]
 1752 00b4 1146     		mov	r1, r2
 1753 00b6 9847     		blx	r3
 1754              	.L83:
 596:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   }
 597:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 1755              		.loc 2 597 0
 1756 00b8 05B0     		add	sp, sp, #20
 1757              		@ sp needed
 1758 00ba 5DF804FB 		ldr	pc, [sp], #4
 1759              		.cfi_endproc
 1760              	.LFE134:
 1762 00be 00BF     		.section	.text.usb_lld_serve_interrupt,"ax",%progbits
 1763              		.align	2
 1764              		.p2align 4,,15
 1765              		.thumb
 1766              		.thumb_func
 1768              	usb_lld_serve_interrupt:
 1769              	.LFB135:
 598:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 599:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /**
 600:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @brief   OTG shared ISR.
 601:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 602:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 603:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 604:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @notapi
 605:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  */
 606:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** static void usb_lld_serve_interrupt(USBDriver *usbp) {
 1770              		.loc 2 606 0
 1771              		.cfi_startproc
 1772              		@ args = 0, pretend = 0, frame = 24
 1773              		@ frame_needed = 0, uses_anonymous_args = 0
 1774 0000 00B5     		push	{lr}
 1775              		.cfi_def_cfa_offset 4
 1776              		.cfi_offset 14, -4
 1777 0002 87B0     		sub	sp, sp, #28
 1778              		.cfi_def_cfa_offset 32
 1779 0004 0190     		str	r0, [sp, #4]
 607:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   stm32_otg_t *otgp = usbp->otg;
 1780              		.loc 2 607 0
 1781 0006 019B     		ldr	r3, [sp, #4]
 1782 0008 DB6B     		ldr	r3, [r3, #60]
 1783 000a 0593     		str	r3, [sp, #20]
 608:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   uint32_t sts, src;
 609:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 610:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   sts = otgp->GINTSTS & otgp->GINTMSK;
 1784              		.loc 2 610 0
 1785 000c 059B     		ldr	r3, [sp, #20]
 1786 000e 5A69     		ldr	r2, [r3, #20]
 1787 0010 059B     		ldr	r3, [sp, #20]
 1788 0012 9B69     		ldr	r3, [r3, #24]
 1789 0014 1340     		ands	r3, r3, r2
 1790 0016 0493     		str	r3, [sp, #16]
 611:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   otgp->GINTSTS = sts;
 1791              		.loc 2 611 0
 1792 0018 059B     		ldr	r3, [sp, #20]
 1793 001a 049A     		ldr	r2, [sp, #16]
 1794 001c 5A61     		str	r2, [r3, #20]
 612:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 613:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   /* Reset interrupt handling.*/
 614:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   if (sts & GINTSTS_USBRST) {
 1795              		.loc 2 614 0
 1796 001e 049B     		ldr	r3, [sp, #16]
 1797 0020 03F48053 		and	r3, r3, #4096
 1798 0024 002B     		cmp	r3, #0
 1799 0026 0DD0     		beq	.L87
 615:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     _usb_reset(usbp);
 1800              		.loc 2 615 0
 1801 0028 0198     		ldr	r0, [sp, #4]
 1802 002a FFF7FEFF 		bl	_usb_reset
 616:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     _usb_isr_invoke_event_cb(usbp, USB_EVENT_RESET);
 1803              		.loc 2 616 0
 1804 002e 019B     		ldr	r3, [sp, #4]
 1805 0030 5B68     		ldr	r3, [r3, #4]
 1806 0032 1B68     		ldr	r3, [r3]
 1807 0034 002B     		cmp	r3, #0
 1808 0036 05D0     		beq	.L87
 1809              		.loc 2 616 0 is_stmt 0 discriminator 1
 1810 0038 019B     		ldr	r3, [sp, #4]
 1811 003a 5B68     		ldr	r3, [r3, #4]
 1812 003c 1B68     		ldr	r3, [r3]
 1813 003e 0198     		ldr	r0, [sp, #4]
 1814 0040 0021     		movs	r1, #0
 1815 0042 9847     		blx	r3
 1816              	.L87:
 617:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   }
 618:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 619:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   /* Enumeration done.*/
 620:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   if (sts & GINTSTS_ENUMDNE) {
 1817              		.loc 2 620 0 is_stmt 1
 1818 0044 049B     		ldr	r3, [sp, #16]
 1819 0046 03F40053 		and	r3, r3, #8192
 1820 004a 002B     		cmp	r3, #0
 1821 004c 02D0     		beq	.L88
 621:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     (void)otgp->DSTS;
 1822              		.loc 2 621 0
 1823 004e 059B     		ldr	r3, [sp, #20]
 1824 0050 D3F80838 		ldr	r3, [r3, #2056]
 1825              	.L88:
 622:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   }
 623:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 624:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   /* SOF interrupt handling.*/
 625:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   if (sts & GINTSTS_SOF) {
 1826              		.loc 2 625 0
 1827 0054 049B     		ldr	r3, [sp, #16]
 1828 0056 03F00803 		and	r3, r3, #8
 1829 005a 002B     		cmp	r3, #0
 1830 005c 09D0     		beq	.L89
 626:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     _usb_isr_invoke_sof_cb(usbp);
 1831              		.loc 2 626 0
 1832 005e 019B     		ldr	r3, [sp, #4]
 1833 0060 5B68     		ldr	r3, [r3, #4]
 1834 0062 DB68     		ldr	r3, [r3, #12]
 1835 0064 002B     		cmp	r3, #0
 1836 0066 04D0     		beq	.L89
 1837              		.loc 2 626 0 is_stmt 0 discriminator 1
 1838 0068 019B     		ldr	r3, [sp, #4]
 1839 006a 5B68     		ldr	r3, [r3, #4]
 1840 006c DB68     		ldr	r3, [r3, #12]
 1841 006e 0198     		ldr	r0, [sp, #4]
 1842 0070 9847     		blx	r3
 1843              	.L89:
 627:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   }
 628:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 629:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   /* RX FIFO not empty handling.*/
 630:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   if (sts & GINTSTS_RXFLVL) {
 1844              		.loc 2 630 0 is_stmt 1
 1845 0072 049B     		ldr	r3, [sp, #16]
 1846 0074 03F01003 		and	r3, r3, #16
 1847 0078 002B     		cmp	r3, #0
 1848 007a 12D0     		beq	.L90
 1849              	.LBB15:
 631:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     /* The interrupt is masked while the thread has control or it would
 632:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****        be triggered again.*/
 633:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     chSysLockFromIsr();
 1850              		.loc 2 633 0
 1851 007c 2023     		movs	r3, #32
 1852              	@ 633 "/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c" 1
 1853 007e 83F31188 		msr     BASEPRI, r3
 1854              	@ 0 "" 2
 1855              		.thumb
 1856              	.LBE15:
 1857 0082 FFF7FEFF 		bl	dbg_check_lock_from_isr
 634:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otgp->GINTMSK &= ~GINTMSK_RXFLVLM;
 1858              		.loc 2 634 0
 1859 0086 059B     		ldr	r3, [sp, #20]
 1860 0088 9B69     		ldr	r3, [r3, #24]
 1861 008a 23F01002 		bic	r2, r3, #16
 1862 008e 059B     		ldr	r3, [sp, #20]
 1863 0090 9A61     		str	r2, [r3, #24]
 635:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     usb_lld_wakeup_pump(usbp);
 1864              		.loc 2 635 0
 1865 0092 0198     		ldr	r0, [sp, #4]
 1866 0094 FFF7FEFF 		bl	usb_lld_wakeup_pump
 636:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     chSysUnlockFromIsr();
 1867              		.loc 2 636 0
 1868 0098 FFF7FEFF 		bl	dbg_check_unlock_from_isr
 1869              	.LBB16:
 1870 009c 0023     		movs	r3, #0
 1871              	@ 636 "/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c" 1
 1872 009e 83F31188 		msr     BASEPRI, r3
 1873              	@ 0 "" 2
 1874              		.thumb
 1875              	.L90:
 1876              	.LBE16:
 637:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   }
 638:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 639:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   /* IN/OUT endpoints event handling.*/
 640:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   src = otgp->DAINT;
 1877              		.loc 2 640 0
 1878 00a2 059B     		ldr	r3, [sp, #20]
 1879 00a4 D3F81838 		ldr	r3, [r3, #2072]
 1880 00a8 0393     		str	r3, [sp, #12]
 641:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   if (sts & GINTSTS_IEPINT) {
 1881              		.loc 2 641 0
 1882 00aa 049B     		ldr	r3, [sp, #16]
 1883 00ac 03F48023 		and	r3, r3, #262144
 1884 00b0 002B     		cmp	r3, #0
 1885 00b2 23D0     		beq	.L91
 642:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     if (src & (1 << 0))
 1886              		.loc 2 642 0
 1887 00b4 039B     		ldr	r3, [sp, #12]
 1888 00b6 03F00103 		and	r3, r3, #1
 1889 00ba 002B     		cmp	r3, #0
 1890 00bc 03D0     		beq	.L92
 643:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       otg_epin_handler(usbp, 0);
 1891              		.loc 2 643 0
 1892 00be 0198     		ldr	r0, [sp, #4]
 1893 00c0 0021     		movs	r1, #0
 1894 00c2 FFF7FEFF 		bl	otg_epin_handler
 1895              	.L92:
 644:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     if (src & (1 << 1))
 1896              		.loc 2 644 0
 1897 00c6 039B     		ldr	r3, [sp, #12]
 1898 00c8 03F00203 		and	r3, r3, #2
 1899 00cc 002B     		cmp	r3, #0
 1900 00ce 03D0     		beq	.L93
 645:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       otg_epin_handler(usbp, 1);
 1901              		.loc 2 645 0
 1902 00d0 0198     		ldr	r0, [sp, #4]
 1903 00d2 0121     		movs	r1, #1
 1904 00d4 FFF7FEFF 		bl	otg_epin_handler
 1905              	.L93:
 646:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     if (src & (1 << 2))
 1906              		.loc 2 646 0
 1907 00d8 039B     		ldr	r3, [sp, #12]
 1908 00da 03F00403 		and	r3, r3, #4
 1909 00de 002B     		cmp	r3, #0
 1910 00e0 03D0     		beq	.L94
 647:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       otg_epin_handler(usbp, 2);
 1911              		.loc 2 647 0
 1912 00e2 0198     		ldr	r0, [sp, #4]
 1913 00e4 0221     		movs	r1, #2
 1914 00e6 FFF7FEFF 		bl	otg_epin_handler
 1915              	.L94:
 648:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     if (src & (1 << 3))
 1916              		.loc 2 648 0
 1917 00ea 039B     		ldr	r3, [sp, #12]
 1918 00ec 03F00803 		and	r3, r3, #8
 1919 00f0 002B     		cmp	r3, #0
 1920 00f2 03D0     		beq	.L91
 649:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       otg_epin_handler(usbp, 3);
 1921              		.loc 2 649 0
 1922 00f4 0198     		ldr	r0, [sp, #4]
 1923 00f6 0321     		movs	r1, #3
 1924 00f8 FFF7FEFF 		bl	otg_epin_handler
 1925              	.L91:
 650:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #if STM32_USB_USE_OTG2
 651:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     if (src & (1 << 4))
 652:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       otg_epin_handler(usbp, 4);
 653:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     if (src & (1 << 5))
 654:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       otg_epin_handler(usbp, 5);
 655:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #endif
 656:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   }
 657:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   if (sts & GINTSTS_OEPINT) {
 1926              		.loc 2 657 0
 1927 00fc 049B     		ldr	r3, [sp, #16]
 1928 00fe 03F40023 		and	r3, r3, #524288
 1929 0102 002B     		cmp	r3, #0
 1930 0104 23D0     		beq	.L86
 658:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     if (src & (1 << 16))
 1931              		.loc 2 658 0
 1932 0106 039B     		ldr	r3, [sp, #12]
 1933 0108 03F48033 		and	r3, r3, #65536
 1934 010c 002B     		cmp	r3, #0
 1935 010e 03D0     		beq	.L96
 659:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       otg_epout_handler(usbp, 0);
 1936              		.loc 2 659 0
 1937 0110 0198     		ldr	r0, [sp, #4]
 1938 0112 0021     		movs	r1, #0
 1939 0114 FFF7FEFF 		bl	otg_epout_handler
 1940              	.L96:
 660:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     if (src & (1 << 17))
 1941              		.loc 2 660 0
 1942 0118 039B     		ldr	r3, [sp, #12]
 1943 011a 03F40033 		and	r3, r3, #131072
 1944 011e 002B     		cmp	r3, #0
 1945 0120 03D0     		beq	.L97
 661:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       otg_epout_handler(usbp, 1);
 1946              		.loc 2 661 0
 1947 0122 0198     		ldr	r0, [sp, #4]
 1948 0124 0121     		movs	r1, #1
 1949 0126 FFF7FEFF 		bl	otg_epout_handler
 1950              	.L97:
 662:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     if (src & (1 << 18))
 1951              		.loc 2 662 0
 1952 012a 039B     		ldr	r3, [sp, #12]
 1953 012c 03F48023 		and	r3, r3, #262144
 1954 0130 002B     		cmp	r3, #0
 1955 0132 03D0     		beq	.L98
 663:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       otg_epout_handler(usbp, 2);
 1956              		.loc 2 663 0
 1957 0134 0198     		ldr	r0, [sp, #4]
 1958 0136 0221     		movs	r1, #2
 1959 0138 FFF7FEFF 		bl	otg_epout_handler
 1960              	.L98:
 664:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     if (src & (1 << 19))
 1961              		.loc 2 664 0
 1962 013c 039B     		ldr	r3, [sp, #12]
 1963 013e 03F40023 		and	r3, r3, #524288
 1964 0142 002B     		cmp	r3, #0
 1965 0144 03D0     		beq	.L86
 665:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       otg_epout_handler(usbp, 3);
 1966              		.loc 2 665 0
 1967 0146 0198     		ldr	r0, [sp, #4]
 1968 0148 0321     		movs	r1, #3
 1969 014a FFF7FEFF 		bl	otg_epout_handler
 1970              	.L86:
 666:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #if STM32_USB_USE_OTG2
 667:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     if (src & (1 << 20))
 668:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       otg_epout_handler(usbp, 4);
 669:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     if (src & (1 << 21))
 670:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       otg_epout_handler(usbp, 5);
 671:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #endif
 672:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   }
 673:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 1971              		.loc 2 673 0
 1972 014e 07B0     		add	sp, sp, #28
 1973              		@ sp needed
 1974 0150 5DF804FB 		ldr	pc, [sp], #4
 1975              		.cfi_endproc
 1976              	.LFE135:
 1978 0154 AFF30080 		.section	.rodata
 1978      AFF30080 
 1978      AFF30080 
 1979 0015 000000   		.align	2
 1980              	.LC1:
 1981 0018 7573625F 		.ascii	"usb_lld_pump\000"
 1981      6C6C645F 
 1981      70756D70 
 1981      00
 1982 0025 000000   		.section	.text.usb_lld_pump,"ax",%progbits
 1983              		.align	2
 1984              		.p2align 4,,15
 1985              		.thumb
 1986              		.thumb_func
 1988              	usb_lld_pump:
 1989              	.LFB136:
 674:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 675:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /*===========================================================================*/
 676:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /* Driver interrupt handlers and threads.                                    */
 677:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /*===========================================================================*/
 678:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 679:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** static msg_t usb_lld_pump(void *p) {
 1990              		.loc 2 679 0
 1991              		.cfi_startproc
 1992              		@ args = 0, pretend = 0, frame = 32
 1993              		@ frame_needed = 0, uses_anonymous_args = 0
 1994 0000 00B5     		push	{lr}
 1995              		.cfi_def_cfa_offset 4
 1996              		.cfi_offset 14, -4
 1997 0002 89B0     		sub	sp, sp, #36
 1998              		.cfi_def_cfa_offset 40
 1999 0004 0190     		str	r0, [sp, #4]
 680:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   USBDriver *usbp = (USBDriver *)p;
 2000              		.loc 2 680 0
 2001 0006 019B     		ldr	r3, [sp, #4]
 2002 0008 0693     		str	r3, [sp, #24]
 681:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   stm32_otg_t *otgp = usbp->otg;
 2003              		.loc 2 681 0
 2004 000a 069B     		ldr	r3, [sp, #24]
 2005 000c DB6B     		ldr	r3, [r3, #60]
 2006 000e 0593     		str	r3, [sp, #20]
 682:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 683:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   chRegSetThreadName("usb_lld_pump");
 2007              		.loc 2 683 0
 2008 0010 464B     		ldr	r3, .L109
 2009 0012 9B69     		ldr	r3, [r3, #24]
 2010 0014 464A     		ldr	r2, .L109+4
 2011 0016 9A61     		str	r2, [r3, #24]
 2012              	.LBB17:
 684:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   chSysLock();
 2013              		.loc 2 684 0
 2014 0018 2023     		movs	r3, #32
 2015              	@ 684 "/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c" 1
 2016 001a 83F31188 		msr     BASEPRI, r3
 2017              	@ 0 "" 2
 2018              		.thumb
 2019              	.LBE17:
 2020 001e FFF7FEFF 		bl	dbg_check_lock
 2021              	.L108:
 2022              	.LBB18:
 685:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   while (TRUE) {
 686:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     usbep_t ep;
 687:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     uint32_t epmask;
 688:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 689:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     /* Nothing to do, going to sleep.*/
 690:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     if ((usbp->state == USB_STOP) ||
 2023              		.loc 2 690 0
 2024 0022 069B     		ldr	r3, [sp, #24]
 2025 0024 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2026 0026 012B     		cmp	r3, #1
 2027 0028 09D0     		beq	.L100
 691:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****         ((usbp->txpending == 0) && !(otgp->GINTSTS & GINTSTS_RXFLVL))) {
 2028              		.loc 2 691 0 discriminator 1
 2029 002a 069B     		ldr	r3, [sp, #24]
 2030 002c 9B6C     		ldr	r3, [r3, #72]
 690:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****         ((usbp->txpending == 0) && !(otgp->GINTSTS & GINTSTS_RXFLVL))) {
 2031              		.loc 2 690 0 discriminator 1
 2032 002e 002B     		cmp	r3, #0
 2033 0030 12D1     		bne	.L101
 2034              		.loc 2 691 0
 2035 0032 059B     		ldr	r3, [sp, #20]
 2036 0034 5B69     		ldr	r3, [r3, #20]
 2037 0036 03F01003 		and	r3, r3, #16
 2038 003a 002B     		cmp	r3, #0
 2039 003c 0CD1     		bne	.L101
 2040              	.L100:
 692:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       otgp->GINTMSK |= GINTMSK_RXFLVLM;
 2041              		.loc 2 692 0
 2042 003e 059B     		ldr	r3, [sp, #20]
 2043 0040 9B69     		ldr	r3, [r3, #24]
 2044 0042 43F01002 		orr	r2, r3, #16
 2045 0046 059B     		ldr	r3, [sp, #20]
 2046 0048 9A61     		str	r2, [r3, #24]
 693:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       usbp->thd_wait = chThdSelf();
 2047              		.loc 2 693 0
 2048 004a 384B     		ldr	r3, .L109
 2049 004c 9A69     		ldr	r2, [r3, #24]
 2050 004e 069B     		ldr	r3, [sp, #24]
 2051 0050 1A65     		str	r2, [r3, #80]
 694:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       chSchGoSleepS(THD_STATE_SUSPENDED);
 2052              		.loc 2 694 0
 2053 0052 0220     		movs	r0, #2
 2054 0054 FFF7FEFF 		bl	chSchGoSleepS
 2055              	.L101:
 695:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     }
 696:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     chSysUnlock();
 2056              		.loc 2 696 0
 2057 0058 FFF7FEFF 		bl	dbg_check_unlock
 2058              	.LBB19:
 2059 005c 0023     		movs	r3, #0
 2060              	@ 696 "/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c" 1
 2061 005e 83F31188 		msr     BASEPRI, r3
 2062              	@ 0 "" 2
 2063              		.thumb
 2064              	.LBE19:
 697:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 698:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     /* Checks if there are TXFIFOs to be filled.*/
 699:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     for (ep = 0; ep <= usbp->otgparams->num_endpoints; ep++) {
 2065              		.loc 2 699 0
 2066 0062 0023     		movs	r3, #0
 2067 0064 8DF81F30 		strb	r3, [sp, #31]
 2068 0068 53E0     		b	.L102
 2069              	.L107:
 700:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 701:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       /* Empties the RX FIFO.*/
 702:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       while (otgp->GINTSTS & GINTSTS_RXFLVL) {
 2070              		.loc 2 702 0
 2071 006a 02E0     		b	.L103
 2072              	.L104:
 703:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****         otg_rxfifo_handler(usbp);
 2073              		.loc 2 703 0
 2074 006c 0698     		ldr	r0, [sp, #24]
 2075 006e FFF7FEFF 		bl	otg_rxfifo_handler
 2076              	.L103:
 702:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****         otg_rxfifo_handler(usbp);
 2077              		.loc 2 702 0 discriminator 1
 2078 0072 059B     		ldr	r3, [sp, #20]
 2079 0074 5B69     		ldr	r3, [r3, #20]
 2080 0076 03F01003 		and	r3, r3, #16
 2081 007a 002B     		cmp	r3, #0
 2082 007c F6D1     		bne	.L104
 704:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       }
 705:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 706:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       epmask = (1 << ep);
 2083              		.loc 2 706 0
 2084 007e 9DF81F30 		ldrb	r3, [sp, #31]	@ zero_extendqisi2
 2085 0082 0122     		movs	r2, #1
 2086 0084 02FA03F3 		lsl	r3, r2, r3
 2087 0088 0493     		str	r3, [sp, #16]
 707:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       if (usbp->txpending & epmask) {
 2088              		.loc 2 707 0
 2089 008a 069B     		ldr	r3, [sp, #24]
 2090 008c 9A6C     		ldr	r2, [r3, #72]
 2091 008e 049B     		ldr	r3, [sp, #16]
 2092 0090 1340     		ands	r3, r3, r2
 2093 0092 002B     		cmp	r3, #0
 2094 0094 38D0     		beq	.L105
 2095              	.LBB20:
 2096              	.LBB21:
 708:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****         bool_t done;
 709:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 710:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****         chSysLock();
 2097              		.loc 2 710 0
 2098 0096 2023     		movs	r3, #32
 2099              	@ 710 "/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c" 1
 2100 0098 83F31188 		msr     BASEPRI, r3
 2101              	@ 0 "" 2
 2102              		.thumb
 2103              	.LBE21:
 2104 009c FFF7FEFF 		bl	dbg_check_lock
 711:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****         /* USB interrupts are globally *suspended* because the peripheral
 712:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****            does not allow any interference during the TX FIFO filling
 713:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****            operation.
 714:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****            Synopsys document: DesignWare Cores USB 2.0 Hi-Speed On-The-Go (OTG)
 715:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****              "The application has to finish writing one complete packet before
 716:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****               switching to a different channel/endpoint FIFO. Violating this
 717:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****               rule results in an error.".*/
 718:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****         otgp->GAHBCFG &= ~GAHBCFG_GINTMSK;
 2105              		.loc 2 718 0
 2106 00a0 059B     		ldr	r3, [sp, #20]
 2107 00a2 9B68     		ldr	r3, [r3, #8]
 2108 00a4 23F00102 		bic	r2, r3, #1
 2109 00a8 059B     		ldr	r3, [sp, #20]
 2110 00aa 9A60     		str	r2, [r3, #8]
 719:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****         usbp->txpending &= ~epmask;
 2111              		.loc 2 719 0
 2112 00ac 069B     		ldr	r3, [sp, #24]
 2113 00ae 9A6C     		ldr	r2, [r3, #72]
 2114 00b0 049B     		ldr	r3, [sp, #16]
 2115 00b2 DB43     		mvns	r3, r3
 2116 00b4 1A40     		ands	r2, r2, r3
 2117 00b6 069B     		ldr	r3, [sp, #24]
 2118 00b8 9A64     		str	r2, [r3, #72]
 720:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****         chSysUnlock();
 2119              		.loc 2 720 0
 2120 00ba FFF7FEFF 		bl	dbg_check_unlock
 2121              	.LBB22:
 2122 00be 0023     		movs	r3, #0
 2123              	@ 720 "/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c" 1
 2124 00c0 83F31188 		msr     BASEPRI, r3
 2125              	@ 0 "" 2
 2126              		.thumb
 2127              	.LBE22:
 721:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 722:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****         done = otg_txfifo_handler(usbp, ep);
 2128              		.loc 2 722 0
 2129 00c4 9DF81F30 		ldrb	r3, [sp, #31]	@ zero_extendqisi2
 2130 00c8 0698     		ldr	r0, [sp, #24]
 2131 00ca 1946     		mov	r1, r3
 2132 00cc FFF7FEFF 		bl	otg_txfifo_handler
 2133 00d0 0390     		str	r0, [sp, #12]
 2134              	.LBB23:
 723:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 724:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****         chSysLock();
 2135              		.loc 2 724 0
 2136 00d2 2023     		movs	r3, #32
 2137              	@ 724 "/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c" 1
 2138 00d4 83F31188 		msr     BASEPRI, r3
 2139              	@ 0 "" 2
 2140              		.thumb
 2141              	.LBE23:
 2142 00d8 FFF7FEFF 		bl	dbg_check_lock
 725:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****         otgp->GAHBCFG |= GAHBCFG_GINTMSK;
 2143              		.loc 2 725 0
 2144 00dc 059B     		ldr	r3, [sp, #20]
 2145 00de 9B68     		ldr	r3, [r3, #8]
 2146 00e0 43F00102 		orr	r2, r3, #1
 2147 00e4 059B     		ldr	r3, [sp, #20]
 2148 00e6 9A60     		str	r2, [r3, #8]
 726:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****         if (!done)
 2149              		.loc 2 726 0
 2150 00e8 039B     		ldr	r3, [sp, #12]
 2151 00ea 002B     		cmp	r3, #0
 2152 00ec 07D1     		bne	.L106
 727:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****           otgp->DIEPEMPMSK |= epmask;
 2153              		.loc 2 727 0
 2154 00ee 059B     		ldr	r3, [sp, #20]
 2155 00f0 D3F83428 		ldr	r2, [r3, #2100]
 2156 00f4 049B     		ldr	r3, [sp, #16]
 2157 00f6 1A43     		orrs	r2, r2, r3
 2158 00f8 059B     		ldr	r3, [sp, #20]
 2159 00fa C3F83428 		str	r2, [r3, #2100]
 2160              	.L106:
 728:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****         chSysUnlock();
 2161              		.loc 2 728 0
 2162 00fe FFF7FEFF 		bl	dbg_check_unlock
 2163              	.LBB24:
 2164 0102 0023     		movs	r3, #0
 2165              	@ 728 "/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c" 1
 2166 0104 83F31188 		msr     BASEPRI, r3
 2167              	@ 0 "" 2
 2168              		.thumb
 2169              	.L105:
 2170              	.LBE24:
 2171              	.LBE20:
 699:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 2172              		.loc 2 699 0
 2173 0108 9DF81F30 		ldrb	r3, [sp, #31]	@ zero_extendqisi2
 2174 010c 0133     		adds	r3, r3, #1
 2175 010e 8DF81F30 		strb	r3, [sp, #31]
 2176              	.L102:
 699:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 2177              		.loc 2 699 0 is_stmt 0 discriminator 1
 2178 0112 9DF81F20 		ldrb	r2, [sp, #31]	@ zero_extendqisi2
 2179 0116 069B     		ldr	r3, [sp, #24]
 2180 0118 1B6C     		ldr	r3, [r3, #64]
 2181 011a 9B68     		ldr	r3, [r3, #8]
 2182 011c 9A42     		cmp	r2, r3
 2183 011e A4D9     		bls	.L107
 2184              	.LBB25:
 729:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       }
 730:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     }
 731:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     chSysLock();
 2185              		.loc 2 731 0 is_stmt 1
 2186 0120 2023     		movs	r3, #32
 2187              	@ 731 "/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c" 1
 2188 0122 83F31188 		msr     BASEPRI, r3
 2189              	@ 0 "" 2
 2190              		.thumb
 2191              	.LBE25:
 2192 0126 FFF7FEFF 		bl	dbg_check_lock
 2193              	.LBE18:
 732:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   }
 2194              		.loc 2 732 0
 2195 012a 7AE7     		b	.L108
 2196              	.L110:
 2197              		.align	2
 2198              	.L109:
 2199 012c 00000000 		.word	rlist
 2200 0130 18000000 		.word	.LC1
 2201              		.cfi_endproc
 2202              	.LFE136:
 2204 0134 AFF30080 		.section	.text.Vector14C,"ax",%progbits
 2204      AFF30080 
 2204      AFF30080 
 2205              		.align	2
 2206              		.p2align 4,,15
 2207              		.global	Vector14C
 2208              		.thumb
 2209              		.thumb_func
 2211              	Vector14C:
 2212              	.LFB137:
 733:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   chSysUnlock();
 734:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   return 0;
 735:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 736:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 737:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #if STM32_USB_USE_OTG1 || defined(__DOXYGEN__)
 738:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #if !defined(STM32_OTG1_HANDLER)
 739:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #error "STM32_OTG1_HANDLER not defined"
 740:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #endif
 741:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /**
 742:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @brief   OTG1 interrupt handler.
 743:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 744:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @isr
 745:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  */
 746:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** CH_IRQ_HANDLER(STM32_OTG1_HANDLER) {
 2213              		.loc 2 746 0
 2214              		.cfi_startproc
 2215              		@ args = 0, pretend = 0, frame = 0
 2216              		@ frame_needed = 0, uses_anonymous_args = 0
 2217 0000 08B5     		push	{r3, lr}
 2218              		.cfi_def_cfa_offset 8
 2219              		.cfi_offset 3, -8
 2220              		.cfi_offset 14, -4
 747:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 748:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   CH_IRQ_PROLOGUE();
 2221              		.loc 2 748 0
 2222 0002 FFF7FEFF 		bl	dbg_check_enter_isr
 749:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 750:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   usb_lld_serve_interrupt(&USBD1);
 2223              		.loc 2 750 0
 2224 0006 0448     		ldr	r0, .L112
 2225 0008 FFF7FEFF 		bl	usb_lld_serve_interrupt
 751:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 752:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   CH_IRQ_EPILOGUE();
 2226              		.loc 2 752 0
 2227 000c FFF7FEFF 		bl	dbg_check_leave_isr
 2228 0010 FFF7FEFF 		bl	_port_irq_epilogue
 753:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 2229              		.loc 2 753 0
 2230 0014 08BD     		pop	{r3, pc}
 2231              	.L113:
 2232 0016 00BF     		.align	2
 2233              	.L112:
 2234 0018 00000000 		.word	USBD1
 2235              		.cfi_endproc
 2236              	.LFE137:
 2238 001c AFF30080 		.section	.text.usb_lld_init,"ax",%progbits
 2239              		.align	2
 2240              		.p2align 4,,15
 2241              		.global	usb_lld_init
 2242              		.thumb
 2243              		.thumb_func
 2245              	usb_lld_init:
 2246              	.LFB138:
 754:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #endif
 755:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 756:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #if STM32_USB_USE_OTG2 || defined(__DOXYGEN__)
 757:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #if !defined(STM32_OTG2_HANDLER)
 758:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #error "STM32_OTG2_HANDLER not defined"
 759:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #endif
 760:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /**
 761:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @brief   OTG2 interrupt handler.
 762:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 763:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @isr
 764:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  */
 765:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** CH_IRQ_HANDLER(STM32_OTG2_HANDLER) {
 766:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 767:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   CH_IRQ_PROLOGUE();
 768:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 769:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   usb_lld_serve_interrupt(&USBD2);
 770:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 771:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   CH_IRQ_EPILOGUE();
 772:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 773:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #endif
 774:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 775:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /*===========================================================================*/
 776:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /* Driver exported functions.                                                */
 777:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /*===========================================================================*/
 778:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 779:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /**
 780:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @brief   Low level USB driver initialization.
 781:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 782:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @notapi
 783:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  */
 784:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** void usb_lld_init(void) {
 2247              		.loc 2 784 0
 2248              		.cfi_startproc
 2249              		@ args = 0, pretend = 0, frame = 8
 2250              		@ frame_needed = 0, uses_anonymous_args = 0
 2251 0000 00B5     		push	{lr}
 2252              		.cfi_def_cfa_offset 4
 2253              		.cfi_offset 14, -4
 2254 0002 83B0     		sub	sp, sp, #12
 2255              		.cfi_def_cfa_offset 16
 785:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 786:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   /* Driver initialization.*/
 787:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #if STM32_USB_USE_OTG1
 788:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   usbObjectInit(&USBD1);
 2256              		.loc 2 788 0
 2257 0004 1348     		ldr	r0, .L115
 2258 0006 FFF7FEFF 		bl	usbObjectInit
 789:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   USBD1.thd_ptr   = NULL;
 2259              		.loc 2 789 0
 2260 000a 124B     		ldr	r3, .L115
 2261 000c 0022     		movs	r2, #0
 2262 000e DA64     		str	r2, [r3, #76]
 790:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   USBD1.thd_wait  = NULL;
 2263              		.loc 2 790 0
 2264 0010 104B     		ldr	r3, .L115
 2265 0012 0022     		movs	r2, #0
 2266 0014 1A65     		str	r2, [r3, #80]
 791:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   USBD1.otg       = OTG_FS;
 2267              		.loc 2 791 0
 2268 0016 0F4B     		ldr	r3, .L115
 2269 0018 4FF0A042 		mov	r2, #1342177280
 2270 001c DA63     		str	r2, [r3, #60]
 792:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   USBD1.otgparams = &fsparams;
 2271              		.loc 2 792 0
 2272 001e 0D4B     		ldr	r3, .L115
 2273 0020 0D4A     		ldr	r2, .L115+4
 2274 0022 1A64     		str	r2, [r3, #64]
 2275              	.LBB26:
 793:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 794:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   /* Filling the thread working area here because the function
 795:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****      @p chThdCreateI() does not do it.*/
 796:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #if CH_DBG_FILL_THREADS
 797:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   {
 798:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     void *wsp = USBD1.wa_pump;
 2276              		.loc 2 798 0
 2277 0024 0D4B     		ldr	r3, .L115+8
 2278 0026 0193     		str	r3, [sp, #4]
 799:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     _thread_memfill((uint8_t *)wsp,
 2279              		.loc 2 799 0
 2280 0028 019B     		ldr	r3, [sp, #4]
 2281 002a 4C33     		adds	r3, r3, #76
 2282 002c 0198     		ldr	r0, [sp, #4]
 2283 002e 1946     		mov	r1, r3
 2284 0030 FF22     		movs	r2, #255
 2285 0032 FFF7FEFF 		bl	_thread_memfill
 800:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                     (uint8_t *)wsp + sizeof(Thread),
 801:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                     CH_THREAD_FILL_VALUE);
 802:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     _thread_memfill((uint8_t *)wsp + sizeof(Thread),
 2286              		.loc 2 802 0
 2287 0036 019B     		ldr	r3, [sp, #4]
 2288 0038 03F14C02 		add	r2, r3, #76
 2289 003c 019B     		ldr	r3, [sp, #4]
 2290 003e 03F5B673 		add	r3, r3, #364
 2291 0042 1046     		mov	r0, r2
 2292 0044 1946     		mov	r1, r3
 2293 0046 5522     		movs	r2, #85
 2294 0048 FFF7FEFF 		bl	_thread_memfill
 2295              	.LBE26:
 803:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                     (uint8_t *)wsp + sizeof(USBD1.wa_pump) - sizeof(Thread),
 804:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                     CH_STACK_FILL_VALUE);
 805:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   }
 806:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #endif
 807:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #endif
 808:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 809:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #if STM32_USB_USE_OTG2
 810:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   usbObjectInit(&USBD2);
 811:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   USBD2.thd_ptr   = NULL;
 812:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   USBD2.thd_wait  = NULL;
 813:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   USBD2.otg       = OTG_HS;
 814:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   USBD2.otgparams = &hsparams;
 815:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 816:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   /* Filling the thread working area here because the function
 817:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****      @p chThdCreateI() does not do it.*/
 818:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #if CH_DBG_FILL_THREADS
 819:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   {
 820:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     void *wsp = USBD2.wa_pump;
 821:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     _thread_memfill((uint8_t *)wsp,
 822:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                     (uint8_t *)wsp + sizeof(Thread),
 823:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                     CH_THREAD_FILL_VALUE);
 824:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     _thread_memfill((uint8_t *)wsp + sizeof(Thread),
 825:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                     (uint8_t *)wsp + sizeof(USBD2.wa_pump) - sizeof(Thread),
 826:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                     CH_STACK_FILL_VALUE);
 827:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   }
 828:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #endif
 829:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #endif
 830:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 2296              		.loc 2 830 0
 2297 004c 03B0     		add	sp, sp, #12
 2298              		@ sp needed
 2299 004e 5DF804FB 		ldr	pc, [sp], #4
 2300              	.L116:
 2301 0052 00BF     		.align	2
 2302              	.L115:
 2303 0054 00000000 		.word	USBD1
 2304 0058 00000000 		.word	fsparams
 2305 005c 58000000 		.word	USBD1+88
 2306              		.cfi_endproc
 2307              	.LFE138:
 2309              		.section	.text.usb_lld_start,"ax",%progbits
 2310              		.align	2
 2311              		.p2align 4,,15
 2312              		.global	usb_lld_start
 2313              		.thumb
 2314              		.thumb_func
 2316              	usb_lld_start:
 2317              	.LFB139:
 831:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 832:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /**
 833:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @brief   Configures and activates the USB peripheral.
 834:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @note    Starting the OTG cell can be a slow operation carried out with
 835:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *          interrupts disabled, perform it before starting time-critical
 836:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *          operations.
 837:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 838:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 839:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 840:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @notapi
 841:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  */
 842:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** void usb_lld_start(USBDriver *usbp) {
 2318              		.loc 2 842 0
 2319              		.cfi_startproc
 2320              		@ args = 0, pretend = 0, frame = 16
 2321              		@ frame_needed = 0, uses_anonymous_args = 0
 2322 0000 00B5     		push	{lr}
 2323              		.cfi_def_cfa_offset 4
 2324              		.cfi_offset 14, -4
 2325 0002 87B0     		sub	sp, sp, #28
 2326              		.cfi_def_cfa_offset 32
 2327 0004 0390     		str	r0, [sp, #12]
 843:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   stm32_otg_t *otgp = usbp->otg;
 2328              		.loc 2 843 0
 2329 0006 039B     		ldr	r3, [sp, #12]
 2330 0008 DB6B     		ldr	r3, [r3, #60]
 2331 000a 0593     		str	r3, [sp, #20]
 844:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 845:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   if (usbp->state == USB_STOP) {
 2332              		.loc 2 845 0
 2333 000c 039B     		ldr	r3, [sp, #12]
 2334 000e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2335 0010 012B     		cmp	r3, #1
 2336 0012 6BD1     		bne	.L117
 846:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     /* Clock activation.*/
 847:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #if STM32_USB_USE_OTG1
 848:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     if (&USBD1 == usbp) {
 2337              		.loc 2 848 0
 2338 0014 039A     		ldr	r2, [sp, #12]
 2339 0016 374B     		ldr	r3, .L123
 2340 0018 9A42     		cmp	r2, r3
 2341 001a 12D1     		bne	.L119
 849:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       /* OTG FS clock enable and reset.*/
 850:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       rccEnableOTG_FS(FALSE);
 2342              		.loc 2 850 0
 2343 001c 364B     		ldr	r3, .L123+4
 2344 001e 364A     		ldr	r2, .L123+4
 2345 0020 526B     		ldr	r2, [r2, #52]
 2346 0022 42F08002 		orr	r2, r2, #128
 2347 0026 5A63     		str	r2, [r3, #52]
 851:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       rccResetOTG_FS();
 2348              		.loc 2 851 0
 2349 0028 334B     		ldr	r3, .L123+4
 2350 002a 334A     		ldr	r2, .L123+4
 2351 002c 5269     		ldr	r2, [r2, #20]
 2352 002e 42F08002 		orr	r2, r2, #128
 2353 0032 5A61     		str	r2, [r3, #20]
 2354 0034 304B     		ldr	r3, .L123+4
 2355 0036 0022     		movs	r2, #0
 2356 0038 5A61     		str	r2, [r3, #20]
 852:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 853:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       /* Enables IRQ vector.*/
 854:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       nvicEnableVector(STM32_OTG1_NUMBER,
 2357              		.loc 2 854 0
 2358 003a 4320     		movs	r0, #67
 2359 003c E021     		movs	r1, #224
 2360 003e FFF7FEFF 		bl	nvicEnableVector
 2361              	.L119:
 855:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                        CORTEX_PRIORITY_MASK(STM32_USB_OTG1_IRQ_PRIORITY));
 856:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     }
 857:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #endif
 858:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #if STM32_USB_USE_OTG2
 859:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     if (&USBD2 == usbp) {
 860:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       /* OTG HS clock enable and reset.*/
 861:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       rccEnableOTG_HS(FALSE);
 862:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       rccResetOTG_HS();
 863:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 864:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       /* Enables IRQ vector.*/
 865:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       nvicEnableVector(STM32_OTG2_NUMBER,
 866:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                        CORTEX_PRIORITY_MASK(STM32_USB_OTG2_IRQ_PRIORITY));
 867:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     }
 868:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #endif
 869:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 870:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     /* Creates the data pump threads in a suspended state. Note, it is
 871:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****        created only once, the first time @p usbStart() is invoked.*/
 872:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     usbp->txpending = 0;
 2362              		.loc 2 872 0
 2363 0042 039B     		ldr	r3, [sp, #12]
 2364 0044 0022     		movs	r2, #0
 2365 0046 9A64     		str	r2, [r3, #72]
 873:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     if (usbp->thd_ptr == NULL)
 2366              		.loc 2 873 0
 2367 0048 039B     		ldr	r3, [sp, #12]
 2368 004a DB6C     		ldr	r3, [r3, #76]
 2369 004c 002B     		cmp	r3, #0
 2370 004e 11D1     		bne	.L120
 874:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       usbp->thd_ptr = usbp->thd_wait = chThdCreateI(usbp->wa_pump,
 2371              		.loc 2 874 0
 2372 0050 039B     		ldr	r3, [sp, #12]
 2373 0052 5833     		adds	r3, r3, #88
 2374 0054 039A     		ldr	r2, [sp, #12]
 2375 0056 0092     		str	r2, [sp]
 2376 0058 1846     		mov	r0, r3
 2377 005a 4FF4DC71 		mov	r1, #440
 2378 005e 0222     		movs	r2, #2
 2379 0060 264B     		ldr	r3, .L123+8
 2380 0062 FFF7FEFF 		bl	chThdCreateI
 2381 0066 0246     		mov	r2, r0
 2382 0068 039B     		ldr	r3, [sp, #12]
 2383 006a 1A65     		str	r2, [r3, #80]
 2384 006c 039B     		ldr	r3, [sp, #12]
 2385 006e 1A6D     		ldr	r2, [r3, #80]
 2386 0070 039B     		ldr	r3, [sp, #12]
 2387 0072 DA64     		str	r2, [r3, #76]
 2388              	.L120:
 875:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                                                     sizeof usbp->wa_pump,
 876:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                                                     STM32_USB_OTG_THREAD_PRIO,
 877:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                                                     usb_lld_pump,
 878:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                                                     usbp);
 879:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 880:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     /* - Forced device mode.
 881:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****        - USB turn-around time = TRDT_VALUE.
 882:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****        - Full Speed 1.1 PHY.*/
 883:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otgp->GUSBCFG = GUSBCFG_FDMOD | GUSBCFG_TRDT(TRDT_VALUE) | GUSBCFG_PHYSEL;
 2389              		.loc 2 883 0
 2390 0074 059B     		ldr	r3, [sp, #20]
 2391 0076 224A     		ldr	r2, .L123+12
 2392 0078 DA60     		str	r2, [r3, #12]
 884:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 885:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     /* 48MHz 1.1 PHY.*/
 886:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otgp->DCFG = 0x02200000 | DCFG_DSPD_FS11;
 2393              		.loc 2 886 0
 2394 007a 059B     		ldr	r3, [sp, #20]
 2395 007c 214A     		ldr	r2, .L123+16
 2396 007e C3F80028 		str	r2, [r3, #2048]
 887:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 888:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     /* PHY enabled.*/
 889:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otgp->PCGCCTL = 0;
 2397              		.loc 2 889 0
 2398 0082 059B     		ldr	r3, [sp, #20]
 2399 0084 0022     		movs	r2, #0
 2400 0086 C3F8002E 		str	r2, [r3, #3584]
 890:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 891:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     /* Internal FS PHY activation.*/
 892:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otgp->GCCFG = GCCFG_VBUSASEN | GCCFG_VBUSBSEN | GCCFG_PWRDWN;
 2401              		.loc 2 892 0
 2402 008a 059B     		ldr	r3, [sp, #20]
 2403 008c 4FF45022 		mov	r2, #851968
 2404 0090 9A63     		str	r2, [r3, #56]
 893:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 894:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     /* Soft core reset.*/
 895:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otg_core_reset(usbp);
 2405              		.loc 2 895 0
 2406 0092 0398     		ldr	r0, [sp, #12]
 2407 0094 FFF7FEFF 		bl	otg_core_reset
 896:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 897:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     /* Interrupts on TXFIFOs half empty.*/
 898:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otgp->GAHBCFG = 0;
 2408              		.loc 2 898 0
 2409 0098 059B     		ldr	r3, [sp, #20]
 2410 009a 0022     		movs	r2, #0
 2411 009c 9A60     		str	r2, [r3, #8]
 899:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 900:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     /* Endpoints re-initialization.*/
 901:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otg_disable_ep(usbp);
 2412              		.loc 2 901 0
 2413 009e 0398     		ldr	r0, [sp, #12]
 2414 00a0 FFF7FEFF 		bl	otg_disable_ep
 902:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 903:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     /* Clear all pending Device Interrupts, only the USB Reset interrupt
 904:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****        is required initially.*/
 905:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otgp->DIEPMSK  = 0;
 2415              		.loc 2 905 0
 2416 00a4 059B     		ldr	r3, [sp, #20]
 2417 00a6 0022     		movs	r2, #0
 2418 00a8 C3F81028 		str	r2, [r3, #2064]
 906:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otgp->DOEPMSK  = 0;
 2419              		.loc 2 906 0
 2420 00ac 059B     		ldr	r3, [sp, #20]
 2421 00ae 0022     		movs	r2, #0
 2422 00b0 C3F81428 		str	r2, [r3, #2068]
 907:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otgp->DAINTMSK = 0;
 2423              		.loc 2 907 0
 2424 00b4 059B     		ldr	r3, [sp, #20]
 2425 00b6 0022     		movs	r2, #0
 2426 00b8 C3F81C28 		str	r2, [r3, #2076]
 908:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     if (usbp->config->sof_cb == NULL)
 2427              		.loc 2 908 0
 2428 00bc 039B     		ldr	r3, [sp, #12]
 2429 00be 5B68     		ldr	r3, [r3, #4]
 2430 00c0 DB68     		ldr	r3, [r3, #12]
 2431 00c2 002B     		cmp	r3, #0
 2432 00c4 04D1     		bne	.L121
 909:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       otgp->GINTMSK  = GINTMSK_ENUMDNEM | GINTMSK_USBRSTM /*| GINTMSK_USBSUSPM |
 2433              		.loc 2 909 0
 2434 00c6 059B     		ldr	r3, [sp, #20]
 2435 00c8 4FF44052 		mov	r2, #12288
 2436 00cc 9A61     		str	r2, [r3, #24]
 2437 00ce 03E0     		b	.L122
 2438              	.L121:
 910:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                        GINTMSK_ESUSPM  |*/;
 911:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     else
 912:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       otgp->GINTMSK  = GINTMSK_ENUMDNEM | GINTMSK_USBRSTM /*| GINTMSK_USBSUSPM |
 2439              		.loc 2 912 0
 2440 00d0 059B     		ldr	r3, [sp, #20]
 2441 00d2 43F20802 		movw	r2, #12296
 2442 00d6 9A61     		str	r2, [r3, #24]
 2443              	.L122:
 913:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                        GINTMSK_ESUSPM */ | GINTMSK_SOFM;
 914:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otgp->GINTSTS  = 0xFFFFFFFF;         /* Clears all pending IRQs, if any. */
 2444              		.loc 2 914 0
 2445 00d8 059B     		ldr	r3, [sp, #20]
 2446 00da 4FF0FF32 		mov	r2, #-1
 2447 00de 5A61     		str	r2, [r3, #20]
 915:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 916:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     /* Global interrupts enable.*/
 917:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otgp->GAHBCFG |= GAHBCFG_GINTMSK;
 2448              		.loc 2 917 0
 2449 00e0 059B     		ldr	r3, [sp, #20]
 2450 00e2 9B68     		ldr	r3, [r3, #8]
 2451 00e4 43F00102 		orr	r2, r3, #1
 2452 00e8 059B     		ldr	r3, [sp, #20]
 2453 00ea 9A60     		str	r2, [r3, #8]
 2454              	.L117:
 918:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   }
 919:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 2455              		.loc 2 919 0
 2456 00ec 07B0     		add	sp, sp, #28
 2457              		@ sp needed
 2458 00ee 5DF804FB 		ldr	pc, [sp], #4
 2459              	.L124:
 2460 00f2 00BF     		.align	2
 2461              	.L123:
 2462 00f4 00000000 		.word	USBD1
 2463 00f8 00380240 		.word	1073887232
 2464 00fc 00000000 		.word	usb_lld_pump
 2465 0100 40140040 		.word	1073747008
 2466 0104 03002002 		.word	35651587
 2467              		.cfi_endproc
 2468              	.LFE139:
 2470 0108 AFF30080 		.section	.text.usb_lld_stop,"ax",%progbits
 2470      AFF30080 
 2471              		.align	2
 2472              		.p2align 4,,15
 2473              		.global	usb_lld_stop
 2474              		.thumb
 2475              		.thumb_func
 2477              	usb_lld_stop:
 2478              	.LFB140:
 920:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 921:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /**
 922:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @brief   Deactivates the USB peripheral.
 923:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 924:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 925:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 926:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @notapi
 927:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  */
 928:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** void usb_lld_stop(USBDriver *usbp) {
 2479              		.loc 2 928 0
 2480              		.cfi_startproc
 2481              		@ args = 0, pretend = 0, frame = 16
 2482              		@ frame_needed = 0, uses_anonymous_args = 0
 2483              		@ link register save eliminated.
 2484 0000 84B0     		sub	sp, sp, #16
 2485              		.cfi_def_cfa_offset 16
 2486 0002 0190     		str	r0, [sp, #4]
 929:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   stm32_otg_t *otgp = usbp->otg;
 2487              		.loc 2 929 0
 2488 0004 019B     		ldr	r3, [sp, #4]
 2489 0006 DB6B     		ldr	r3, [r3, #60]
 2490 0008 0393     		str	r3, [sp, #12]
 930:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 931:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   /* If in ready state then disables the USB clock.*/
 932:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   if (usbp->state != USB_STOP) {
 2491              		.loc 2 932 0
 2492 000a 019B     		ldr	r3, [sp, #4]
 2493 000c 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 2494 000e 012B     		cmp	r3, #1
 2495 0010 0CD0     		beq	.L125
 933:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 934:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     usbp->txpending = 0;
 2496              		.loc 2 934 0
 2497 0012 019B     		ldr	r3, [sp, #4]
 2498 0014 0022     		movs	r2, #0
 2499 0016 9A64     		str	r2, [r3, #72]
 935:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 936:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otgp->DAINTMSK   = 0;
 2500              		.loc 2 936 0
 2501 0018 039B     		ldr	r3, [sp, #12]
 2502 001a 0022     		movs	r2, #0
 2503 001c C3F81C28 		str	r2, [r3, #2076]
 937:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otgp->GAHBCFG    = 0;
 2504              		.loc 2 937 0
 2505 0020 039B     		ldr	r3, [sp, #12]
 2506 0022 0022     		movs	r2, #0
 2507 0024 9A60     		str	r2, [r3, #8]
 938:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otgp->GCCFG      = 0;
 2508              		.loc 2 938 0
 2509 0026 039B     		ldr	r3, [sp, #12]
 2510 0028 0022     		movs	r2, #0
 2511 002a 9A63     		str	r2, [r3, #56]
 2512              	.L125:
 939:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 940:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #if STM32_USB_USE_USB1
 941:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     if (&USBD1 == usbp) {
 942:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       nvicDisableVector(STM32_OTG1_NUMBER);
 943:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       rccDisableOTG1(FALSE);
 944:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     }
 945:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #endif
 946:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 947:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #if STM32_USB_USE_USB2
 948:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     if (&USBD2 == usbp) {
 949:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       nvicDisableVector(STM32_OTG2_NUMBER);
 950:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       rccDisableOTG2(FALSE);
 951:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     }
 952:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** #endif
 953:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   }
 954:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 2513              		.loc 2 954 0
 2514 002c 04B0     		add	sp, sp, #16
 2515              		@ sp needed
 2516 002e 7047     		bx	lr
 2517              		.cfi_endproc
 2518              	.LFE140:
 2520              		.section	.text.usb_lld_reset,"ax",%progbits
 2521              		.align	2
 2522              		.p2align 4,,15
 2523              		.global	usb_lld_reset
 2524              		.thumb
 2525              		.thumb_func
 2527              	usb_lld_reset:
 2528              	.LFB141:
 955:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 956:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /**
 957:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @brief   USB low level reset routine.
 958:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 959:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] usbp      pointer to the @p USBDriver object
 960:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
 961:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @notapi
 962:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  */
 963:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** void usb_lld_reset(USBDriver *usbp) {
 2529              		.loc 2 963 0
 2530              		.cfi_startproc
 2531              		@ args = 0, pretend = 0, frame = 16
 2532              		@ frame_needed = 0, uses_anonymous_args = 0
 2533 0000 10B5     		push	{r4, lr}
 2534              		.cfi_def_cfa_offset 8
 2535              		.cfi_offset 4, -8
 2536              		.cfi_offset 14, -4
 2537 0002 84B0     		sub	sp, sp, #16
 2538              		.cfi_def_cfa_offset 24
 2539 0004 0190     		str	r0, [sp, #4]
 964:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   unsigned i;
 965:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   stm32_otg_t *otgp = usbp->otg;
 2540              		.loc 2 965 0
 2541 0006 019B     		ldr	r3, [sp, #4]
 2542 0008 DB6B     		ldr	r3, [r3, #60]
 2543 000a 0293     		str	r3, [sp, #8]
 966:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 967:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   /* Flush the Tx FIFO.*/
 968:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   otg_txfifo_flush(usbp, 0);
 2544              		.loc 2 968 0
 2545 000c 0198     		ldr	r0, [sp, #4]
 2546 000e 0021     		movs	r1, #0
 2547 0010 FFF7FEFF 		bl	otg_txfifo_flush
 969:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 970:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   /* All endpoints in NAK mode, interrupts cleared.*/
 971:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   for (i = 0; i <= usbp->otgparams->num_endpoints; i++) {
 2548              		.loc 2 971 0
 2549 0014 0023     		movs	r3, #0
 2550 0016 0393     		str	r3, [sp, #12]
 2551 0018 22E0     		b	.L128
 2552              	.L129:
 972:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otgp->ie[i].DIEPCTL = DIEPCTL_SNAK;
 2553              		.loc 2 972 0 discriminator 2
 2554 001a 029A     		ldr	r2, [sp, #8]
 2555 001c 039B     		ldr	r3, [sp, #12]
 2556 001e 4833     		adds	r3, r3, #72
 2557 0020 5B01     		lsls	r3, r3, #5
 2558 0022 1344     		add	r3, r3, r2
 2559 0024 4FF00062 		mov	r2, #134217728
 2560 0028 1A60     		str	r2, [r3]
 973:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otgp->oe[i].DOEPCTL = DOEPCTL_SNAK;
 2561              		.loc 2 973 0 discriminator 2
 2562 002a 029A     		ldr	r2, [sp, #8]
 2563 002c 039B     		ldr	r3, [sp, #12]
 2564 002e 5833     		adds	r3, r3, #88
 2565 0030 5B01     		lsls	r3, r3, #5
 2566 0032 1344     		add	r3, r3, r2
 2567 0034 4FF00062 		mov	r2, #134217728
 2568 0038 1A60     		str	r2, [r3]
 974:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otgp->ie[i].DIEPINT = 0xFF;
 2569              		.loc 2 974 0 discriminator 2
 2570 003a 029A     		ldr	r2, [sp, #8]
 2571 003c 039B     		ldr	r3, [sp, #12]
 2572 003e 5B01     		lsls	r3, r3, #5
 2573 0040 1344     		add	r3, r3, r2
 2574 0042 03F60813 		addw	r3, r3, #2312
 2575 0046 FF22     		movs	r2, #255
 2576 0048 1A60     		str	r2, [r3]
 975:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otgp->oe[i].DOEPINT = 0xFF;
 2577              		.loc 2 975 0 discriminator 2
 2578 004a 029A     		ldr	r2, [sp, #8]
 2579 004c 039B     		ldr	r3, [sp, #12]
 2580 004e 5B01     		lsls	r3, r3, #5
 2581 0050 1344     		add	r3, r3, r2
 2582 0052 03F60833 		addw	r3, r3, #2824
 2583 0056 FF22     		movs	r2, #255
 2584 0058 1A60     		str	r2, [r3]
 971:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otgp->ie[i].DIEPCTL = DIEPCTL_SNAK;
 2585              		.loc 2 971 0 discriminator 2
 2586 005a 039B     		ldr	r3, [sp, #12]
 2587 005c 0133     		adds	r3, r3, #1
 2588 005e 0393     		str	r3, [sp, #12]
 2589              	.L128:
 971:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otgp->ie[i].DIEPCTL = DIEPCTL_SNAK;
 2590              		.loc 2 971 0 is_stmt 0 discriminator 1
 2591 0060 019B     		ldr	r3, [sp, #4]
 2592 0062 1B6C     		ldr	r3, [r3, #64]
 2593 0064 9A68     		ldr	r2, [r3, #8]
 2594 0066 039B     		ldr	r3, [sp, #12]
 2595 0068 9A42     		cmp	r2, r3
 2596 006a D6D2     		bcs	.L129
 976:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   }
 977:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 978:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   /* Endpoint interrupts all disabled and cleared.*/
 979:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   otgp->DAINT = 0xFFFFFFFF;
 2597              		.loc 2 979 0 is_stmt 1
 2598 006c 029B     		ldr	r3, [sp, #8]
 2599 006e 4FF0FF32 		mov	r2, #-1
 2600 0072 C3F81828 		str	r2, [r3, #2072]
 980:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   otgp->DAINTMSK = DAINTMSK_OEPM(0) | DAINTMSK_IEPM(0);
 2601              		.loc 2 980 0
 2602 0076 029B     		ldr	r3, [sp, #8]
 2603 0078 4FF00112 		mov	r2, #65537
 2604 007c C3F81C28 		str	r2, [r3, #2076]
 981:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 982:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   /* Resets the FIFO memory allocator.*/
 983:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   otg_ram_reset(usbp);
 2605              		.loc 2 983 0
 2606 0080 0198     		ldr	r0, [sp, #4]
 2607 0082 FFF7FEFF 		bl	otg_ram_reset
 984:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 985:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   /* Receive FIFO size initialization, the address is always zero.*/
 986:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   otgp->GRXFSIZ = usbp->otgparams->rx_fifo_size;
 2608              		.loc 2 986 0
 2609 0086 019B     		ldr	r3, [sp, #4]
 2610 0088 1B6C     		ldr	r3, [r3, #64]
 2611 008a 1A68     		ldr	r2, [r3]
 2612 008c 029B     		ldr	r3, [sp, #8]
 2613 008e 5A62     		str	r2, [r3, #36]
 987:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   otg_rxfifo_flush(usbp);
 2614              		.loc 2 987 0
 2615 0090 0198     		ldr	r0, [sp, #4]
 2616 0092 FFF7FEFF 		bl	otg_rxfifo_flush
 988:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 989:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   /* Resets the device address to zero.*/
 990:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   otgp->DCFG = (otgp->DCFG & ~DCFG_DAD_MASK) | DCFG_DAD(0);
 2617              		.loc 2 990 0
 2618 0096 029B     		ldr	r3, [sp, #8]
 2619 0098 D3F80038 		ldr	r3, [r3, #2048]
 2620 009c 23F4FE62 		bic	r2, r3, #2032
 2621 00a0 029B     		ldr	r3, [sp, #8]
 2622 00a2 C3F80028 		str	r2, [r3, #2048]
 991:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 992:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   /* Enables also EP-related interrupt sources.*/
 993:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   otgp->GINTMSK  |= GINTMSK_RXFLVLM | GINTMSK_OEPM  | GINTMSK_IEPM;
 2623              		.loc 2 993 0
 2624 00a6 029B     		ldr	r3, [sp, #8]
 2625 00a8 9B69     		ldr	r3, [r3, #24]
 2626 00aa 43F44023 		orr	r3, r3, #786432
 2627 00ae 43F01003 		orr	r3, r3, #16
 2628 00b2 029A     		ldr	r2, [sp, #8]
 2629 00b4 9361     		str	r3, [r2, #24]
 994:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   otgp->DIEPMSK   = DIEPMSK_TOCM    | DIEPMSK_XFRCM;
 2630              		.loc 2 994 0
 2631 00b6 029B     		ldr	r3, [sp, #8]
 2632 00b8 0922     		movs	r2, #9
 2633 00ba C3F81028 		str	r2, [r3, #2064]
 995:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   otgp->DOEPMSK   = DOEPMSK_STUPM   | DOEPMSK_XFRCM;
 2634              		.loc 2 995 0
 2635 00be 029B     		ldr	r3, [sp, #8]
 2636 00c0 0922     		movs	r2, #9
 2637 00c2 C3F81428 		str	r2, [r3, #2068]
 996:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
 997:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   /* EP0 initialization, it is a special case.*/
 998:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   usbp->epc[0] = &ep0config;
 2638              		.loc 2 998 0
 2639 00c6 019B     		ldr	r3, [sp, #4]
 2640 00c8 164A     		ldr	r2, .L130
 2641 00ca 1A61     		str	r2, [r3, #16]
 999:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   otgp->oe[0].DOEPTSIZ = 0;
 2642              		.loc 2 999 0
 2643 00cc 029B     		ldr	r3, [sp, #8]
 2644 00ce 0022     		movs	r2, #0
 2645 00d0 C3F8102B 		str	r2, [r3, #2832]
1000:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   otgp->oe[0].DOEPCTL = DOEPCTL_SD0PID | DOEPCTL_USBAEP | DOEPCTL_EPTYP_CTRL |
1001:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                         DOEPCTL_MPSIZ(ep0config.out_maxsize);
 2646              		.loc 2 1001 0
 2647 00d4 4023     		movs	r3, #64
1000:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   otgp->oe[0].DOEPCTL = DOEPCTL_SD0PID | DOEPCTL_USBAEP | DOEPCTL_EPTYP_CTRL |
 2648              		.loc 2 1000 0
 2649 00d6 43F08053 		orr	r3, r3, #268435456
 2650 00da 43F40043 		orr	r3, r3, #32768
 2651 00de 029A     		ldr	r2, [sp, #8]
 2652 00e0 C2F8003B 		str	r3, [r2, #2816]
1002:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   otgp->ie[0].DIEPTSIZ = 0;
 2653              		.loc 2 1002 0
 2654 00e4 029B     		ldr	r3, [sp, #8]
 2655 00e6 0022     		movs	r2, #0
 2656 00e8 C3F81029 		str	r2, [r3, #2320]
1003:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   otgp->ie[0].DIEPCTL = DIEPCTL_SD0PID | DIEPCTL_USBAEP | DIEPCTL_EPTYP_CTRL |
1004:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                         DIEPCTL_TXFNUM(0) | DIEPCTL_MPSIZ(ep0config.in_maxsize);
 2657              		.loc 2 1004 0
 2658 00ec 4023     		movs	r3, #64
 2659 00ee 43F08053 		orr	r3, r3, #268435456
 2660 00f2 43F40043 		orr	r3, r3, #32768
1003:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   otgp->ie[0].DIEPCTL = DIEPCTL_SD0PID | DIEPCTL_USBAEP | DIEPCTL_EPTYP_CTRL |
 2661              		.loc 2 1003 0
 2662 00f6 029A     		ldr	r2, [sp, #8]
 2663 00f8 C2F80039 		str	r3, [r2, #2304]
1005:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   otgp->DIEPTXF0 = DIEPTXF_INEPTXFD(ep0config.in_maxsize / 4) |
 2664              		.loc 2 1005 0
 2665 00fc 4023     		movs	r3, #64
 2666 00fe 9B08     		lsrs	r3, r3, #2
 2667 0100 9BB2     		uxth	r3, r3
 2668 0102 1B04     		lsls	r3, r3, #16
 2669 0104 1C46     		mov	r4, r3
1006:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                    DIEPTXF_INEPTXSA(otg_ram_alloc(usbp,
 2670              		.loc 2 1006 0
 2671 0106 4023     		movs	r3, #64
 2672 0108 9B08     		lsrs	r3, r3, #2
 2673 010a 9BB2     		uxth	r3, r3
 2674 010c 0198     		ldr	r0, [sp, #4]
 2675 010e 1946     		mov	r1, r3
 2676 0110 FFF7FEFF 		bl	otg_ram_alloc
 2677 0114 0346     		mov	r3, r0
1005:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   otgp->DIEPTXF0 = DIEPTXF_INEPTXFD(ep0config.in_maxsize / 4) |
 2678              		.loc 2 1005 0
 2679 0116 44EA0302 		orr	r2, r4, r3
 2680 011a 029B     		ldr	r3, [sp, #8]
 2681 011c 9A62     		str	r2, [r3, #40]
1007:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                                                   ep0config.in_maxsize / 4));
1008:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 2682              		.loc 2 1008 0
 2683 011e 04B0     		add	sp, sp, #16
 2684              		@ sp needed
 2685 0120 10BD     		pop	{r4, pc}
 2686              	.L131:
 2687 0122 00BF     		.align	2
 2688              	.L130:
 2689 0124 00000000 		.word	ep0config
 2690              		.cfi_endproc
 2691              	.LFE141:
 2693 0128 AFF30080 		.section	.text.usb_lld_set_address,"ax",%progbits
 2693      AFF30080 
 2694              		.align	2
 2695              		.p2align 4,,15
 2696              		.global	usb_lld_set_address
 2697              		.thumb
 2698              		.thumb_func
 2700              	usb_lld_set_address:
 2701              	.LFB142:
1009:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
1010:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /**
1011:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @brief   Sets the USB address.
1012:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
1013:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] usbp      pointer to the @p USBDriver object
1014:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
1015:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @notapi
1016:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  */
1017:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** void usb_lld_set_address(USBDriver *usbp) {
 2702              		.loc 2 1017 0
 2703              		.cfi_startproc
 2704              		@ args = 0, pretend = 0, frame = 16
 2705              		@ frame_needed = 0, uses_anonymous_args = 0
 2706              		@ link register save eliminated.
 2707 0000 84B0     		sub	sp, sp, #16
 2708              		.cfi_def_cfa_offset 16
 2709 0002 0190     		str	r0, [sp, #4]
1018:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   stm32_otg_t *otgp = usbp->otg;
 2710              		.loc 2 1018 0
 2711 0004 019B     		ldr	r3, [sp, #4]
 2712 0006 DB6B     		ldr	r3, [r3, #60]
 2713 0008 0393     		str	r3, [sp, #12]
1019:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
1020:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   otgp->DCFG = (otgp->DCFG & ~DCFG_DAD_MASK) | DCFG_DAD(usbp->address);
 2714              		.loc 2 1020 0
 2715 000a 039B     		ldr	r3, [sp, #12]
 2716 000c D3F80038 		ldr	r3, [r3, #2048]
 2717 0010 23F4FE62 		bic	r2, r3, #2032
 2718 0014 019B     		ldr	r3, [sp, #4]
 2719 0016 93F83A30 		ldrb	r3, [r3, #58]	@ zero_extendqisi2
 2720 001a 1B01     		lsls	r3, r3, #4
 2721 001c 1A43     		orrs	r2, r2, r3
 2722 001e 039B     		ldr	r3, [sp, #12]
 2723 0020 C3F80028 		str	r2, [r3, #2048]
1021:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 2724              		.loc 2 1021 0
 2725 0024 04B0     		add	sp, sp, #16
 2726              		@ sp needed
 2727 0026 7047     		bx	lr
 2728              		.cfi_endproc
 2729              	.LFE142:
 2731 0028 AFF30080 		.section	.text.usb_lld_init_endpoint,"ax",%progbits
 2731      AFF30080 
 2732              		.align	2
 2733              		.p2align 4,,15
 2734              		.global	usb_lld_init_endpoint
 2735              		.thumb
 2736              		.thumb_func
 2738              	usb_lld_init_endpoint:
 2739              	.LFB143:
1022:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
1023:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /**
1024:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @brief   Enables an endpoint.
1025:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
1026:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] usbp      pointer to the @p USBDriver object
1027:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] ep        endpoint number
1028:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
1029:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @notapi
1030:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  */
1031:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** void usb_lld_init_endpoint(USBDriver *usbp, usbep_t ep) {
 2740              		.loc 2 1031 0
 2741              		.cfi_startproc
 2742              		@ args = 0, pretend = 0, frame = 24
 2743              		@ frame_needed = 0, uses_anonymous_args = 0
 2744 0000 30B5     		push	{r4, r5, lr}
 2745              		.cfi_def_cfa_offset 12
 2746              		.cfi_offset 4, -12
 2747              		.cfi_offset 5, -8
 2748              		.cfi_offset 14, -4
 2749 0002 87B0     		sub	sp, sp, #28
 2750              		.cfi_def_cfa_offset 40
 2751 0004 0190     		str	r0, [sp, #4]
 2752 0006 0B46     		mov	r3, r1
 2753 0008 8DF80330 		strb	r3, [sp, #3]
1032:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   uint32_t ctl, fsize;
1033:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   stm32_otg_t *otgp = usbp->otg;
 2754              		.loc 2 1033 0
 2755 000c 019B     		ldr	r3, [sp, #4]
 2756 000e DB6B     		ldr	r3, [r3, #60]
 2757 0010 0393     		str	r3, [sp, #12]
1034:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
1035:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   /* IN and OUT common parameters.*/
1036:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   switch (usbp->epc[ep]->ep_mode & USB_EP_MODE_TYPE) {
 2758              		.loc 2 1036 0
 2759 0012 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 2760 0016 019B     		ldr	r3, [sp, #4]
 2761 0018 0432     		adds	r2, r2, #4
 2762 001a 53F82230 		ldr	r3, [r3, r2, lsl #2]
 2763 001e 1B68     		ldr	r3, [r3]
 2764 0020 03F00303 		and	r3, r3, #3
 2765 0024 032B     		cmp	r3, #3
 2766 0026 00F2FE80 		bhi	.L146
 2767 002a 01A2     		adr	r2, .L136
 2768 002c 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 2769              		.p2align 2
 2770              	.L136:
 2771 0030 41000000 		.word	.L135+1
 2772 0034 47000000 		.word	.L137+1
 2773 0038 4D000000 		.word	.L138+1
 2774 003c 53000000 		.word	.L139+1
 2775              		.p2align 1
 2776              	.L135:
1037:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   case USB_EP_MODE_TYPE_CTRL:
1038:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     ctl = DIEPCTL_SD0PID | DIEPCTL_USBAEP | DIEPCTL_EPTYP_CTRL;
 2777              		.loc 2 1038 0
 2778 0040 7A4B     		ldr	r3, .L147
 2779 0042 0593     		str	r3, [sp, #20]
1039:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     break;
 2780              		.loc 2 1039 0
 2781 0044 08E0     		b	.L140
 2782              	.L137:
1040:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   case USB_EP_MODE_TYPE_ISOC:
1041:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     ctl = DIEPCTL_SD0PID | DIEPCTL_USBAEP | DIEPCTL_EPTYP_ISO;
 2783              		.loc 2 1041 0
 2784 0046 7A4B     		ldr	r3, .L147+4
 2785 0048 0593     		str	r3, [sp, #20]
1042:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     break;
 2786              		.loc 2 1042 0
 2787 004a 05E0     		b	.L140
 2788              	.L138:
1043:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   case USB_EP_MODE_TYPE_BULK:
1044:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     ctl = DIEPCTL_SD0PID | DIEPCTL_USBAEP | DIEPCTL_EPTYP_BULK;
 2789              		.loc 2 1044 0
 2790 004c 794B     		ldr	r3, .L147+8
 2791 004e 0593     		str	r3, [sp, #20]
1045:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     break;
 2792              		.loc 2 1045 0
 2793 0050 02E0     		b	.L140
 2794              	.L139:
1046:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   case USB_EP_MODE_TYPE_INTR:
1047:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     ctl = DIEPCTL_SD0PID | DIEPCTL_USBAEP | DIEPCTL_EPTYP_INTR;
 2795              		.loc 2 1047 0
 2796 0052 794B     		ldr	r3, .L147+12
 2797 0054 0593     		str	r3, [sp, #20]
1048:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     break;
 2798              		.loc 2 1048 0
 2799 0056 00BF     		nop
 2800              	.L140:
1049:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   default:
1050:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     return;
1051:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   }
1052:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
1053:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   /* OUT endpoint activation or deactivation.*/
1054:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   otgp->oe[ep].DOEPTSIZ = 0;
 2801              		.loc 2 1054 0
 2802 0058 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 2803 005c 039A     		ldr	r2, [sp, #12]
 2804 005e 5B01     		lsls	r3, r3, #5
 2805 0060 1344     		add	r3, r3, r2
 2806 0062 03F53163 		add	r3, r3, #2832
 2807 0066 0022     		movs	r2, #0
 2808 0068 1A60     		str	r2, [r3]
1055:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   if (usbp->epc[ep]->out_cb != NULL) {
 2809              		.loc 2 1055 0
 2810 006a 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 2811 006e 019B     		ldr	r3, [sp, #4]
 2812 0070 0432     		adds	r2, r2, #4
 2813 0072 53F82230 		ldr	r3, [r3, r2, lsl #2]
 2814 0076 DB68     		ldr	r3, [r3, #12]
 2815 0078 002B     		cmp	r3, #0
 2816 007a 1ED0     		beq	.L142
1056:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otgp->oe[ep].DOEPCTL = ctl | DOEPCTL_MPSIZ(usbp->epc[ep]->out_maxsize);
 2817              		.loc 2 1056 0
 2818 007c 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 2819 0080 9DF80310 		ldrb	r1, [sp, #3]	@ zero_extendqisi2
 2820 0084 019A     		ldr	r2, [sp, #4]
 2821 0086 0431     		adds	r1, r1, #4
 2822 0088 52F82120 		ldr	r2, [r2, r1, lsl #2]
 2823 008c 528A     		ldrh	r2, [r2, #18]
 2824 008e 1146     		mov	r1, r2
 2825 0090 059A     		ldr	r2, [sp, #20]
 2826 0092 0A43     		orrs	r2, r2, r1
 2827 0094 0399     		ldr	r1, [sp, #12]
 2828 0096 5833     		adds	r3, r3, #88
 2829 0098 5B01     		lsls	r3, r3, #5
 2830 009a 0B44     		add	r3, r3, r1
 2831 009c 1A60     		str	r2, [r3]
1057:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otgp->DAINTMSK |= DAINTMSK_OEPM(ep);
 2832              		.loc 2 1057 0
 2833 009e 039B     		ldr	r3, [sp, #12]
 2834 00a0 D3F81C28 		ldr	r2, [r3, #2076]
 2835 00a4 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 2836 00a8 1033     		adds	r3, r3, #16
 2837 00aa 0121     		movs	r1, #1
 2838 00ac 01FA03F3 		lsl	r3, r1, r3
 2839 00b0 1A43     		orrs	r2, r2, r3
 2840 00b2 039B     		ldr	r3, [sp, #12]
 2841 00b4 C3F81C28 		str	r2, [r3, #2076]
 2842 00b8 1DE0     		b	.L143
 2843              	.L142:
1058:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   }
1059:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   else {
1060:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otgp->oe[ep].DOEPCTL &= ~DOEPCTL_USBAEP;
 2844              		.loc 2 1060 0
 2845 00ba 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 2846 00be 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 2847 00c2 0399     		ldr	r1, [sp, #12]
 2848 00c4 5832     		adds	r2, r2, #88
 2849 00c6 5201     		lsls	r2, r2, #5
 2850 00c8 0A44     		add	r2, r2, r1
 2851 00ca 1268     		ldr	r2, [r2]
 2852 00cc 22F40042 		bic	r2, r2, #32768
 2853 00d0 0399     		ldr	r1, [sp, #12]
 2854 00d2 5833     		adds	r3, r3, #88
 2855 00d4 5B01     		lsls	r3, r3, #5
 2856 00d6 0B44     		add	r3, r3, r1
 2857 00d8 1A60     		str	r2, [r3]
1061:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otgp->DAINTMSK &= ~DAINTMSK_OEPM(ep);
 2858              		.loc 2 1061 0
 2859 00da 039B     		ldr	r3, [sp, #12]
 2860 00dc D3F81C28 		ldr	r2, [r3, #2076]
 2861 00e0 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 2862 00e4 1033     		adds	r3, r3, #16
 2863 00e6 0121     		movs	r1, #1
 2864 00e8 01FA03F3 		lsl	r3, r1, r3
 2865 00ec DB43     		mvns	r3, r3
 2866 00ee 1A40     		ands	r2, r2, r3
 2867 00f0 039B     		ldr	r3, [sp, #12]
 2868 00f2 C3F81C28 		str	r2, [r3, #2076]
 2869              	.L143:
1062:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   }
1063:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
1064:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   /* IN endpoint activation or deactivation.*/
1065:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   otgp->ie[ep].DIEPTSIZ = 0;
 2870              		.loc 2 1065 0
 2871 00f6 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 2872 00fa 039A     		ldr	r2, [sp, #12]
 2873 00fc 5B01     		lsls	r3, r3, #5
 2874 00fe 1344     		add	r3, r3, r2
 2875 0100 03F51163 		add	r3, r3, #2320
 2876 0104 0022     		movs	r2, #0
 2877 0106 1A60     		str	r2, [r3]
1066:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   if (usbp->epc[ep]->in_cb != NULL) {
 2878              		.loc 2 1066 0
 2879 0108 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 2880 010c 019B     		ldr	r3, [sp, #4]
 2881 010e 0432     		adds	r2, r2, #4
 2882 0110 53F82230 		ldr	r3, [r3, r2, lsl #2]
 2883 0114 9B68     		ldr	r3, [r3, #8]
 2884 0116 002B     		cmp	r3, #0
 2885 0118 58D0     		beq	.L144
1067:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     /* FIFO allocation for the IN endpoint.*/
1068:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     fsize = usbp->epc[ep]->in_maxsize / 4;
 2886              		.loc 2 1068 0
 2887 011a 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 2888 011e 019B     		ldr	r3, [sp, #4]
 2889 0120 0432     		adds	r2, r2, #4
 2890 0122 53F82230 		ldr	r3, [r3, r2, lsl #2]
 2891 0126 1B8A     		ldrh	r3, [r3, #16]
 2892 0128 9B08     		lsrs	r3, r3, #2
 2893 012a 9BB2     		uxth	r3, r3
 2894 012c 0493     		str	r3, [sp, #16]
1069:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     if (usbp->epc[ep]->in_multiplier > 1)
 2895              		.loc 2 1069 0
 2896 012e 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 2897 0132 019B     		ldr	r3, [sp, #4]
 2898 0134 0432     		adds	r2, r2, #4
 2899 0136 53F82230 		ldr	r3, [r3, r2, lsl #2]
 2900 013a 9B8B     		ldrh	r3, [r3, #28]
 2901 013c 012B     		cmp	r3, #1
 2902 013e 0BD9     		bls	.L145
1070:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****       fsize *= usbp->epc[ep]->in_multiplier;
 2903              		.loc 2 1070 0
 2904 0140 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 2905 0144 019B     		ldr	r3, [sp, #4]
 2906 0146 0432     		adds	r2, r2, #4
 2907 0148 53F82230 		ldr	r3, [r3, r2, lsl #2]
 2908 014c 9B8B     		ldrh	r3, [r3, #28]
 2909 014e 1A46     		mov	r2, r3
 2910 0150 049B     		ldr	r3, [sp, #16]
 2911 0152 02FB03F3 		mul	r3, r2, r3
 2912 0156 0493     		str	r3, [sp, #16]
 2913              	.L145:
1071:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otgp->DIEPTXF[ep - 1] = DIEPTXF_INEPTXFD(fsize) |
 2914              		.loc 2 1071 0
 2915 0158 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 2916 015c 5C1E     		subs	r4, r3, #1
 2917 015e 049B     		ldr	r3, [sp, #16]
 2918 0160 1D04     		lsls	r5, r3, #16
1072:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                             DIEPTXF_INEPTXSA(otg_ram_alloc(usbp, fsize));
 2919              		.loc 2 1072 0
 2920 0162 0198     		ldr	r0, [sp, #4]
 2921 0164 0499     		ldr	r1, [sp, #16]
 2922 0166 FFF7FEFF 		bl	otg_ram_alloc
 2923 016a 0346     		mov	r3, r0
1071:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otgp->DIEPTXF[ep - 1] = DIEPTXF_INEPTXFD(fsize) |
 2924              		.loc 2 1071 0
 2925 016c 45EA0302 		orr	r2, r5, r3
 2926 0170 0399     		ldr	r1, [sp, #12]
 2927 0172 04F14003 		add	r3, r4, #64
 2928 0176 9B00     		lsls	r3, r3, #2
 2929 0178 0B44     		add	r3, r3, r1
 2930 017a 5A60     		str	r2, [r3, #4]
1073:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otg_txfifo_flush(usbp, ep);
 2931              		.loc 2 1073 0
 2932 017c 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 2933 0180 0198     		ldr	r0, [sp, #4]
 2934 0182 1946     		mov	r1, r3
 2935 0184 FFF7FEFF 		bl	otg_txfifo_flush
1074:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
1075:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otgp->ie[ep].DIEPCTL = ctl |
 2936              		.loc 2 1075 0
 2937 0188 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
1076:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                            DIEPCTL_TXFNUM(ep) |
 2938              		.loc 2 1076 0
 2939 018c 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 2940 0190 9205     		lsls	r2, r2, #22
1075:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                            DIEPCTL_TXFNUM(ep) |
 2941              		.loc 2 1075 0
 2942 0192 1146     		mov	r1, r2
 2943 0194 059A     		ldr	r2, [sp, #20]
 2944 0196 1143     		orrs	r1, r1, r2
1077:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                            DIEPCTL_MPSIZ(usbp->epc[ep]->in_maxsize);
 2945              		.loc 2 1077 0
 2946 0198 9DF80300 		ldrb	r0, [sp, #3]	@ zero_extendqisi2
 2947 019c 019A     		ldr	r2, [sp, #4]
 2948 019e 0430     		adds	r0, r0, #4
 2949 01a0 52F82020 		ldr	r2, [r2, r0, lsl #2]
 2950 01a4 128A     		ldrh	r2, [r2, #16]
1076:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                            DIEPCTL_TXFNUM(ep) |
 2951              		.loc 2 1076 0
 2952 01a6 0A43     		orrs	r2, r2, r1
1075:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                            DIEPCTL_TXFNUM(ep) |
 2953              		.loc 2 1075 0
 2954 01a8 0399     		ldr	r1, [sp, #12]
 2955 01aa 4833     		adds	r3, r3, #72
 2956 01ac 5B01     		lsls	r3, r3, #5
 2957 01ae 0B44     		add	r3, r3, r1
 2958 01b0 1A60     		str	r2, [r3]
1078:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otgp->DAINTMSK |= DAINTMSK_IEPM(ep);
 2959              		.loc 2 1078 0
 2960 01b2 039B     		ldr	r3, [sp, #12]
 2961 01b4 D3F81C28 		ldr	r2, [r3, #2076]
 2962 01b8 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 2963 01bc 0121     		movs	r1, #1
 2964 01be 01FA03F3 		lsl	r3, r1, r3
 2965 01c2 1A43     		orrs	r2, r2, r3
 2966 01c4 039B     		ldr	r3, [sp, #12]
 2967 01c6 C3F81C28 		str	r2, [r3, #2076]
 2968 01ca 2DE0     		b	.L133
 2969              	.L144:
1079:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   }
1080:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   else {
1081:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otgp->DIEPTXF[ep - 1] = 0x02000400; /* Reset value.*/
 2970              		.loc 2 1081 0
 2971 01cc 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 2972 01d0 013B     		subs	r3, r3, #1
 2973 01d2 039A     		ldr	r2, [sp, #12]
 2974 01d4 4033     		adds	r3, r3, #64
 2975 01d6 9B00     		lsls	r3, r3, #2
 2976 01d8 1344     		add	r3, r3, r2
 2977 01da 184A     		ldr	r2, .L147+16
 2978 01dc 5A60     		str	r2, [r3, #4]
1082:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otg_txfifo_flush(usbp, ep);
 2979              		.loc 2 1082 0
 2980 01de 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 2981 01e2 0198     		ldr	r0, [sp, #4]
 2982 01e4 1946     		mov	r1, r3
 2983 01e6 FFF7FEFF 		bl	otg_txfifo_flush
1083:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otgp->ie[ep].DIEPCTL &= ~DIEPCTL_USBAEP;
 2984              		.loc 2 1083 0
 2985 01ea 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 2986 01ee 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 2987 01f2 0399     		ldr	r1, [sp, #12]
 2988 01f4 4832     		adds	r2, r2, #72
 2989 01f6 5201     		lsls	r2, r2, #5
 2990 01f8 0A44     		add	r2, r2, r1
 2991 01fa 1268     		ldr	r2, [r2]
 2992 01fc 22F40042 		bic	r2, r2, #32768
 2993 0200 0399     		ldr	r1, [sp, #12]
 2994 0202 4833     		adds	r3, r3, #72
 2995 0204 5B01     		lsls	r3, r3, #5
 2996 0206 0B44     		add	r3, r3, r1
 2997 0208 1A60     		str	r2, [r3]
1084:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     otgp->DAINTMSK &= ~DAINTMSK_IEPM(ep);
 2998              		.loc 2 1084 0
 2999 020a 039B     		ldr	r3, [sp, #12]
 3000 020c D3F81C28 		ldr	r2, [r3, #2076]
 3001 0210 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 3002 0214 0121     		movs	r1, #1
 3003 0216 01FA03F3 		lsl	r3, r1, r3
 3004 021a DB43     		mvns	r3, r3
 3005 021c 1A40     		ands	r2, r2, r3
 3006 021e 039B     		ldr	r3, [sp, #12]
 3007 0220 C3F81C28 		str	r2, [r3, #2076]
 3008 0224 00E0     		b	.L133
 3009              	.L146:
1050:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   }
 3010              		.loc 2 1050 0
 3011 0226 00BF     		nop
 3012              	.L133:
1085:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   }
1086:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 3013              		.loc 2 1086 0
 3014 0228 07B0     		add	sp, sp, #28
 3015              		@ sp needed
 3016 022a 30BD     		pop	{r4, r5, pc}
 3017              	.L148:
 3018              		.align	2
 3019              	.L147:
 3020 022c 00800010 		.word	268468224
 3021 0230 00800410 		.word	268730368
 3022 0234 00800810 		.word	268992512
 3023 0238 00800C10 		.word	269254656
 3024 023c 00040002 		.word	33555456
 3025              		.cfi_endproc
 3026              	.LFE143:
 3028              		.section	.text.usb_lld_disable_endpoints,"ax",%progbits
 3029              		.align	2
 3030              		.p2align 4,,15
 3031              		.global	usb_lld_disable_endpoints
 3032              		.thumb
 3033              		.thumb_func
 3035              	usb_lld_disable_endpoints:
 3036              	.LFB144:
1087:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
1088:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /**
1089:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @brief   Disables all the active endpoints except the endpoint zero.
1090:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
1091:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] usbp      pointer to the @p USBDriver object
1092:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
1093:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @notapi
1094:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  */
1095:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** void usb_lld_disable_endpoints(USBDriver *usbp) {
 3037              		.loc 2 1095 0
 3038              		.cfi_startproc
 3039              		@ args = 0, pretend = 0, frame = 8
 3040              		@ frame_needed = 0, uses_anonymous_args = 0
 3041 0000 00B5     		push	{lr}
 3042              		.cfi_def_cfa_offset 4
 3043              		.cfi_offset 14, -4
 3044 0002 83B0     		sub	sp, sp, #12
 3045              		.cfi_def_cfa_offset 16
 3046 0004 0190     		str	r0, [sp, #4]
1096:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
1097:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   /* Resets the FIFO memory allocator.*/
1098:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   otg_ram_reset(usbp);
 3047              		.loc 2 1098 0
 3048 0006 0198     		ldr	r0, [sp, #4]
 3049 0008 FFF7FEFF 		bl	otg_ram_reset
1099:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
1100:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   /* Disabling all endpoints.*/
1101:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   otg_disable_ep(usbp);
 3050              		.loc 2 1101 0
 3051 000c 0198     		ldr	r0, [sp, #4]
 3052 000e FFF7FEFF 		bl	otg_disable_ep
1102:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 3053              		.loc 2 1102 0
 3054 0012 03B0     		add	sp, sp, #12
 3055              		@ sp needed
 3056 0014 5DF804FB 		ldr	pc, [sp], #4
 3057              		.cfi_endproc
 3058              	.LFE144:
 3060 0018 AFF30080 		.section	.text.usb_lld_get_status_out,"ax",%progbits
 3060      AFF30080 
 3061              		.align	2
 3062              		.p2align 4,,15
 3063              		.global	usb_lld_get_status_out
 3064              		.thumb
 3065              		.thumb_func
 3067              	usb_lld_get_status_out:
 3068              	.LFB145:
1103:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
1104:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /**
1105:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @brief   Returns the status of an OUT endpoint.
1106:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
1107:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] usbp      pointer to the @p USBDriver object
1108:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] ep        endpoint number
1109:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @return              The endpoint status.
1110:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @retval EP_STATUS_DISABLED The endpoint is not active.
1111:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @retval EP_STATUS_STALLED  The endpoint is stalled.
1112:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @retval EP_STATUS_ACTIVE   The endpoint is active.
1113:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
1114:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @notapi
1115:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  */
1116:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** usbepstatus_t usb_lld_get_status_out(USBDriver *usbp, usbep_t ep) {
 3069              		.loc 2 1116 0
 3070              		.cfi_startproc
 3071              		@ args = 0, pretend = 0, frame = 16
 3072              		@ frame_needed = 0, uses_anonymous_args = 0
 3073              		@ link register save eliminated.
 3074 0000 84B0     		sub	sp, sp, #16
 3075              		.cfi_def_cfa_offset 16
 3076 0002 0190     		str	r0, [sp, #4]
 3077 0004 0B46     		mov	r3, r1
 3078 0006 8DF80330 		strb	r3, [sp, #3]
1117:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   uint32_t ctl;
1118:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
1119:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   (void)usbp;
1120:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
1121:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   ctl = usbp->otg->oe[ep].DOEPCTL;
 3079              		.loc 2 1121 0
 3080 000a 019B     		ldr	r3, [sp, #4]
 3081 000c DA6B     		ldr	r2, [r3, #60]
 3082 000e 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 3083 0012 5833     		adds	r3, r3, #88
 3084 0014 5B01     		lsls	r3, r3, #5
 3085 0016 1344     		add	r3, r3, r2
 3086 0018 1B68     		ldr	r3, [r3]
 3087 001a 0393     		str	r3, [sp, #12]
1122:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   if (!(ctl & DOEPCTL_USBAEP))
 3088              		.loc 2 1122 0
 3089 001c 039B     		ldr	r3, [sp, #12]
 3090 001e 03F40043 		and	r3, r3, #32768
 3091 0022 002B     		cmp	r3, #0
 3092 0024 01D1     		bne	.L151
1123:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     return EP_STATUS_DISABLED;
 3093              		.loc 2 1123 0
 3094 0026 0023     		movs	r3, #0
 3095 0028 07E0     		b	.L152
 3096              	.L151:
1124:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   if (ctl & DOEPCTL_STALL)
 3097              		.loc 2 1124 0
 3098 002a 039B     		ldr	r3, [sp, #12]
 3099 002c 03F40013 		and	r3, r3, #2097152
 3100 0030 002B     		cmp	r3, #0
 3101 0032 01D0     		beq	.L153
1125:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     return EP_STATUS_STALLED;
 3102              		.loc 2 1125 0
 3103 0034 0123     		movs	r3, #1
 3104 0036 00E0     		b	.L152
 3105              	.L153:
1126:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   return EP_STATUS_ACTIVE;
 3106              		.loc 2 1126 0
 3107 0038 0223     		movs	r3, #2
 3108              	.L152:
1127:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 3109              		.loc 2 1127 0
 3110 003a 1846     		mov	r0, r3
 3111 003c 04B0     		add	sp, sp, #16
 3112              		@ sp needed
 3113 003e 7047     		bx	lr
 3114              		.cfi_endproc
 3115              	.LFE145:
 3117              		.section	.text.usb_lld_get_status_in,"ax",%progbits
 3118              		.align	2
 3119              		.p2align 4,,15
 3120              		.global	usb_lld_get_status_in
 3121              		.thumb
 3122              		.thumb_func
 3124              	usb_lld_get_status_in:
 3125              	.LFB146:
1128:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
1129:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /**
1130:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @brief   Returns the status of an IN endpoint.
1131:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
1132:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] usbp      pointer to the @p USBDriver object
1133:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] ep        endpoint number
1134:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @return              The endpoint status.
1135:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @retval EP_STATUS_DISABLED The endpoint is not active.
1136:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @retval EP_STATUS_STALLED  The endpoint is stalled.
1137:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @retval EP_STATUS_ACTIVE   The endpoint is active.
1138:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
1139:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @notapi
1140:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  */
1141:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** usbepstatus_t usb_lld_get_status_in(USBDriver *usbp, usbep_t ep) {
 3126              		.loc 2 1141 0
 3127              		.cfi_startproc
 3128              		@ args = 0, pretend = 0, frame = 16
 3129              		@ frame_needed = 0, uses_anonymous_args = 0
 3130              		@ link register save eliminated.
 3131 0000 84B0     		sub	sp, sp, #16
 3132              		.cfi_def_cfa_offset 16
 3133 0002 0190     		str	r0, [sp, #4]
 3134 0004 0B46     		mov	r3, r1
 3135 0006 8DF80330 		strb	r3, [sp, #3]
1142:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   uint32_t ctl;
1143:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
1144:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   (void)usbp;
1145:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
1146:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   ctl = usbp->otg->ie[ep].DIEPCTL;
 3136              		.loc 2 1146 0
 3137 000a 019B     		ldr	r3, [sp, #4]
 3138 000c DA6B     		ldr	r2, [r3, #60]
 3139 000e 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 3140 0012 4833     		adds	r3, r3, #72
 3141 0014 5B01     		lsls	r3, r3, #5
 3142 0016 1344     		add	r3, r3, r2
 3143 0018 1B68     		ldr	r3, [r3]
 3144 001a 0393     		str	r3, [sp, #12]
1147:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   if (!(ctl & DIEPCTL_USBAEP))
 3145              		.loc 2 1147 0
 3146 001c 039B     		ldr	r3, [sp, #12]
 3147 001e 03F40043 		and	r3, r3, #32768
 3148 0022 002B     		cmp	r3, #0
 3149 0024 01D1     		bne	.L155
1148:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     return EP_STATUS_DISABLED;
 3150              		.loc 2 1148 0
 3151 0026 0023     		movs	r3, #0
 3152 0028 07E0     		b	.L156
 3153              	.L155:
1149:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   if (ctl & DIEPCTL_STALL)
 3154              		.loc 2 1149 0
 3155 002a 039B     		ldr	r3, [sp, #12]
 3156 002c 03F40013 		and	r3, r3, #2097152
 3157 0030 002B     		cmp	r3, #0
 3158 0032 01D0     		beq	.L157
1150:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     return EP_STATUS_STALLED;
 3159              		.loc 2 1150 0
 3160 0034 0123     		movs	r3, #1
 3161 0036 00E0     		b	.L156
 3162              	.L157:
1151:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   return EP_STATUS_ACTIVE;
 3163              		.loc 2 1151 0
 3164 0038 0223     		movs	r3, #2
 3165              	.L156:
1152:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 3166              		.loc 2 1152 0
 3167 003a 1846     		mov	r0, r3
 3168 003c 04B0     		add	sp, sp, #16
 3169              		@ sp needed
 3170 003e 7047     		bx	lr
 3171              		.cfi_endproc
 3172              	.LFE146:
 3174              		.section	.text.usb_lld_read_setup,"ax",%progbits
 3175              		.align	2
 3176              		.p2align 4,,15
 3177              		.global	usb_lld_read_setup
 3178              		.thumb
 3179              		.thumb_func
 3181              	usb_lld_read_setup:
 3182              	.LFB147:
1153:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
1154:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /**
1155:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @brief   Reads a setup packet from the dedicated packet buffer.
1156:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @details This function must be invoked in the context of the @p setup_cb
1157:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *          callback in order to read the received setup packet.
1158:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @pre     In order to use this function the endpoint must have been
1159:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *          initialized as a control endpoint.
1160:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @post    The endpoint is ready to accept another packet.
1161:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
1162:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] usbp      pointer to the @p USBDriver object
1163:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] ep        endpoint number
1164:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[out] buf      buffer where to copy the packet data
1165:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
1166:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @notapi
1167:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  */
1168:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** void usb_lld_read_setup(USBDriver *usbp, usbep_t ep, uint8_t *buf) {
 3183              		.loc 2 1168 0
 3184              		.cfi_startproc
 3185              		@ args = 0, pretend = 0, frame = 16
 3186              		@ frame_needed = 0, uses_anonymous_args = 0
 3187 0000 00B5     		push	{lr}
 3188              		.cfi_def_cfa_offset 4
 3189              		.cfi_offset 14, -4
 3190 0002 85B0     		sub	sp, sp, #20
 3191              		.cfi_def_cfa_offset 24
 3192 0004 0390     		str	r0, [sp, #12]
 3193 0006 0B46     		mov	r3, r1
 3194 0008 0192     		str	r2, [sp, #4]
 3195 000a 8DF80B30 		strb	r3, [sp, #11]
1169:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
1170:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   memcpy(buf, usbp->epc[ep]->setup_buf, 8);
 3196              		.loc 2 1170 0
 3197 000e 9DF80B20 		ldrb	r2, [sp, #11]	@ zero_extendqisi2
 3198 0012 039B     		ldr	r3, [sp, #12]
 3199 0014 0432     		adds	r2, r2, #4
 3200 0016 53F82230 		ldr	r3, [r3, r2, lsl #2]
 3201 001a 1B6A     		ldr	r3, [r3, #32]
 3202 001c 0198     		ldr	r0, [sp, #4]
 3203 001e 1946     		mov	r1, r3
 3204 0020 0822     		movs	r2, #8
 3205 0022 FFF7FEFF 		bl	memcpy
1171:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 3206              		.loc 2 1171 0
 3207 0026 05B0     		add	sp, sp, #20
 3208              		@ sp needed
 3209 0028 5DF804FB 		ldr	pc, [sp], #4
 3210              		.cfi_endproc
 3211              	.LFE147:
 3213 002c AFF30080 		.section	.text.usb_lld_prepare_receive,"ax",%progbits
 3214              		.align	2
 3215              		.p2align 4,,15
 3216              		.global	usb_lld_prepare_receive
 3217              		.thumb
 3218              		.thumb_func
 3220              	usb_lld_prepare_receive:
 3221              	.LFB148:
1172:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
1173:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /**
1174:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @brief   Prepares for a receive operation.
1175:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
1176:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] usbp      pointer to the @p USBDriver object
1177:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] ep        endpoint number
1178:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
1179:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @notapi
1180:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  */
1181:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** void usb_lld_prepare_receive(USBDriver *usbp, usbep_t ep) {
 3222              		.loc 2 1181 0
 3223              		.cfi_startproc
 3224              		@ args = 0, pretend = 0, frame = 16
 3225              		@ frame_needed = 0, uses_anonymous_args = 0
 3226              		@ link register save eliminated.
 3227 0000 10B4     		push	{r4}
 3228              		.cfi_def_cfa_offset 4
 3229              		.cfi_offset 4, -4
 3230 0002 85B0     		sub	sp, sp, #20
 3231              		.cfi_def_cfa_offset 24
 3232 0004 0190     		str	r0, [sp, #4]
 3233 0006 0B46     		mov	r3, r1
 3234 0008 8DF80330 		strb	r3, [sp, #3]
1182:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   uint32_t pcnt;
1183:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   USBOutEndpointState *osp = usbp->epc[ep]->out_state;
 3235              		.loc 2 1183 0
 3236 000c 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 3237 0010 019B     		ldr	r3, [sp, #4]
 3238 0012 0432     		adds	r2, r2, #4
 3239 0014 53F82230 		ldr	r3, [r3, r2, lsl #2]
 3240 0018 9B69     		ldr	r3, [r3, #24]
 3241 001a 0393     		str	r3, [sp, #12]
1184:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
1185:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   /* Transfer initialization.*/
1186:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   pcnt = (osp->rxsize + usbp->epc[ep]->out_maxsize - 1) /
 3242              		.loc 2 1186 0
 3243 001c 039B     		ldr	r3, [sp, #12]
 3244 001e 5A68     		ldr	r2, [r3, #4]
 3245 0020 9DF80310 		ldrb	r1, [sp, #3]	@ zero_extendqisi2
 3246 0024 019B     		ldr	r3, [sp, #4]
 3247 0026 0431     		adds	r1, r1, #4
 3248 0028 53F82130 		ldr	r3, [r3, r1, lsl #2]
 3249 002c 5B8A     		ldrh	r3, [r3, #18]
 3250 002e 1344     		add	r3, r3, r2
 3251 0030 5A1E     		subs	r2, r3, #1
1187:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****          usbp->epc[ep]->out_maxsize;
 3252              		.loc 2 1187 0
 3253 0032 9DF80310 		ldrb	r1, [sp, #3]	@ zero_extendqisi2
 3254 0036 019B     		ldr	r3, [sp, #4]
 3255 0038 0431     		adds	r1, r1, #4
 3256 003a 53F82130 		ldr	r3, [r3, r1, lsl #2]
 3257 003e 5B8A     		ldrh	r3, [r3, #18]
1186:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****          usbp->epc[ep]->out_maxsize;
 3258              		.loc 2 1186 0
 3259 0040 B2FBF3F3 		udiv	r3, r2, r3
 3260 0044 0293     		str	r3, [sp, #8]
1188:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   usbp->otg->oe[ep].DOEPTSIZ = DOEPTSIZ_STUPCNT(3) | DOEPTSIZ_PKTCNT(pcnt) |
 3261              		.loc 2 1188 0
 3262 0046 019B     		ldr	r3, [sp, #4]
 3263 0048 D96B     		ldr	r1, [r3, #60]
 3264 004a 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 3265 004e 029A     		ldr	r2, [sp, #8]
 3266 0050 D004     		lsls	r0, r2, #19
1189:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                                DOEPTSIZ_XFRSIZ(usbp->epc[ep]->out_maxsize);
 3267              		.loc 2 1189 0
 3268 0052 9DF80340 		ldrb	r4, [sp, #3]	@ zero_extendqisi2
 3269 0056 019A     		ldr	r2, [sp, #4]
 3270 0058 0434     		adds	r4, r4, #4
 3271 005a 52F82420 		ldr	r2, [r2, r4, lsl #2]
 3272 005e 528A     		ldrh	r2, [r2, #18]
1188:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   usbp->otg->oe[ep].DOEPTSIZ = DOEPTSIZ_STUPCNT(3) | DOEPTSIZ_PKTCNT(pcnt) |
 3273              		.loc 2 1188 0
 3274 0060 0243     		orrs	r2, r2, r0
 3275 0062 42F0C042 		orr	r2, r2, #1610612736
 3276 0066 5B01     		lsls	r3, r3, #5
 3277 0068 0B44     		add	r3, r3, r1
 3278 006a 03F53163 		add	r3, r3, #2832
 3279 006e 1A60     		str	r2, [r3]
1190:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
1191:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 3280              		.loc 2 1191 0
 3281 0070 05B0     		add	sp, sp, #20
 3282              		@ sp needed
 3283 0072 5DF8044B 		ldr	r4, [sp], #4
 3284 0076 7047     		bx	lr
 3285              		.cfi_endproc
 3286              	.LFE148:
 3288 0078 AFF30080 		.section	.text.usb_lld_prepare_transmit,"ax",%progbits
 3288      AFF30080 
 3289              		.align	2
 3290              		.p2align 4,,15
 3291              		.global	usb_lld_prepare_transmit
 3292              		.thumb
 3293              		.thumb_func
 3295              	usb_lld_prepare_transmit:
 3296              	.LFB149:
1192:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
1193:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /**
1194:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @brief   Prepares for a transmit operation.
1195:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
1196:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] usbp      pointer to the @p USBDriver object
1197:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] ep        endpoint number
1198:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
1199:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @notapi
1200:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  */
1201:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** void usb_lld_prepare_transmit(USBDriver *usbp, usbep_t ep) {
 3297              		.loc 2 1201 0
 3298              		.cfi_startproc
 3299              		@ args = 0, pretend = 0, frame = 16
 3300              		@ frame_needed = 0, uses_anonymous_args = 0
 3301              		@ link register save eliminated.
 3302 0000 10B4     		push	{r4}
 3303              		.cfi_def_cfa_offset 4
 3304              		.cfi_offset 4, -4
 3305 0002 85B0     		sub	sp, sp, #20
 3306              		.cfi_def_cfa_offset 24
 3307 0004 0190     		str	r0, [sp, #4]
 3308 0006 0B46     		mov	r3, r1
 3309 0008 8DF80330 		strb	r3, [sp, #3]
1202:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   USBInEndpointState *isp = usbp->epc[ep]->in_state;
 3310              		.loc 2 1202 0
 3311 000c 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 3312 0010 019B     		ldr	r3, [sp, #4]
 3313 0012 0432     		adds	r2, r2, #4
 3314 0014 53F82230 		ldr	r3, [r3, r2, lsl #2]
 3315 0018 5B69     		ldr	r3, [r3, #20]
 3316 001a 0393     		str	r3, [sp, #12]
1203:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
1204:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   /* Transfer initialization.*/
1205:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   if (isp->txsize == 0) {
 3317              		.loc 2 1205 0
 3318 001c 039B     		ldr	r3, [sp, #12]
 3319 001e 5B68     		ldr	r3, [r3, #4]
 3320 0020 002B     		cmp	r3, #0
 3321 0022 0BD1     		bne	.L161
1206:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     /* Special case, sending zero size packet.*/
1207:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     usbp->otg->ie[ep].DIEPTSIZ = DIEPTSIZ_PKTCNT(1) | DIEPTSIZ_XFRSIZ(0);
 3322              		.loc 2 1207 0
 3323 0024 019B     		ldr	r3, [sp, #4]
 3324 0026 DA6B     		ldr	r2, [r3, #60]
 3325 0028 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 3326 002c 5B01     		lsls	r3, r3, #5
 3327 002e 1344     		add	r3, r3, r2
 3328 0030 03F51163 		add	r3, r3, #2320
 3329 0034 4FF40022 		mov	r2, #524288
 3330 0038 1A60     		str	r2, [r3]
 3331 003a 28E0     		b	.L160
 3332              	.L161:
 3333              	.LBB27:
1208:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   }
1209:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   else {
1210:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     /* Normal case.*/
1211:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     uint32_t pcnt = (isp->txsize + usbp->epc[ep]->in_maxsize - 1) /
 3334              		.loc 2 1211 0
 3335 003c 039B     		ldr	r3, [sp, #12]
 3336 003e 5A68     		ldr	r2, [r3, #4]
 3337 0040 9DF80310 		ldrb	r1, [sp, #3]	@ zero_extendqisi2
 3338 0044 019B     		ldr	r3, [sp, #4]
 3339 0046 0431     		adds	r1, r1, #4
 3340 0048 53F82130 		ldr	r3, [r3, r1, lsl #2]
 3341 004c 1B8A     		ldrh	r3, [r3, #16]
 3342 004e 1344     		add	r3, r3, r2
 3343 0050 5A1E     		subs	r2, r3, #1
1212:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                     usbp->epc[ep]->in_maxsize;
 3344              		.loc 2 1212 0
 3345 0052 9DF80310 		ldrb	r1, [sp, #3]	@ zero_extendqisi2
 3346 0056 019B     		ldr	r3, [sp, #4]
 3347 0058 0431     		adds	r1, r1, #4
 3348 005a 53F82130 		ldr	r3, [r3, r1, lsl #2]
 3349 005e 1B8A     		ldrh	r3, [r3, #16]
1211:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                     usbp->epc[ep]->in_maxsize;
 3350              		.loc 2 1211 0
 3351 0060 B2FBF3F3 		udiv	r3, r2, r3
 3352 0064 0293     		str	r3, [sp, #8]
1213:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     usbp->otg->ie[ep].DIEPTSIZ = DIEPTSIZ_PKTCNT(pcnt) |
 3353              		.loc 2 1213 0
 3354 0066 019B     		ldr	r3, [sp, #4]
 3355 0068 D96B     		ldr	r1, [r3, #60]
 3356 006a 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 3357 006e 029A     		ldr	r2, [sp, #8]
 3358 0070 D004     		lsls	r0, r2, #19
1214:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****                                  DIEPTSIZ_XFRSIZ(usbp->epc[ep]->in_state->txsize);
 3359              		.loc 2 1214 0
 3360 0072 9DF80340 		ldrb	r4, [sp, #3]	@ zero_extendqisi2
 3361 0076 019A     		ldr	r2, [sp, #4]
 3362 0078 0434     		adds	r4, r4, #4
 3363 007a 52F82420 		ldr	r2, [r2, r4, lsl #2]
 3364 007e 5269     		ldr	r2, [r2, #20]
 3365 0080 5268     		ldr	r2, [r2, #4]
1213:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****     usbp->otg->ie[ep].DIEPTSIZ = DIEPTSIZ_PKTCNT(pcnt) |
 3366              		.loc 2 1213 0
 3367 0082 0243     		orrs	r2, r2, r0
 3368 0084 5B01     		lsls	r3, r3, #5
 3369 0086 0B44     		add	r3, r3, r1
 3370 0088 03F51163 		add	r3, r3, #2320
 3371 008c 1A60     		str	r2, [r3]
 3372              	.L160:
 3373              	.LBE27:
1215:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   }
1216:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
1217:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 3374              		.loc 2 1217 0
 3375 008e 05B0     		add	sp, sp, #20
 3376              		@ sp needed
 3377 0090 5DF8044B 		ldr	r4, [sp], #4
 3378 0094 7047     		bx	lr
 3379              		.cfi_endproc
 3380              	.LFE149:
 3382              		.section	.text.usb_lld_start_out,"ax",%progbits
 3383              		.align	2
 3384              		.p2align 4,,15
 3385              		.global	usb_lld_start_out
 3386              		.thumb
 3387              		.thumb_func
 3389              	usb_lld_start_out:
 3390              	.LFB150:
1218:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
1219:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /**
1220:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @brief   Starts a receive operation on an OUT endpoint.
1221:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
1222:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] usbp      pointer to the @p USBDriver object
1223:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] ep        endpoint number
1224:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
1225:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @notapi
1226:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  */
1227:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** void usb_lld_start_out(USBDriver *usbp, usbep_t ep) {
 3391              		.loc 2 1227 0
 3392              		.cfi_startproc
 3393              		@ args = 0, pretend = 0, frame = 8
 3394              		@ frame_needed = 0, uses_anonymous_args = 0
 3395              		@ link register save eliminated.
 3396 0000 82B0     		sub	sp, sp, #8
 3397              		.cfi_def_cfa_offset 8
 3398 0002 0190     		str	r0, [sp, #4]
 3399 0004 0B46     		mov	r3, r1
 3400 0006 8DF80330 		strb	r3, [sp, #3]
1228:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
1229:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   usbp->otg->oe[ep].DOEPCTL |= DOEPCTL_CNAK;
 3401              		.loc 2 1229 0
 3402 000a 019B     		ldr	r3, [sp, #4]
 3403 000c D96B     		ldr	r1, [r3, #60]
 3404 000e 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 3405 0012 019A     		ldr	r2, [sp, #4]
 3406 0014 D06B     		ldr	r0, [r2, #60]
 3407 0016 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 3408 001a 5832     		adds	r2, r2, #88
 3409 001c 5201     		lsls	r2, r2, #5
 3410 001e 0244     		add	r2, r2, r0
 3411 0020 1268     		ldr	r2, [r2]
 3412 0022 42F08062 		orr	r2, r2, #67108864
 3413 0026 5833     		adds	r3, r3, #88
 3414 0028 5B01     		lsls	r3, r3, #5
 3415 002a 0B44     		add	r3, r3, r1
 3416 002c 1A60     		str	r2, [r3]
1230:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 3417              		.loc 2 1230 0
 3418 002e 02B0     		add	sp, sp, #8
 3419              		@ sp needed
 3420 0030 7047     		bx	lr
 3421              		.cfi_endproc
 3422              	.LFE150:
 3424 0032 00BFAFF3 		.section	.text.usb_lld_start_in,"ax",%progbits
 3424      0080AFF3 
 3424      0080AFF3 
 3424      0080
 3425              		.align	2
 3426              		.p2align 4,,15
 3427              		.global	usb_lld_start_in
 3428              		.thumb
 3429              		.thumb_func
 3431              	usb_lld_start_in:
 3432              	.LFB151:
1231:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
1232:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /**
1233:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @brief   Starts a transmit operation on an IN endpoint.
1234:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
1235:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] usbp      pointer to the @p USBDriver object
1236:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] ep        endpoint number
1237:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
1238:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @notapi
1239:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  */
1240:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** void usb_lld_start_in(USBDriver *usbp, usbep_t ep) {
 3433              		.loc 2 1240 0
 3434              		.cfi_startproc
 3435              		@ args = 0, pretend = 0, frame = 8
 3436              		@ frame_needed = 0, uses_anonymous_args = 0
 3437              		@ link register save eliminated.
 3438 0000 82B0     		sub	sp, sp, #8
 3439              		.cfi_def_cfa_offset 8
 3440 0002 0190     		str	r0, [sp, #4]
 3441 0004 0B46     		mov	r3, r1
 3442 0006 8DF80330 		strb	r3, [sp, #3]
1241:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
1242:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   usbp->otg->ie[ep].DIEPCTL |= DIEPCTL_EPENA | DIEPCTL_CNAK;
 3443              		.loc 2 1242 0
 3444 000a 019B     		ldr	r3, [sp, #4]
 3445 000c D96B     		ldr	r1, [r3, #60]
 3446 000e 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 3447 0012 019A     		ldr	r2, [sp, #4]
 3448 0014 D06B     		ldr	r0, [r2, #60]
 3449 0016 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 3450 001a 4832     		adds	r2, r2, #72
 3451 001c 5201     		lsls	r2, r2, #5
 3452 001e 0244     		add	r2, r2, r0
 3453 0020 1268     		ldr	r2, [r2]
 3454 0022 42F00442 		orr	r2, r2, #-2080374784
 3455 0026 4833     		adds	r3, r3, #72
 3456 0028 5B01     		lsls	r3, r3, #5
 3457 002a 0B44     		add	r3, r3, r1
 3458 002c 1A60     		str	r2, [r3]
1243:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   usbp->otg->DIEPEMPMSK |= DIEPEMPMSK_INEPTXFEM(ep);
 3459              		.loc 2 1243 0
 3460 002e 019B     		ldr	r3, [sp, #4]
 3461 0030 DB6B     		ldr	r3, [r3, #60]
 3462 0032 019A     		ldr	r2, [sp, #4]
 3463 0034 D26B     		ldr	r2, [r2, #60]
 3464 0036 D2F83418 		ldr	r1, [r2, #2100]
 3465 003a 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 3466 003e 0120     		movs	r0, #1
 3467 0040 00FA02F2 		lsl	r2, r0, r2
 3468 0044 0A43     		orrs	r2, r2, r1
 3469 0046 C3F83428 		str	r2, [r3, #2100]
1244:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 3470              		.loc 2 1244 0
 3471 004a 02B0     		add	sp, sp, #8
 3472              		@ sp needed
 3473 004c 7047     		bx	lr
 3474              		.cfi_endproc
 3475              	.LFE151:
 3477 004e 00BF     		.section	.text.usb_lld_stall_out,"ax",%progbits
 3478              		.align	2
 3479              		.p2align 4,,15
 3480              		.global	usb_lld_stall_out
 3481              		.thumb
 3482              		.thumb_func
 3484              	usb_lld_stall_out:
 3485              	.LFB152:
1245:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
1246:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /**
1247:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @brief   Brings an OUT endpoint in the stalled state.
1248:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
1249:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] usbp      pointer to the @p USBDriver object
1250:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] ep        endpoint number
1251:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
1252:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @notapi
1253:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  */
1254:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** void usb_lld_stall_out(USBDriver *usbp, usbep_t ep) {
 3486              		.loc 2 1254 0
 3487              		.cfi_startproc
 3488              		@ args = 0, pretend = 0, frame = 8
 3489              		@ frame_needed = 0, uses_anonymous_args = 0
 3490              		@ link register save eliminated.
 3491 0000 82B0     		sub	sp, sp, #8
 3492              		.cfi_def_cfa_offset 8
 3493 0002 0190     		str	r0, [sp, #4]
 3494 0004 0B46     		mov	r3, r1
 3495 0006 8DF80330 		strb	r3, [sp, #3]
1255:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
1256:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   usbp->otg->oe[ep].DOEPCTL |= DOEPCTL_STALL;
 3496              		.loc 2 1256 0
 3497 000a 019B     		ldr	r3, [sp, #4]
 3498 000c D96B     		ldr	r1, [r3, #60]
 3499 000e 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 3500 0012 019A     		ldr	r2, [sp, #4]
 3501 0014 D06B     		ldr	r0, [r2, #60]
 3502 0016 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 3503 001a 5832     		adds	r2, r2, #88
 3504 001c 5201     		lsls	r2, r2, #5
 3505 001e 0244     		add	r2, r2, r0
 3506 0020 1268     		ldr	r2, [r2]
 3507 0022 42F40012 		orr	r2, r2, #2097152
 3508 0026 5833     		adds	r3, r3, #88
 3509 0028 5B01     		lsls	r3, r3, #5
 3510 002a 0B44     		add	r3, r3, r1
 3511 002c 1A60     		str	r2, [r3]
1257:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 3512              		.loc 2 1257 0
 3513 002e 02B0     		add	sp, sp, #8
 3514              		@ sp needed
 3515 0030 7047     		bx	lr
 3516              		.cfi_endproc
 3517              	.LFE152:
 3519 0032 00BFAFF3 		.section	.text.usb_lld_stall_in,"ax",%progbits
 3519      0080AFF3 
 3519      0080AFF3 
 3519      0080
 3520              		.align	2
 3521              		.p2align 4,,15
 3522              		.global	usb_lld_stall_in
 3523              		.thumb
 3524              		.thumb_func
 3526              	usb_lld_stall_in:
 3527              	.LFB153:
1258:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
1259:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /**
1260:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @brief   Brings an IN endpoint in the stalled state.
1261:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
1262:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] usbp      pointer to the @p USBDriver object
1263:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] ep        endpoint number
1264:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
1265:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @notapi
1266:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  */
1267:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** void usb_lld_stall_in(USBDriver *usbp, usbep_t ep) {
 3528              		.loc 2 1267 0
 3529              		.cfi_startproc
 3530              		@ args = 0, pretend = 0, frame = 8
 3531              		@ frame_needed = 0, uses_anonymous_args = 0
 3532              		@ link register save eliminated.
 3533 0000 82B0     		sub	sp, sp, #8
 3534              		.cfi_def_cfa_offset 8
 3535 0002 0190     		str	r0, [sp, #4]
 3536 0004 0B46     		mov	r3, r1
 3537 0006 8DF80330 		strb	r3, [sp, #3]
1268:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
1269:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   usbp->otg->ie[ep].DIEPCTL |= DIEPCTL_STALL;
 3538              		.loc 2 1269 0
 3539 000a 019B     		ldr	r3, [sp, #4]
 3540 000c D96B     		ldr	r1, [r3, #60]
 3541 000e 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 3542 0012 019A     		ldr	r2, [sp, #4]
 3543 0014 D06B     		ldr	r0, [r2, #60]
 3544 0016 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 3545 001a 4832     		adds	r2, r2, #72
 3546 001c 5201     		lsls	r2, r2, #5
 3547 001e 0244     		add	r2, r2, r0
 3548 0020 1268     		ldr	r2, [r2]
 3549 0022 42F40012 		orr	r2, r2, #2097152
 3550 0026 4833     		adds	r3, r3, #72
 3551 0028 5B01     		lsls	r3, r3, #5
 3552 002a 0B44     		add	r3, r3, r1
 3553 002c 1A60     		str	r2, [r3]
1270:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 3554              		.loc 2 1270 0
 3555 002e 02B0     		add	sp, sp, #8
 3556              		@ sp needed
 3557 0030 7047     		bx	lr
 3558              		.cfi_endproc
 3559              	.LFE153:
 3561 0032 00BFAFF3 		.section	.text.usb_lld_clear_out,"ax",%progbits
 3561      0080AFF3 
 3561      0080AFF3 
 3561      0080
 3562              		.align	2
 3563              		.p2align 4,,15
 3564              		.global	usb_lld_clear_out
 3565              		.thumb
 3566              		.thumb_func
 3568              	usb_lld_clear_out:
 3569              	.LFB154:
1271:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
1272:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /**
1273:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @brief   Brings an OUT endpoint in the active state.
1274:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
1275:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] usbp      pointer to the @p USBDriver object
1276:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] ep        endpoint number
1277:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
1278:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @notapi
1279:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  */
1280:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** void usb_lld_clear_out(USBDriver *usbp, usbep_t ep) {
 3570              		.loc 2 1280 0
 3571              		.cfi_startproc
 3572              		@ args = 0, pretend = 0, frame = 8
 3573              		@ frame_needed = 0, uses_anonymous_args = 0
 3574              		@ link register save eliminated.
 3575 0000 82B0     		sub	sp, sp, #8
 3576              		.cfi_def_cfa_offset 8
 3577 0002 0190     		str	r0, [sp, #4]
 3578 0004 0B46     		mov	r3, r1
 3579 0006 8DF80330 		strb	r3, [sp, #3]
1281:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
1282:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   usbp->otg->oe[ep].DOEPCTL &= ~DOEPCTL_STALL;
 3580              		.loc 2 1282 0
 3581 000a 019B     		ldr	r3, [sp, #4]
 3582 000c D96B     		ldr	r1, [r3, #60]
 3583 000e 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 3584 0012 019A     		ldr	r2, [sp, #4]
 3585 0014 D06B     		ldr	r0, [r2, #60]
 3586 0016 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 3587 001a 5832     		adds	r2, r2, #88
 3588 001c 5201     		lsls	r2, r2, #5
 3589 001e 0244     		add	r2, r2, r0
 3590 0020 1268     		ldr	r2, [r2]
 3591 0022 22F40012 		bic	r2, r2, #2097152
 3592 0026 5833     		adds	r3, r3, #88
 3593 0028 5B01     		lsls	r3, r3, #5
 3594 002a 0B44     		add	r3, r3, r1
 3595 002c 1A60     		str	r2, [r3]
1283:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 3596              		.loc 2 1283 0
 3597 002e 02B0     		add	sp, sp, #8
 3598              		@ sp needed
 3599 0030 7047     		bx	lr
 3600              		.cfi_endproc
 3601              	.LFE154:
 3603 0032 00BFAFF3 		.section	.text.usb_lld_clear_in,"ax",%progbits
 3603      0080AFF3 
 3603      0080AFF3 
 3603      0080
 3604              		.align	2
 3605              		.p2align 4,,15
 3606              		.global	usb_lld_clear_in
 3607              		.thumb
 3608              		.thumb_func
 3610              	usb_lld_clear_in:
 3611              	.LFB155:
1284:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
1285:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** /**
1286:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @brief   Brings an IN endpoint in the active state.
1287:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
1288:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] usbp      pointer to the @p USBDriver object
1289:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @param[in] ep        endpoint number
1290:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  *
1291:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  * @notapi
1292:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****  */
1293:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** void usb_lld_clear_in(USBDriver *usbp, usbep_t ep) {
 3612              		.loc 2 1293 0
 3613              		.cfi_startproc
 3614              		@ args = 0, pretend = 0, frame = 8
 3615              		@ frame_needed = 0, uses_anonymous_args = 0
 3616              		@ link register save eliminated.
 3617 0000 82B0     		sub	sp, sp, #8
 3618              		.cfi_def_cfa_offset 8
 3619 0002 0190     		str	r0, [sp, #4]
 3620 0004 0B46     		mov	r3, r1
 3621 0006 8DF80330 		strb	r3, [sp, #3]
1294:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** 
1295:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c ****   usbp->otg->ie[ep].DIEPCTL &= ~DIEPCTL_STALL;
 3622              		.loc 2 1295 0
 3623 000a 019B     		ldr	r3, [sp, #4]
 3624 000c D96B     		ldr	r1, [r3, #60]
 3625 000e 9DF80330 		ldrb	r3, [sp, #3]	@ zero_extendqisi2
 3626 0012 019A     		ldr	r2, [sp, #4]
 3627 0014 D06B     		ldr	r0, [r2, #60]
 3628 0016 9DF80320 		ldrb	r2, [sp, #3]	@ zero_extendqisi2
 3629 001a 4832     		adds	r2, r2, #72
 3630 001c 5201     		lsls	r2, r2, #5
 3631 001e 0244     		add	r2, r2, r0
 3632 0020 1268     		ldr	r2, [r2]
 3633 0022 22F40012 		bic	r2, r2, #2097152
 3634 0026 4833     		adds	r3, r3, #72
 3635 0028 5B01     		lsls	r3, r3, #5
 3636 002a 0B44     		add	r3, r3, r1
 3637 002c 1A60     		str	r2, [r3]
1296:/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.c **** }
 3638              		.loc 2 1296 0
 3639 002e 02B0     		add	sp, sp, #8
 3640              		@ sp needed
 3641 0030 7047     		bx	lr
 3642              		.cfi_endproc
 3643              	.LFE155:
 3645 0032 00BFAFF3 		.text
 3645      0080AFF3 
 3645      0080AFF3 
 3645      0080
 3646              	.Letext0:
 3647              		.file 3 "/usr/lib/gcc/arm-none-eabi/4.8/include/stddef.h"
 3648              		.file 4 "/usr/include/newlib/machine/_default_types.h"
 3649              		.file 5 "/usr/include/newlib/stdint.h"
 3650              		.file 6 "/usr/src/chibiostest/os/ports/GCC/ARMCMx/chtypes.h"
 3651              		.file 7 "/usr/src/chibiostest/os/kernel/include/chlists.h"
 3652              		.file 8 "/usr/src/chibiostest/os/kernel/include/chthreads.h"
 3653              		.file 9 "/usr/src/chibiostest/os/ports/GCC/ARMCMx/chcore_v7m.h"
 3654              		.file 10 "/usr/src/chibiostest/os/kernel/include/chschd.h"
 3655              		.file 11 "/usr/src/chibiostest/os/kernel/include/chmtx.h"
 3656              		.file 12 "/usr/src/chibiostest/os/kernel/include/chqueues.h"
 3657              		.file 13 "/usr/src/chibiostest/os/hal/platforms/STM32F4xx/stm32f4xx.h"
 3658              		.file 14 "/usr/src/chibiostest/os/hal/include/usb.h"
 3659              		.file 15 "/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/usb_lld.h"
 3660              		.file 16 "/usr/src/chibiostest/os/hal/platforms/STM32/OTGv1/stm32_otg.h"
 3661              		.file 17 "/usr/src/chibiostest/os/ports/common/ARMCMx/CMSIS/include/core_cm4.h"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 usb_lld.c
     /tmp/ccamG46E.s:20     .text.fifo_remove:0000000000000000 $t
     /tmp/ccamG46E.s:25     .text.fifo_remove:0000000000000000 fifo_remove
     /tmp/ccamG46E.s:64     .bss.USBD1:0000000000000000 USBD1
     /tmp/ccamG46E.s:61     .bss.USBD1:0000000000000000 $d
     /tmp/ccamG46E.s:67     .bss.ep0_state:0000000000000000 $d
     /tmp/ccamG46E.s:70     .bss.ep0_state:0000000000000000 ep0_state
     /tmp/ccamG46E.s:73     .bss.ep0setup_buffer:0000000000000000 $d
     /tmp/ccamG46E.s:76     .bss.ep0setup_buffer:0000000000000000 ep0setup_buffer
     /tmp/ccamG46E.s:79     .rodata.ep0config:0000000000000000 $d
     /tmp/ccamG46E.s:82     .rodata.ep0config:0000000000000000 ep0config
     /tmp/ccamG46E.s:95     .rodata.fsparams:0000000000000000 $d
     /tmp/ccamG46E.s:98     .rodata.fsparams:0000000000000000 fsparams
     /tmp/ccamG46E.s:103    .text.usb_lld_wakeup_pump:0000000000000000 $t
     /tmp/ccamG46E.s:108    .text.usb_lld_wakeup_pump:0000000000000000 usb_lld_wakeup_pump
     /tmp/ccamG46E.s:144    .text.otg_core_reset:0000000000000000 $t
     /tmp/ccamG46E.s:149    .text.otg_core_reset:0000000000000000 otg_core_reset
     /tmp/ccamG46E.s:197    .text.otg_disable_ep:0000000000000000 $t
     /tmp/ccamG46E.s:202    .text.otg_disable_ep:0000000000000000 otg_disable_ep
     /tmp/ccamG46E.s:359    .text.otg_rxfifo_flush:0000000000000000 $t
     /tmp/ccamG46E.s:364    .text.otg_rxfifo_flush:0000000000000000 otg_rxfifo_flush
     /tmp/ccamG46E.s:404    .text.otg_txfifo_flush:0000000000000000 $t
     /tmp/ccamG46E.s:409    .text.otg_txfifo_flush:0000000000000000 otg_txfifo_flush
     /tmp/ccamG46E.s:452    .text.otg_ram_reset:0000000000000000 $t
     /tmp/ccamG46E.s:457    .text.otg_ram_reset:0000000000000000 otg_ram_reset
     /tmp/ccamG46E.s:481    .rodata:0000000000000000 $d
     /tmp/ccamG46E.s:485    .text.otg_ram_alloc:0000000000000000 $t
     /tmp/ccamG46E.s:490    .text.otg_ram_alloc:0000000000000000 otg_ram_alloc
     /tmp/ccamG46E.s:536    .text.otg_ram_alloc:0000000000000038 $d
     /tmp/ccamG46E.s:541    .text.otg_do_push:0000000000000000 $t
     /tmp/ccamG46E.s:546    .text.otg_do_push:0000000000000000 otg_do_push
     /tmp/ccamG46E.s:590    .text.otg_fifo_write_from_buffer:0000000000000000 $t
     /tmp/ccamG46E.s:595    .text.otg_fifo_write_from_buffer:0000000000000000 otg_fifo_write_from_buffer
     /tmp/ccamG46E.s:625    .text.otg_fifo_write_from_queue:0000000000000000 $t
     /tmp/ccamG46E.s:630    .text.otg_fifo_write_from_queue:0000000000000000 otg_fifo_write_from_queue
     /tmp/ccamG46E.s:838    .text.otg_do_pop:0000000000000000 $t
     /tmp/ccamG46E.s:843    .text.otg_do_pop:0000000000000000 otg_do_pop
     /tmp/ccamG46E.s:892    .text.otg_fifo_read_to_buffer:0000000000000000 $t
     /tmp/ccamG46E.s:897    .text.otg_fifo_read_to_buffer:0000000000000000 otg_fifo_read_to_buffer
     /tmp/ccamG46E.s:963    .text.otg_fifo_read_to_queue:0000000000000000 $t
     /tmp/ccamG46E.s:968    .text.otg_fifo_read_to_queue:0000000000000000 otg_fifo_read_to_queue
     /tmp/ccamG46E.s:1160   .text.otg_rxfifo_handler:0000000000000000 $t
     /tmp/ccamG46E.s:1165   .text.otg_rxfifo_handler:0000000000000000 otg_rxfifo_handler
     /tmp/ccamG46E.s:1336   .text.otg_txfifo_handler:0000000000000000 $t
     /tmp/ccamG46E.s:1341   .text.otg_txfifo_handler:0000000000000000 otg_txfifo_handler
     /tmp/ccamG46E.s:1519   .text.otg_epin_handler:0000000000000000 $t
     /tmp/ccamG46E.s:1524   .text.otg_epin_handler:0000000000000000 otg_epin_handler
     /tmp/ccamG46E.s:1658   .text.otg_epout_handler:0000000000000000 $t
     /tmp/ccamG46E.s:1663   .text.otg_epout_handler:0000000000000000 otg_epout_handler
     /tmp/ccamG46E.s:1763   .text.usb_lld_serve_interrupt:0000000000000000 $t
     /tmp/ccamG46E.s:1768   .text.usb_lld_serve_interrupt:0000000000000000 usb_lld_serve_interrupt
     /tmp/ccamG46E.s:1983   .text.usb_lld_pump:0000000000000000 $t
     /tmp/ccamG46E.s:1988   .text.usb_lld_pump:0000000000000000 usb_lld_pump
     /tmp/ccamG46E.s:2199   .text.usb_lld_pump:000000000000012c $d
     /tmp/ccamG46E.s:2205   .text.Vector14C:0000000000000000 $t
     /tmp/ccamG46E.s:2211   .text.Vector14C:0000000000000000 Vector14C
     /tmp/ccamG46E.s:2234   .text.Vector14C:0000000000000018 $d
     /tmp/ccamG46E.s:2239   .text.usb_lld_init:0000000000000000 $t
     /tmp/ccamG46E.s:2245   .text.usb_lld_init:0000000000000000 usb_lld_init
     /tmp/ccamG46E.s:2303   .text.usb_lld_init:0000000000000054 $d
     /tmp/ccamG46E.s:2310   .text.usb_lld_start:0000000000000000 $t
     /tmp/ccamG46E.s:2316   .text.usb_lld_start:0000000000000000 usb_lld_start
     /tmp/ccamG46E.s:2462   .text.usb_lld_start:00000000000000f4 $d
     /tmp/ccamG46E.s:2471   .text.usb_lld_stop:0000000000000000 $t
     /tmp/ccamG46E.s:2477   .text.usb_lld_stop:0000000000000000 usb_lld_stop
     /tmp/ccamG46E.s:2521   .text.usb_lld_reset:0000000000000000 $t
     /tmp/ccamG46E.s:2527   .text.usb_lld_reset:0000000000000000 usb_lld_reset
     /tmp/ccamG46E.s:2689   .text.usb_lld_reset:0000000000000124 $d
     /tmp/ccamG46E.s:2694   .text.usb_lld_set_address:0000000000000000 $t
     /tmp/ccamG46E.s:2700   .text.usb_lld_set_address:0000000000000000 usb_lld_set_address
     /tmp/ccamG46E.s:2732   .text.usb_lld_init_endpoint:0000000000000000 $t
     /tmp/ccamG46E.s:2738   .text.usb_lld_init_endpoint:0000000000000000 usb_lld_init_endpoint
     /tmp/ccamG46E.s:2771   .text.usb_lld_init_endpoint:0000000000000030 $d
     /tmp/ccamG46E.s:2775   .text.usb_lld_init_endpoint:0000000000000040 $t
     /tmp/ccamG46E.s:3020   .text.usb_lld_init_endpoint:000000000000022c $d
     /tmp/ccamG46E.s:3029   .text.usb_lld_disable_endpoints:0000000000000000 $t
     /tmp/ccamG46E.s:3035   .text.usb_lld_disable_endpoints:0000000000000000 usb_lld_disable_endpoints
     /tmp/ccamG46E.s:3061   .text.usb_lld_get_status_out:0000000000000000 $t
     /tmp/ccamG46E.s:3067   .text.usb_lld_get_status_out:0000000000000000 usb_lld_get_status_out
     /tmp/ccamG46E.s:3118   .text.usb_lld_get_status_in:0000000000000000 $t
     /tmp/ccamG46E.s:3124   .text.usb_lld_get_status_in:0000000000000000 usb_lld_get_status_in
     /tmp/ccamG46E.s:3175   .text.usb_lld_read_setup:0000000000000000 $t
     /tmp/ccamG46E.s:3181   .text.usb_lld_read_setup:0000000000000000 usb_lld_read_setup
     /tmp/ccamG46E.s:3214   .text.usb_lld_prepare_receive:0000000000000000 $t
     /tmp/ccamG46E.s:3220   .text.usb_lld_prepare_receive:0000000000000000 usb_lld_prepare_receive
     /tmp/ccamG46E.s:3289   .text.usb_lld_prepare_transmit:0000000000000000 $t
     /tmp/ccamG46E.s:3295   .text.usb_lld_prepare_transmit:0000000000000000 usb_lld_prepare_transmit
     /tmp/ccamG46E.s:3383   .text.usb_lld_start_out:0000000000000000 $t
     /tmp/ccamG46E.s:3389   .text.usb_lld_start_out:0000000000000000 usb_lld_start_out
     /tmp/ccamG46E.s:3425   .text.usb_lld_start_in:0000000000000000 $t
     /tmp/ccamG46E.s:3431   .text.usb_lld_start_in:0000000000000000 usb_lld_start_in
     /tmp/ccamG46E.s:3478   .text.usb_lld_stall_out:0000000000000000 $t
     /tmp/ccamG46E.s:3484   .text.usb_lld_stall_out:0000000000000000 usb_lld_stall_out
     /tmp/ccamG46E.s:3520   .text.usb_lld_stall_in:0000000000000000 $t
     /tmp/ccamG46E.s:3526   .text.usb_lld_stall_in:0000000000000000 usb_lld_stall_in
     /tmp/ccamG46E.s:3562   .text.usb_lld_clear_out:0000000000000000 $t
     /tmp/ccamG46E.s:3568   .text.usb_lld_clear_out:0000000000000000 usb_lld_clear_out
     /tmp/ccamG46E.s:3604   .text.usb_lld_clear_in:0000000000000000 $t
     /tmp/ccamG46E.s:3610   .text.usb_lld_clear_in:0000000000000000 usb_lld_clear_in
                     .debug_frame:0000000000000010 $d
     /tmp/ccamG46E.s:540    .text.otg_ram_alloc:000000000000003c $t
     /tmp/ccamG46E.s:2204   .text.usb_lld_pump:0000000000000134 $t
     /tmp/ccamG46E.s:2238   .text.Vector14C:000000000000001c $t
     /tmp/ccamG46E.s:2470   .text.usb_lld_start:0000000000000108 $t
     /tmp/ccamG46E.s:2693   .text.usb_lld_reset:0000000000000128 $t

UNDEFINED SYMBOLS
_usb_ep0setup
_usb_ep0in
_usb_ep0out
chSchReadyI
halPolledDelay
chDbgPanic
dbg_check_lock
chSchRescheduleS
dbg_check_unlock
dbg_check_lock_from_isr
dbg_check_unlock_from_isr
_usb_reset
chSchGoSleepS
rlist
dbg_check_enter_isr
dbg_check_leave_isr
_port_irq_epilogue
usbObjectInit
_thread_memfill
nvicEnableVector
chThdCreateI
memcpy
